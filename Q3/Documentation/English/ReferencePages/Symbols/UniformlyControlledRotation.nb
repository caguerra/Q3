(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 14.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    183863,       4560]
NotebookOptionsPosition[    168261,       4243]
NotebookOutlinePosition[    171069,       4308]
CellTagsIndexPosition[    170982,       4303]
WindowTitle->UniformlyControlledRotation
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[GridBox[{
   {GridBox[{
      {
       ItemBox[Cell[BoxData[
         RowBox[{
          TemplateBox[{12},
           "Spacer1"], Cell["Q3 SYMBOL", "PacletNameCell",
           TextAlignment->Center,ExpressionUUID->
           "51fa4068-b24f-4154-8f44-82a35a009ba3"], 
          TemplateBox[{8},
           "Spacer1"]}]],
         TextAlignment->Center,ExpressionUUID->
         "4aeff71d-68a4-4f11-80f3-8092261b6ee2"],
        Background->RGBColor[0.490196, 0.576471, 0.690196],
        ItemSize->Full], ""}
     },
     GridBoxAlignment->{"Rows" -> {{Center}}},
     GridBoxItemSize->{"Columns" -> {Full, 
         Scaled[0.02]}, "Rows" -> {{2.5}}}], Cell[TextData[{
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "See Also",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "ea200103-f806-4077-a4a5-6c40c62727a8"]
         }],ExpressionUUID->"00b88ce8-2ebb-4417-8e86-e2bff4a3abcb"],
         StripOnInput->False],{
        "\"ControlledGate\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/ControlledGate"], 
         "\"ControlledPower\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/ControlledPower"], 
         "\"CNOT\"" :> Documentation`HelpLookup["paclet:Q3/ref/CNOT"], 
         "\"CZ\"" :> Documentation`HelpLookup["paclet:Q3/ref/CZ"], 
         "\"AmplitudeEmbeddingGate\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/AmplitudeEmbeddingGate"], 
         "\"UniformlyControlledGate\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/UniformlyControlledGate"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"SeeAlso"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "205421b8-0488-426f-ba05-f995090f6a7c"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Related Guides",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "637d8997-8a3d-4883-9648-d0831c676773"]
         }],ExpressionUUID->"b23929ce-44b5-4787-980f-bd512afff316"],
         StripOnInput->False],{
        "\"Quantum Information Systems\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/guide/QuantumInformationSystems"], "\"Q3\"" :> 
         Documentation`HelpLookup["paclet:Q3/guide/Q3"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"MoreAbout"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "6ce3783e-2a6e-480c-9588-a8a023d8c842"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Tech Notes",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "44b26981-534c-464f-a5b8-b32fc7e10046"]
         }],ExpressionUUID->"cf4aac68-5c13-48db-ad4b-2d104215fa0e"],
         StripOnInput->False],{
        "\"Multi-Control Unitary Gates\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/MultiControlUnitaryGates"], 
         "\"Quantum Information Systems with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuantumInformationSystems"], 
         "\"Quick Quantum Computing with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuickQuantumComputingWithQ3"], 
         "\"Q3: Quick Start\"" :> 
         Documentation`HelpLookup["paclet:Q3/tutorial/Q3QuickStart"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"Tutorials"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "bc698f79-1f83-4808-9fcd-f146fcfae25a"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "URL",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "3a7b776b-aade-411b-98d4-049ba990c2d7"]
         }],ExpressionUUID->"32a392e3-bc65-411b-86d9-43396d5c1ce6"],
         StripOnInput->False],{
        "\"Q3/ref/UniformlyControlledRotation\"" :> None, 
         "\"Copy Wolfram Documentation Center URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{Cell["Q3/ref/UniformlyControlledRotation"]}, Visible -> 
               False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], Delimiter, 
         "\"Copy web URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{
               Cell[BoxData[
                 MakeBoxes[
                  Hyperlink[
                   "http://reference.wolfram.com/language/Q3/ref/\
UniformlyControlledRotation.html"], StandardForm]], "Input", 
                 TextClipboardType -> "PlainText"]}, Visible -> False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], 
         "\"Go to web URL\"" :> 
         FrontEndExecute[{
           NotebookLocate[{
             URL[If[TrueQ[False], 
                 "http://reference.wolfram.com/system-modeler/", 
                 "http://reference.wolfram.com/language/"] <> 
               "Q3/ref/UniformlyControlledRotation" <> ".html"], None}]}]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"URLMenu"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "a88aed83-ac48-4d97-bbce-7f38d31582e4"]
    }], "AnchorBar",
     CacheGraphics->False,ExpressionUUID->
     "aed93d70-295a-4e2a-ba90-b92bdae70d50"]}
  }]], "AnchorBarGrid",
 CellID->1,ExpressionUUID->"94542b31-fb3a-4462-be96-e2819ae7dbe2"],

Cell["Q3`", "ContextNameCell",ExpressionUUID->"c835a996-4234-4b72-b916-d46b802b024e"],

Cell[CellGroupData[{

Cell[BoxData[GridBox[{
   {Cell[TextData[{
     Cell[
     "UniformlyControlledRotation", "ObjectName",ExpressionUUID->
      "a78fce6f-0a2a-4427-92b2-bbfef29292f1"],
     Cell[BoxData[
      TemplateBox[{8},
       "Spacer1"]],ExpressionUUID->"fecf219f-790e-424c-818b-615c30bf4450"],
     Cell[BoxData[
     ""], "ObjectNameTranslation",ExpressionUUID->
      "e49ecb55-fc15-4220-9603-cc12311de52d"]
    }],ExpressionUUID->"a323f3fc-3822-4571-95ce-fb2ff52abc3f"], Cell[BoxData[
     StyleBox[
      GraphicsBox[InsetBox[
        StyleBox["\<\"UPDATED IN 14.0\"\>",
         StripOnInput->False,
         FontFamily->"Source Sans Pro",
         FontSize->17,
         FontWeight->"Bold",
         FontSlant->"Italic",
         FontColor->RGBColor[0.968627, 0.466667, 0]], {Right, Center}, {
        Right, Center}],
       AxesStyle->Large,
       FrameStyle->Large,
       ImageSize->{125, 24},
       PlotRangePadding->Scaled[0.025]], "NewInGraphic",
      StripOnInput->False]],
     Deployed->True,
     Magnification->1,ExpressionUUID->
     "0a86718f-ae59-44a3-a8de-700b823648a3"]}
  }]], "ObjectNameGrid",
 CacheGraphics->False,ExpressionUUID->"410ab358-abde-49c4-94c4-8dd779e9b7ed"],

Cell[BoxData[GridBox[{
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["UniformlyControlledRotation"]], 
         "paclet:Q3/ref/UniformlyControlledRotation", "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["1", "TR"]], ",", 
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["2", "TR"]], ",", 
          StyleBox["\[Ellipsis]", "TR"], ",", 
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["n", "TI"]]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           StyleBox["\[Theta]", "TR"], 
           StyleBox["1", "TR"]], ",", 
          SubscriptBox[
           StyleBox["\[Theta]", "TR"], 
           StyleBox["2", "TR"]], ",", 
          StyleBox["\[Ellipsis]", "TR"], ",", 
          SubscriptBox[
           StyleBox["\[Theta]", "TR"], 
           SuperscriptBox[
            StyleBox["2", "TI"], 
            StyleBox["n", "TI"]]]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          StyleBox["x", "TI"], ",", 
          StyleBox["y", "TI"], ",", 
          StyleBox["z", "TI"]}], "}"}], ",", 
        StyleBox["s", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "813d28a7-7316-40e9-af35-0583ba6ab7d9"],
     "\[LineSeparator]represents the uniformly controlled rotation on qubit ",
     
     Cell[BoxData[
      StyleBox["s", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "470c7032-9767-4ab0-9448-d38dd3752f75"],
     " around axis ",
     Cell[BoxData[
      RowBox[{"{", 
       RowBox[{
        StyleBox["x", "TI"], ",", 
        StyleBox["y", "TI"], ",", 
        StyleBox["z", "TI"]}], "}"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "0d9eef65-7a04-4718-bf56-1ddbb7beeddc"],
     " by angles ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["\[Theta]", "TR"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["\[Theta]", "TR"], 
        StyleBox["2", "TR"]], ",", 
       StyleBox["\[Ellipsis]", "TR"], ",", 
       SubscriptBox[
        StyleBox["\[Theta]", "TR"], 
        StyleBox[
         SuperscriptBox[
          StyleBox["2", "TI"], 
          StyleBox["n", "TI"]], "TI"]]}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "e0a4b7b2-7277-4d5e-81d8-c5b9f161a958"],
     " depending on all possible bit sequences of control qubits ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["2", "TR"]], ",", 
       StyleBox["\[Ellipsis]", "TR"], ",", 
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["n", "TI"]]}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "abdabbaa-72d6-47c8-b2b9-796641028575"],
     "."
    }],ExpressionUUID->"7e8da8b7-0bdd-4e04-8c8f-f043d7bd7dd6"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["UniformlyControlledRotation"]], 
         "paclet:Q3/ref/UniformlyControlledRotation", "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["1", "TR"]], ",", 
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["2", "TR"]], ",", 
          StyleBox["\[Ellipsis]", "TR"], ",", 
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["n", "TI"]]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           StyleBox["\[Theta]", "TR"], 
           StyleBox["1", "TR"]], ",", 
          SubscriptBox[
           StyleBox["\[Theta]", "TR"], 
           StyleBox["2", "TR"]], ",", 
          StyleBox["\[Ellipsis]", "TR"], ",", 
          SubscriptBox[
           StyleBox["\[Theta]", "TR"], 
           SuperscriptBox[
            StyleBox["2", "TI"], 
            StyleBox["n", "TI"]]]}], "}"}], ",", 
        RowBox[{
         StyleBox["s", "TI"], "[", 
         RowBox[{
          StyleBox["\[Ellipsis]", "TR"], ",", 
          StyleBox["k", "TI"]}], "]"}]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "2e1658d0-4fe3-40b2-8822-54f064def2de"],
     "\[LineSeparator]uses the ",
     Cell[BoxData[
      StyleBox["k", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "036aa4e1-8019-4fe8-b15d-27d3dac20740"],
     "-axis as the rotation axis."
    }],ExpressionUUID->"e6451117-92ec-47f5-93aa-5d687c7a78c8"]}
  }]], "Usage",
 CellID->1604475725,ExpressionUUID->"f0e31d49-56bb-40c1-9c4a-db9b3061f805"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[Cell[BoxData[
 ButtonBox[Cell[TextData[{
   Cell[BoxData[
    DynamicBox[ToBoxes[
      If[
       MatchQ[
        CurrentValue[
         EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, 
         Closed], 
        Alternatives[Open, True]], 
       Style[
        Graphics[{
          Thickness[0.18], 
          RGBColor[0.8509803921568627, 0.396078431372549, 0], 
          Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
         PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
        0.68 Inherited], 
       Rotate[
        Style[
         Graphics[{
           Thickness[0.18], 
           RGBColor[0.8509803921568627, 0.396078431372549, 0], 
           Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
          PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
         0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
     ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
    ExpressionUUID->"fa733b57-2ac1-4129-8065-d7f09b9c5c38"],
   Cell[BoxData[
    TemplateBox[{1},
     "Spacer1"]],ExpressionUUID->"cf7c42a7-5b45-4698-87f6-137b8e712cc0"],
   "Details and Options"
  }], "NotesFrameText",ExpressionUUID->"8fe83dea-e55d-41f9-9d13-e5c064733ac7"],
  Appearance->{Automatic, None, "Normal", Automatic},
  BaseStyle->None,
  ButtonFunction:>(FrontEndExecute[{
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], All, ButtonCell], 
     FrontEndToken["OpenCloseGroup"], 
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], After, CellContents]}]& ),
  Evaluator->None,
  Method->
   "Preemptive"]],ExpressionUUID->"80a48cf1-db53-4015-8022-38e4b6333dd3"]], \
"NotesSection",
 WholeCellGroupOpener->True,
 CellGroupingRules->{"SectionGrouping", 50},
 CacheGraphics->False,
 CellID->506455307,ExpressionUUID->"ab896003-f768-4397-8719-79596c5b8e91"],

Cell[TextData[{
 "In general, ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["UniformlyControlledRotation"]], 
     "paclet:Q3/ref/UniformlyControlledRotation", "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      SubscriptBox[
       StyleBox["c", "TI"], 
       StyleBox["1", "TR"]], ",", 
      SubscriptBox[
       StyleBox["c", "TI"], 
       StyleBox["2", "TR"]], ",", 
      StyleBox["\[Ellipsis]", "TR"], ",", 
      SubscriptBox[
       StyleBox["c", "TI"], 
       StyleBox["n", "TI"]]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      SubscriptBox[
       StyleBox["\[Theta]", "TR"], 
       StyleBox["1", "TR"]], ",", 
      SubscriptBox[
       StyleBox["\[Theta]", "TR"], 
       StyleBox["2", "TR"]], ",", 
      StyleBox["\[Ellipsis]", "TR"], ",", 
      SubscriptBox[
       StyleBox["\[Theta]", "TR"], 
       SuperscriptBox[
        StyleBox["2", "TI"], 
        StyleBox["n", "TI"]]]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      StyleBox["x", "TI"], ",", 
      StyleBox["y", "TI"], ",", 
      StyleBox["z", "TI"]}], "}"}], ",", 
    StyleBox["s", "TI"]}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "966cba12-4c7f-490e-8828-7e3fb96cb020"],
 " is a product of ",
 Cell[BoxData[
  FormBox[
   SuperscriptBox["2", "n"], TraditionalForm]],ExpressionUUID->
  "5d26a16a-948f-422f-8ce2-05bbc91ea88e"],
 " two-level matrices."
}], "Notes",
 CellID->471354696,ExpressionUUID->"ae0bbd84-36cf-4df2-abb8-07b3d8ef73be"],

Cell[TextData[{
 "Note also that ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["UniformlyControlledRotation"]], 
     "paclet:Q3/ref/UniformlyControlledRotation", "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      SubscriptBox[
       StyleBox["c", "TI"], 
       StyleBox["1", "TR"]], ",", 
      SubscriptBox[
       StyleBox["c", "TI"], 
       StyleBox["2", "TR"]], ",", 
      StyleBox["\[Ellipsis]", "TR"], ",", 
      SubscriptBox[
       StyleBox["c", "TI"], 
       StyleBox["n", "TI"]]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      SubscriptBox[
       StyleBox["\[Theta]", "TR"], 
       StyleBox["1", "TR"]], ",", 
      SubscriptBox[
       StyleBox["\[Theta]", "TR"], 
       StyleBox["2", "TR"]], ",", 
      StyleBox["\[Ellipsis]", "TR"], ",", 
      SubscriptBox[
       StyleBox["\[Theta]", "TR"], 
       SuperscriptBox[
        StyleBox["2", "TI"], 
        StyleBox["n", "TI"]]]}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      StyleBox["x", "TI"], ",", 
      StyleBox["y", "TI"], ",", 
      StyleBox["z", "TI"]}], "}"}], ",", 
    StyleBox["s", "TI"]}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "f9de45c7-39bd-48a8-a795-4d56eba6506c"],
 " equals to ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    RowBox[{
     SubscriptBox["R", 
      StyleBox["v",
       FontWeight->"Bold"]], "(", 
     SubscriptBox["\[Theta]", "1"], ")"}], "\[CirclePlus]", 
    RowBox[{
     SubscriptBox["R", 
      StyleBox["v",
       FontWeight->"Bold"]], "(", 
     SubscriptBox["\[Theta]", "2"], ")"}], "\[CirclePlus]", "\[Ellipsis]", 
    "\[CirclePlus]", 
    RowBox[{
     SubscriptBox["R", 
      StyleBox["v",
       FontWeight->"Bold"]], "(", 
     SubscriptBox["\[Theta]", 
      SuperscriptBox["2", "n"]], ")"}]}], TraditionalForm]],ExpressionUUID->
  "38d59cae-193b-4552-8d01-a073e5bbe82c"],
 ", where ",
 Cell[BoxData[
  FormBox[
   RowBox[{
    StyleBox["v",
     FontWeight->"Bold"], "\[Congruent]", 
    RowBox[{"{", 
     RowBox[{"x", ",", "y", ",", "z"}], "}"}]}], TraditionalForm]],
  ExpressionUUID->"f350371f-a000-4871-92e3-c2f12fd3aab9"],
 ", and hence is block diagonal."
}], "Notes",
 CellID->1734206947,ExpressionUUID->"3b7a3b8a-d1fa-42ce-ae8e-f5f6de2d4b3e"],

Cell[TextData[{
 "An arbitrary multi-qubit unitary matrix ",
 Cell[BoxData[
  FormBox["U", TraditionalForm]],ExpressionUUID->
  "1c60fff4-b446-4985-9bc2-3fe9d06bf993"],
 " can be decomposed into a product of uniformly controlled rotations; see M\
\[ODoubleDot]tt\[ODoubleDot]nen ",
 StyleBox["et al",
  FontSlant->"Italic"],
 ". (2004)."
}], "Notes",
 CellID->940907943,ExpressionUUID->"67d2a3c7-cb3d-4ad3-9716-8f3879367beb"]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "PrimaryExamplesSection"}, Open], 
      Alternatives[True, Open]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "fcae9195-ed73-4112-8d2c-63cbcd51c4da"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"88d288a7-7a3a-46b2-a02a-0311529c0167"],
 "Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(4)", "ExampleCount",ExpressionUUID->
  "30c8ff10-b96b-43da-be7e-3a6283597022"]
}], "PrimaryExamplesSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellTags->"PrimaryExamplesSection",
 CellID->1516651688,ExpressionUUID->"98e35c8d-2f08-44e3-a2fe-0ef80833996c"],

Cell[BoxData[
 RowBox[{"Needs", "[", "\"\<Q3`\>\"", "]"}]], "Input", "ExampleInitialization",
 CellLabel->"In[1]:=",
 CellID->1759966869,ExpressionUUID->"96c47721-5f98-45ed-9938-103103a6dbf8"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "4122dfe9-c228-4d87-b21a-326ef795d402"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"df691591-0f8b-48f9-a841-95941e510943"],
 "Basic Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(1)", "ExampleCount",ExpressionUUID->
  "b457f843-0a52-4b84-ac3d-fe03bf8bc403"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1881513973,ExpressionUUID->"275f18fc-9b01-4f0e-ad25-c0dd905e7d59"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S", ",", "T"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1226794958,ExpressionUUID->"175b08b0-7149-48ff-b55f-d26d2322e5da"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"$n", "=", "3"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$N", "=", 
   RowBox[{"Power", "[", 
    RowBox[{"2", ",", "$n"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"kk", "=", 
   RowBox[{"Range", "[", "$n", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"SS", "=", 
  RowBox[{"S", "[", 
   RowBox[{"kk", ",", "$"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->968013306,ExpressionUUID->"b35f5711-3cde-4aa7-8a73-8e6894ced45c"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "1"},
      "RowWithSeparators"]],
    $CellContext`S[1, Q3`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "2"},
      "RowWithSeparators"]],
    $CellContext`S[2, Q3`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "3"},
      "RowWithSeparators"]],
    $CellContext`S[3, Q3`$]]}], "}"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1831391757,ExpressionUUID->"1e6e1805-e808-491e-927d-1a0b5a8ec915"]
}, Open  ]],

Cell[TextData[{
 "Define a series of rotations on qubit ",
 StyleBox["T[1,$]", "Input"],
 "."
}], "ExampleText",
 CellID->2035556350,ExpressionUUID->"2e179b0f-523f-4f10-b4f2-176c3012d595"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"aa", "=", 
  RowBox[{
   RowBox[{"RandomReal", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "1"}], "}"}], ",", "$N"}], "]"}], "*", 
   "Pi"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->694985576,ExpressionUUID->"310656d4-c653-4b24-9c3f-b7f7474ec298"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "1.879800778609879`", ",", "1.7634537441846703`", ",", 
   "2.4021849933354242`", ",", "1.627278086413867`", ",", 
   "2.359038856122714`", ",", "0.4475894451194718`", ",", 
   "0.1179308920806562`", ",", "0.7762032432764585`"}], "}"}]], "Output",
 CellLabel->"Out[3]=",
 CellID->448605525,ExpressionUUID->"7b31f997-f210-4226-b42d-21c240938c80"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"UniformlyControlledRotation", "[", 
   RowBox[{"SS", ",", "aa", ",", " ", 
    RowBox[{"T", "[", "2", "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->250707124,ExpressionUUID->"97d02a23-5a20-47a9-98a7-ea8e27d85294"],

Cell[BoxData[
 RowBox[{"UniformlyControlledRotation", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "1"},
        "RowWithSeparators"]],
      $CellContext`S[1, Q3`$]], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "3"},
        "RowWithSeparators"]],
      $CellContext`S[3, Q3`$]]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
    "1.879800778609879`", ",", "1.7634537441846703`", ",", 
     "2.4021849933354242`", ",", "1.627278086413867`", ",", 
     "2.359038856122714`", ",", "0.4475894451194718`", ",", 
     "0.1179308920806562`", ",", "0.7762032432764585`"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0"}], "}"}], ",", 
   InterpretationBox["T",
    $CellContext`T[Q3`$]]}], "]"}]], "Output",
 CellLabel->"Out[4]=",
 CellID->519875328,ExpressionUUID->"2915f4dd-5348-4443-9dc6-6f05fa833e34"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", "op", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1555841960,ExpressionUUID->"7c18c4c8-6418-40e8-a1e3-d1f26a7b7d74"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}, {{
     0, -4}, {2, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      DiskBox[{1, -1}, 0.09, 
       NCache[{Rational[1, 4] Pi, Rational[5, 4] Pi}, {0.7853981633974483, 
        3.9269908169872414`}]], 
      {GrayLevel[0], 
       DiskBox[{1, -1}, 0.09, 
        NCache[{Rational[-3, 4] Pi, Rational[1, 4] Pi}, {-2.356194490192345, 
         0.7853981633974483}]]}}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      DiskBox[{1, -2}, 0.09, 
       NCache[{Rational[1, 4] Pi, Rational[5, 4] Pi}, {0.7853981633974483, 
        3.9269908169872414`}]], 
      {GrayLevel[0], 
       DiskBox[{1, -2}, 0.09, 
        NCache[{Rational[-3, 4] Pi, Rational[1, 4] Pi}, {-2.356194490192345, 
         0.7853981633974483}]]}}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      DiskBox[{1, -3}, 0.09, 
       NCache[{Rational[1, 4] Pi, Rational[5, 4] Pi}, {0.7853981633974483, 
        3.9269908169872414`}]], 
      {GrayLevel[0], 
       DiskBox[{1, -3}, 0.09, 
        NCache[{Rational[-3, 4] Pi, Rational[1, 4] Pi}, {-2.356194490192345, 
         0.7853981633974483}]]}}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->118.8,
   PlotRange->{{0, 2}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`UniformlyControlledRotation[{
     $CellContext`S[1, Q3`$], 
     $CellContext`S[2, Q3`$], 
     $CellContext`S[3, Q3`$]}, {1.879800778609879, 1.7634537441846703`, 
    2.4021849933354242`, 1.627278086413867, 2.359038856122714, 
    0.4475894451194718, 0.1179308920806562, 0.7762032432764585}, {0, 1, 0}, 
    $CellContext`T[Q3`$]]]]], "Output",
 CellLabel->"Out[5]=",
 CellID->638458366,ExpressionUUID->"51574fb8-17a2-48d7-bd18-60ddba5d927b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "**", 
  RowBox[{"Ket", "[", "SS", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->602405762,ExpressionUUID->"d66179ed-bdf7-48cc-a4d3-0f8dbf88bf57"],

Cell[BoxData[
 RowBox[{
  RowBox[{"0.5898684635286242`", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["S", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`S[1, Q3`$]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["S", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`S[2, Q3`$]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["S", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`S[3, Q3`$]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox["T", 
            $CellContext`T[Q3`$]]}, "RowWithSeparators"]]}, 
       "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
      0, $CellContext`S[3, Q3`$] -> 0, $CellContext`T[Q3`$] -> 0|>]]}], "+", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"0.8074993472036867`", "\[VeryThinSpace]", "+", 
     RowBox[{"0.`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["S", 
             TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
            $CellContext`S[1, Q3`$]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["S", 
             TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"]], 
            $CellContext`S[2, Q3`$]]}, "RowWithSeparators"]], 
        SubscriptBox["0", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox[
            SubscriptBox["S", 
             TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"]], 
            $CellContext`S[3, Q3`$]]}, "RowWithSeparators"]], 
        SubscriptBox["1", 
         TemplateBox[{",", "\",\"", 
           InterpretationBox["T", 
            $CellContext`T[Q3`$]]}, "RowWithSeparators"]]}, 
       "RowWithSeparators"]},
     "Ket"],
    Ket[<|$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
      0, $CellContext`S[3, Q3`$] -> 0, $CellContext`T[Q3`$] -> 
      1|>]]}]}]], "Output",
 CellLabel->"Out[6]=",
 CellID->1741443396,ExpressionUUID->"600380f0-0001-4b4b-97e0-986165cf6b71"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Elaborate", "[", "op", "]"}], "//", "Chop"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->494556011,ExpressionUUID->"bb779a81-a09b-4381-bca4-239355dc7b08"],

Cell[BoxData[
 RowBox[{"0.6942759676145368`", "\[VeryThinSpace]", "+", 
  RowBox[{"0.09311874911485653`", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]]}], "+", 
  RowBox[{"0.018698830052816903`", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 3]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[3, 3]]]}], "-", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"0.`", "\[VeryThinSpace]", "+", 
     RowBox[{"0.20685573924791914`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"T", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"Y\""}, 
            "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
          SuperscriptBox], 
         $CellContext`T[2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`T[2]]]}], "-", 
  RowBox[{"0.048344747881571934`", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 3]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 3], 
     $CellContext`S[3, 3]]]}], "-", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"0.`", "\[VeryThinSpace]", "+", 
     RowBox[{"0.07863780296823773`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{"T", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"Y\""}, 
            "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
          SuperscriptBox], 
         $CellContext`T[2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 3], 
     $CellContext`T[2]]]}], "-", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"0.`", "\[VeryThinSpace]", "+", 
     RowBox[{"0.07803689693556275`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 3]], 
        InterpretationBox[
         TemplateBox[{"T", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"Y\""}, 
            "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
          SuperscriptBox], 
         $CellContext`T[2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[3, 3], 
     $CellContext`T[2]]]}], "+", 
  RowBox[{"0.1182367749753757`", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 3]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3], 
     $CellContext`S[3, 3]]]}], "+", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"0.`", "\[VeryThinSpace]", "+", 
     RowBox[{"0.09860993724849336`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{"T", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"Y\""}, 
            "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
          SuperscriptBox], 
         $CellContext`T[2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3], 
     $CellContext`T[2]]]}], "+", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"0.`", "\[VeryThinSpace]", "+", 
     RowBox[{"0.017710832898799423`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 3]], 
        InterpretationBox[
         TemplateBox[{"T", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"Y\""}, 
            "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
          SuperscriptBox], 
         $CellContext`T[2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[3, 3], 
     $CellContext`T[2]]]}], "-", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"0.`", "\[VeryThinSpace]", "+", 
     RowBox[{"0.10650132315812019`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 3]], 
        InterpretationBox[
         TemplateBox[{"T", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"Y\""}, 
            "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
          SuperscriptBox], 
         $CellContext`T[2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 3], 
     $CellContext`S[3, 3], 
     $CellContext`T[2]]]}], "+", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"0.`", "\[VeryThinSpace]", "+", 
     RowBox[{"0.14899671743135756`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 3]], 
        InterpretationBox[
         TemplateBox[{"T", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"Y\""}, 
            "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
          SuperscriptBox], 
         $CellContext`T[2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3], 
     $CellContext`S[3, 3], 
     $CellContext`T[2]]]}], "-", 
  RowBox[{"0.12580468241196985`", " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "-", 
  RowBox[{"0.04874618886324393`", " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]]}], "-", 
  RowBox[{"0.111566239072176`", " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[3, 3]]}], "-", 
  RowBox[{
   RowBox[{"(", 
    RowBox[{"0.`", "\[VeryThinSpace]", "+", 
     RowBox[{"0.6027850724724972`", " ", "\[ImaginaryI]"}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{"T", 
      TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"Y\""}, 
       "RowWithSeparators"]},
     "Superscript"],
    $CellContext`T[2]]}]}]], "Output",
 CellLabel->"Out[7]=",
 CellID->422165691,ExpressionUUID->"6128cb06-0004-43ec-adc0-0780fa0f2987"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{" ", 
  RowBox[{
   RowBox[{
    RowBox[{"Matrix", "[", "op", "]"}], "//", "Chop"}], "//", 
   "MatrixForm"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->707741982,ExpressionUUID->"632018de-1827-4759-bda2-7a75df532218"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0.5898684635286242`", 
      RowBox[{"-", "0.8074993472036867`"}], "0", "0", "0", "0", "0", "0", "0",
       "0", "0", "0", "0", "0", "0", "0"},
     {"0.8074993472036867`", "0.5898684635286242`", "0", "0", "0", "0", "0", 
      "0", "0", "0", "0", "0", "0", "0", "0", "0"},
     {"0", "0", "0.6358192273797348`", 
      RowBox[{"-", "0.7718380076766348`"}], "0", "0", "0", "0", "0", "0", "0",
       "0", "0", "0", "0", "0"},
     {"0", "0", "0.7718380076766348`", "0.6358192273797348`", "0", "0", "0", 
      "0", "0", "0", "0", "0", "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0.36133928883779143`", 
      RowBox[{"-", "0.9324344043106727`"}], "0", "0", "0", "0", "0", "0", "0",
       "0", "0", "0"},
     {"0", "0", "0", "0", "0.9324344043106727`", "0.36133928883779143`", "0", 
      "0", "0", "0", "0", "0", "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0.6868581610641172`", 
      RowBox[{"-", "0.7267914876906713`"}], "0", "0", "0", "0", "0", "0", "0",
       "0"},
     {"0", "0", "0", "0", "0", "0", "0.7267914876906713`", 
      "0.6868581610641172`", "0", "0", "0", "0", "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0.3813691200664656`", 
      RowBox[{"-", "0.9244228438651491`"}], "0", "0", "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0.9244228438651491`", 
      "0.3813691200664656`", "0", "0", "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0.9750623040303467`", 
      RowBox[{"-", "0.22193130301746922`"}], "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0.22193130301746922`", "0.9750623040303467`", "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0.9982620417365617`", 
      RowBox[{"-", "0.058931282252731386`"}], "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0.058931282252731386`", "0.9982620417365617`", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0.9256291342726524`", 
      RowBox[{"-", "0.37843190376296254`"}]},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0.37843190376296254`", "0.9256291342726524`"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {16, 16}, 0, {
     1, {{0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32}, {{
       1}, {2}, {2}, {1}, {3}, {4}, {4}, {3}, {5}, {6}, {6}, {5}, {7}, {8}, {
       8}, {7}, {9}, {10}, {10}, {9}, {11}, {12}, {12}, {11}, {13}, {14}, {
       14}, {13}, {15}, {16}, {16}, {15}}}, {
      0.5898684635286242, -0.8074993472036867, 0.5898684635286242, 
      0.8074993472036867, 0.6358192273797348, -0.7718380076766348, 
      0.6358192273797348, 0.7718380076766348, 
      0.36133928883779143`, -0.9324344043106727, 0.36133928883779143`, 
      0.9324344043106727, 0.6868581610641172, -0.7267914876906713, 
      0.6868581610641172, 0.7267914876906713, 
      0.3813691200664656, -0.9244228438651491, 0.3813691200664656, 
      0.9244228438651491, 0.9750623040303467, -0.22193130301746922`, 
      0.9750623040303467, 0.22193130301746922`, 
      0.9982620417365617, -0.058931282252731386`, 0.9982620417365617, 
      0.058931282252731386`, 0.9256291342726524, -0.37843190376296254`, 
      0.9256291342726524, 0.37843190376296254`}}]]]]], "Output",
 CellLabel->"Out[8]//MatrixForm=",
 CellID->1984853574,ExpressionUUID->"5a45c24a-11e4-40f9-b2b2-78b9ebc4c28e"]
}, Open  ]],

Cell["\<\
The uniformly controlled unitary gate may be expanded as a product of \
multi-control unitary gates.\
\>", "ExampleText",
 CellID->906806088,ExpressionUUID->"135b2504-3956-40a0-9f08-c21f78cf8de0"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"Expand", "[", "op", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[9]:=",
 CellID->757126852,ExpressionUUID->"757bbad6-58f0-4555-b248-edcf2f28cd70"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {9, -1}}, {{0, -2}, {9, -2}}, {{0, -3}, {9, -3}}, {{
     0, -4}, {9, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}, {2, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -2}, 0.09]}, 
     DiskBox[{2, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{1.6, -4.4}, {2.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {2., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{3, -1}, {3, -2}, {3, -3}, {3, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -1}, 0.09]}, 
     DiskBox[{3, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{2.6, -4.4}, {3.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {3., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}, {4, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{4, -1}, 0.09]}, 
     DiskBox[{4, -2}, 0.09], DiskBox[{4, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{3.6, -4.4}, {4.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {4., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{5, -1}, {5, -2}, {5, -3}, {5, -4}}], 
     DiskBox[{5, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{4.6, -4.4}, {5.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {5., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{6, -1}, {6, -2}, {6, -3}, {6, -4}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{6, -2}, 0.09]}, 
     DiskBox[{6, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{5.6, -4.4}, {6.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {6., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{7, -1}, {7, -2}, {7, -3}, {7, -4}}], 
     DiskBox[{7, -1}, 0.09], DiskBox[{7, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{7, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{6.6, -4.4}, {7.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {7., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{8, -1}, {8, -2}, {8, -3}, {8, -4}}], 
     DiskBox[{8, -1}, 0.09], DiskBox[{8, -2}, 0.09], DiskBox[{8, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{7.6, -4.4}, {8.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {8., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->370.8,
   PlotRange->{{0, 9}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[1.879800778609879, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[1.7634537441846703`, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[2.4021849933354242`, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[1.627278086413867, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[2.359038856122714, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[0.4475894451194718, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[0.1179308920806562, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[0.7762032432764585, {0, 1, 0}, 
     $CellContext`T[Q3`$]]]]]], "Output",
 CellLabel->"Out[9]=",
 CellID->1997490796,ExpressionUUID->"088e5811-4a4a-4099-a26c-88b728bf0dda"]
}, Open  ]],

Cell[TextData[{
 "Of course, you can expand it inside ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["QuantumCircuit"]], "paclet:Q3/ref/QuantumCircuit", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "956e6c2c-12af-4c24-9bbf-f7d536921bf2"],
 " as well."
}], "ExampleText",
 CellID->1187733402,ExpressionUUID->"774f5a02-1d29-4cfe-90dd-03fc699e855b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "@", "op"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[10]:=",
 CellID->486908243,ExpressionUUID->"28273c5d-fcfa-4e26-8db9-2ddbe0f4ce4b"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {9, -1}}, {{0, -2}, {9, -2}}, {{0, -3}, {9, -3}}, {{
     0, -4}, {9, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}, {2, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -2}, 0.09]}, 
     DiskBox[{2, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{1.6, -4.4}, {2.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {2., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{3, -1}, {3, -2}, {3, -3}, {3, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -1}, 0.09]}, 
     DiskBox[{3, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{2.6, -4.4}, {3.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {3., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}, {4, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{4, -1}, 0.09]}, 
     DiskBox[{4, -2}, 0.09], DiskBox[{4, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{3.6, -4.4}, {4.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {4., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{5, -1}, {5, -2}, {5, -3}, {5, -4}}], 
     DiskBox[{5, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{4.6, -4.4}, {5.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {5., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{6, -1}, {6, -2}, {6, -3}, {6, -4}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{6, -2}, 0.09]}, 
     DiskBox[{6, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{5.6, -4.4}, {6.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {6., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{7, -1}, {7, -2}, {7, -3}, {7, -4}}], 
     DiskBox[{7, -1}, 0.09], DiskBox[{7, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{7, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{6.6, -4.4}, {7.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {7., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{8, -1}, {8, -2}, {8, -3}, {8, -4}}], 
     DiskBox[{8, -1}, 0.09], DiskBox[{8, -2}, 0.09], DiskBox[{8, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{7.6, -4.4}, {8.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {8., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->370.8,
   PlotRange->{{0, 9}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[1.879800778609879, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[1.7634537441846703`, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[2.4021849933354242`, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[1.627278086413867, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[2.359038856122714, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[0.4475894451194718, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[0.1179308920806562, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[0.7762032432764585, {0, 1, 0}, 
     $CellContext`T[Q3`$]]]]]], "Output",
 CellLabel->"Out[10]=",
 CellID->890160962,ExpressionUUID->"bbdd41fb-7f90-44c8-8f67-d945b5579b19"]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"907404c4-3e3e-4a83-9477-1b5e5306c991"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"8bb48e25-8e8a-471f-ba27-11c71b906a1c"],
 "Scope",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "2333d8f0-2af5-4b63-b460-f27f76d9f921"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->221896986,ExpressionUUID->"eed9fbe2-0173-40fa-a861-5e3cef642e82"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "ExampleSubsection", "0"}, Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"63657a4e-1bad-4070-aec6-790fde2a0d69"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"c60bcb5d-9f69-4d66-948f-bdd5b2ef5389"],
 "Dagger",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(1)", "ExampleCount",ExpressionUUID->
  "707a4d8d-01b8-4f59-a6a0-8070591fdf67"]
}], "ExampleSubsection", "ExampleSubsection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->648435845,ExpressionUUID->"639c0fa7-b3e9-4216-8a32-5b108aed9aa1"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S", ",", "T"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1561406280,ExpressionUUID->"3a220eec-ee76-41f3-a646-565b33ae9edb"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"$n", "=", "3"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$N", "=", 
   RowBox[{"Power", "[", 
    RowBox[{"2", ",", "$n"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"kk", "=", 
   RowBox[{"Range", "[", "$n", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"SS", "=", 
  RowBox[{"S", "[", 
   RowBox[{"kk", ",", "$"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->305181620,ExpressionUUID->"c54cc7c7-0c5c-48c3-90a3-7054a141a5ca"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "1"},
      "RowWithSeparators"]],
    $CellContext`S[1, Q3`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "2"},
      "RowWithSeparators"]],
    $CellContext`S[2, Q3`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "3"},
      "RowWithSeparators"]],
    $CellContext`S[3, Q3`$]]}], "}"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1181095032,ExpressionUUID->"98953010-a87e-409f-b9d7-bee6961e1923"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"aa", "=", 
  RowBox[{
   RowBox[{"RandomReal", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "1"}], "}"}], ",", "$N"}], "]"}], "*", 
   "Pi"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->121249603,ExpressionUUID->"216bb6d5-5688-435f-8ea1-4ac04fffbd31"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "0.581104438591639`", ",", "2.901803231004746`", ",", "1.1285332816104277`",
    ",", "0.6578581243308743`", ",", "0.8483336748157867`", ",", 
   "2.0451114383795055`", ",", "0.3202157938225379`", ",", 
   "2.4347903361223997`"}], "}"}]], "Output",
 CellLabel->"Out[3]=",
 CellID->686931921,ExpressionUUID->"811e7601-834e-4a1d-aab5-d3c7ce316d44"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"op", "=", 
   RowBox[{"UniformlyControlledRotation", "[", 
    RowBox[{"SS", ",", "aa", ",", 
     RowBox[{"T", "[", "3", "]"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "@", "op"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1716533849,ExpressionUUID->"e4f41a2c-2b63-4621-bc73-d8c26df1cddd"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {9, -1}}, {{0, -2}, {9, -2}}, {{0, -3}, {9, -3}}, {{
     0, -4}, {9, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"z\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}, {2, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -2}, 0.09]}, 
     DiskBox[{2, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{1.6, -4.4}, {2.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"z\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {2., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{3, -1}, {3, -2}, {3, -3}, {3, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -1}, 0.09]}, 
     DiskBox[{3, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{2.6, -4.4}, {3.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"z\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {3., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}, {4, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{4, -1}, 0.09]}, 
     DiskBox[{4, -2}, 0.09], DiskBox[{4, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{3.6, -4.4}, {4.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"z\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {4., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{5, -1}, {5, -2}, {5, -3}, {5, -4}}], 
     DiskBox[{5, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{4.6, -4.4}, {5.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"z\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {5., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{6, -1}, {6, -2}, {6, -3}, {6, -4}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{6, -2}, 0.09]}, 
     DiskBox[{6, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{5.6, -4.4}, {6.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"z\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {6., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{7, -1}, {7, -2}, {7, -3}, {7, -4}}], 
     DiskBox[{7, -1}, 0.09], DiskBox[{7, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{7, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{6.6, -4.4}, {7.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"z\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {7., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{8, -1}, {8, -2}, {8, -3}, {8, -4}}], 
     DiskBox[{8, -1}, 0.09], DiskBox[{8, -2}, 0.09], DiskBox[{8, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{7.6, -4.4}, {8.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"z\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {8., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->370.8,
   PlotRange->{{0, 9}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[0.581104438591639, {0, 0, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[2.901803231004746, {0, 0, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[1.1285332816104277`, {0, 0, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[0.6578581243308743, {0, 0, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[0.8483336748157867, {0, 0, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[2.0451114383795055`, {0, 0, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[0.3202157938225379, {0, 0, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[2.4347903361223997`, {0, 0, 1}, 
     $CellContext`T[Q3`$]]]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->1485820981,ExpressionUUID->"5896af69-c0b7-494c-946d-4fc571de7339"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"op", "=", 
   RowBox[{"UniformlyControlledRotation", "[", 
    RowBox[{"SS", ",", "aa", ",", 
     RowBox[{"T", "[", "3", "]"}], ",", 
     RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "@", "op"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->263366503,ExpressionUUID->"e42f86b3-cd0e-4314-8adf-fc7d2aba4cc9"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {9, -1}}, {{0, -2}, {9, -2}}, {{0, -3}, {9, -3}}, {{
     0, -4}, {9, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}, {2, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -2}, 0.09]}, 
     DiskBox[{2, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{1.6, -4.4}, {2.4, -3.6}]}, InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {2., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{3, -1}, {3, -2}, {3, -3}, {3, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -1}, 0.09]}, 
     DiskBox[{3, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{2.6, -4.4}, {3.4, -3.6}]}, InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {3., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}, {4, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{4, -1}, 0.09]}, 
     DiskBox[{4, -2}, 0.09], DiskBox[{4, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{3.6, -4.4}, {4.4, -3.6}]}, InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {4., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{5, -1}, {5, -2}, {5, -3}, {5, -4}}], 
     DiskBox[{5, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{4.6, -4.4}, {5.4, -3.6}]}, InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {5., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{6, -1}, {6, -2}, {6, -3}, {6, -4}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{6, -2}, 0.09]}, 
     DiskBox[{6, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{5.6, -4.4}, {6.4, -3.6}]}, InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {6., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{7, -1}, {7, -2}, {7, -3}, {7, -4}}], 
     DiskBox[{7, -1}, 0.09], DiskBox[{7, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{7, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{6.6, -4.4}, {7.4, -3.6}]}, InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {7., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{8, -1}, {8, -2}, {8, -3}, {8, -4}}], 
     DiskBox[{8, -1}, 0.09], DiskBox[{8, -2}, 0.09], DiskBox[{8, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{7.6, -4.4}, {8.4, -3.6}]}, InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {8., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->370.8,
   PlotRange->{{0, 9}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[0.581104438591639, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> "U"], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[2.901803231004746, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> "U"], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[1.1285332816104277`, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> "U"], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[0.6578581243308743, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> "U"], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[0.8483336748157867, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> "U"], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[2.0451114383795055`, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> "U"], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[0.3202157938225379, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> "U"], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[2.4347903361223997`, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[5]=",
 CellID->1855623583,ExpressionUUID->"624d7f79-b097-4e51-9e18-4b7ab4ca87a1"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "@", 
    RowBox[{"Dagger", "@", "op"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->627928911,ExpressionUUID->"d0ac0b09-5072-41ae-88a5-3eb6e84507d3"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {9, -1}}, {{0, -2}, {9, -2}}, {{0, -3}, {9, -3}}, {{
     0, -4}, {9, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       TemplateBox[{"\"U\"", "\"\[Dagger]\""},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}, {2, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -2}, 0.09]}, 
     DiskBox[{2, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{1.6, -4.4}, {2.4, -3.6}]}, InsetBox[
      StyleBox[
       TemplateBox[{"\"U\"", "\"\[Dagger]\""},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {2., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{3, -1}, {3, -2}, {3, -3}, {3, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -1}, 0.09]}, 
     DiskBox[{3, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{2.6, -4.4}, {3.4, -3.6}]}, InsetBox[
      StyleBox[
       TemplateBox[{"\"U\"", "\"\[Dagger]\""},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {3., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}, {4, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{4, -1}, 0.09]}, 
     DiskBox[{4, -2}, 0.09], DiskBox[{4, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{3.6, -4.4}, {4.4, -3.6}]}, InsetBox[
      StyleBox[
       TemplateBox[{"\"U\"", "\"\[Dagger]\""},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {4., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{5, -1}, {5, -2}, {5, -3}, {5, -4}}], 
     DiskBox[{5, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{4.6, -4.4}, {5.4, -3.6}]}, InsetBox[
      StyleBox[
       TemplateBox[{"\"U\"", "\"\[Dagger]\""},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {5., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{6, -1}, {6, -2}, {6, -3}, {6, -4}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{6, -2}, 0.09]}, 
     DiskBox[{6, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{5.6, -4.4}, {6.4, -3.6}]}, InsetBox[
      StyleBox[
       TemplateBox[{"\"U\"", "\"\[Dagger]\""},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {6., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{7, -1}, {7, -2}, {7, -3}, {7, -4}}], 
     DiskBox[{7, -1}, 0.09], DiskBox[{7, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{7, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{6.6, -4.4}, {7.4, -3.6}]}, InsetBox[
      StyleBox[
       TemplateBox[{"\"U\"", "\"\[Dagger]\""},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {7., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{8, -1}, {8, -2}, {8, -3}, {8, -4}}], 
     DiskBox[{8, -1}, 0.09], DiskBox[{8, -2}, 0.09], DiskBox[{8, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{7.6, -4.4}, {8.4, -3.6}]}, InsetBox[
      StyleBox[
       TemplateBox[{"\"U\"", "\"\[Dagger]\""},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {8., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->370.8,
   PlotRange->{{0, 9}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[-0.581104438591639, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> Superscript["U", "\[Dagger]"]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[-2.901803231004746, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> Superscript["U", "\[Dagger]"]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[-1.1285332816104277`, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> Superscript["U", "\[Dagger]"]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[-0.6578581243308743, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> Superscript["U", "\[Dagger]"]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[-0.8483336748157867, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> Superscript["U", "\[Dagger]"]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[-2.0451114383795055`, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> Superscript["U", "\[Dagger]"]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[-0.3202157938225379, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> Superscript["U", "\[Dagger]"]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[-2.4347903361223997`, {0, 0, 1}, 
     $CellContext`T[Q3`$]], "Label" -> 
    Superscript["U", "\[Dagger]"]]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->2129833687,ExpressionUUID->"5b903e48-6f53-462c-91b8-f34123b6ae3d"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Matrix", "[", "qc", "]"}], ".", 
    RowBox[{"Matrix", "[", "new", "]"}]}], "//", "Chop"}], "//", 
  "MatrixForm"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->1417394473,ExpressionUUID->"51c98929-6d82-4029-9c08-ba422a2b7610"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1.`", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "1.`", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "1.`", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "1.`", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "1.`", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "1.`", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0.9999999999999999`", "0", "0", "0", "0",
       "0", "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0.9999999999999999`", "0", "0", "0",
       "0", "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0.9999999999999999`", "0", "0",
       "0", "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0.9999999999999999`", "0",
       "0", "0", "0", "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "1.`", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "1.`", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "1.`", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "1.`", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "1.`", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "1.`"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {16, 16}, 0, {
     1, {{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16}, {{1}, {
       2}, {3}, {4}, {5}, {6}, {7}, {8}, {9}, {10}, {11}, {12}, {13}, {14}, {
       15}, {16}}}, {1., 1., 1., 1., 1., 1., 0.9999999999999999, 
      0.9999999999999999, 0.9999999999999999, 0.9999999999999999, 1., 1., 1., 
      1., 1., 1.}}]]]]], "Output",
 CellLabel->"Out[7]//MatrixForm=",
 CellID->1224848887,ExpressionUUID->"89bf9b40-fdcc-457b-bace-512ef7912663"]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "0"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "ExampleSubsection", "1"}, Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"1eae7076-bba1-4198-81a4-d8b141646fcb"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"1767d0e9-6304-4d65-91ad-e897057bff04"],
 "Simplification",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(1)", "ExampleCount",ExpressionUUID->
  "b7348673-eed2-4b4a-b032-8e5e2b61807a"]
}], "ExampleSubsection", "ExampleSubsection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1929222037,ExpressionUUID->"2e890b3f-c3bb-49d6-8b01-4c26f19d3801"],

Cell[TextData[{
 "As long as the rotation axis is ",
 StyleBox["not",
  FontSlant->"Italic"],
 " parallel to the x-axis, uniformly controlled rotation may be reduced to a \
simpler and more efficient gate sequence."
}], "ExampleText",
 CellID->943224651,ExpressionUUID->"6760deb9-d6d0-4722-b9c7-d0d4f0c22916"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S", ",", "T"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->103290834,ExpressionUUID->"513f8654-0de3-4e23-b114-728de5faaac3"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"$n", "=", "3"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$N", "=", 
   RowBox[{"Power", "[", 
    RowBox[{"2", ",", "$n"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"kk", "=", 
   RowBox[{"Range", "[", "$n", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"SS", "=", 
  RowBox[{"S", "[", 
   RowBox[{"kk", ",", "$"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->261036225,ExpressionUUID->"482b6dd8-38bb-4510-be1a-85decf3b81cd"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "1"},
      "RowWithSeparators"]],
    $CellContext`S[1, Q3`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "2"},
      "RowWithSeparators"]],
    $CellContext`S[2, Q3`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "3"},
      "RowWithSeparators"]],
    $CellContext`S[3, Q3`$]]}], "}"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->466029800,ExpressionUUID->"dde6d113-1ed4-40c7-b4da-cfad129f4733"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"aa", "=", 
  RowBox[{
   RowBox[{"RandomReal", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", "2"}], "}"}], ",", "$N"}], "]"}], "*", 
   "Pi"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1126297971,ExpressionUUID->"5c8973b8-6aac-4e69-8965-0ad38140cb5d"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "4.432742845293103`", ",", "0.012073856335005177`", ",", 
   "2.817525257980638`", ",", "2.747545589976666`", ",", 
   "2.4744289646109827`", ",", "4.943719086845756`", ",", 
   "5.239494706806739`", ",", "4.747740734987593`"}], "}"}]], "Output",
 CellLabel->"Out[3]=",
 CellID->209907377,ExpressionUUID->"bd7a3d23-c290-48f7-9710-24de92f3c210"]
}, Open  ]],

Cell["Note that the rotation axis is not parallel to the x-axis.", \
"ExampleText",
 CellID->1357819613,ExpressionUUID->"cd662b7e-413b-45c4-801c-9661f5c0bc63"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"op", "=", 
   RowBox[{"UniformlyControlledRotation", "[", 
    RowBox[{"SS", ",", "aa", ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "1", ",", "1"}], "}"}], ",", "T"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "@", "op"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1265229398,ExpressionUUID->"30cf5667-babf-49ec-9077-f56edea9b4c5"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {9, -1}}, {{0, -2}, {9, -2}}, {{0, -3}, {9, -3}}, {{
     0, -4}, {9, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}, {2, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -2}, 0.09]}, 
     DiskBox[{2, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{1.6, -4.4}, {2.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {2., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{3, -1}, {3, -2}, {3, -3}, {3, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -1}, 0.09]}, 
     DiskBox[{3, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{2.6, -4.4}, {3.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {3., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}, {4, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{4, -1}, 0.09]}, 
     DiskBox[{4, -2}, 0.09], DiskBox[{4, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{3.6, -4.4}, {4.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {4., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{5, -1}, {5, -2}, {5, -3}, {5, -4}}], 
     DiskBox[{5, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{4.6, -4.4}, {5.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {5., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{6, -1}, {6, -2}, {6, -3}, {6, -4}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{6, -2}, 0.09]}, 
     DiskBox[{6, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{5.6, -4.4}, {6.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {6., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{7, -1}, {7, -2}, {7, -3}, {7, -4}}], 
     DiskBox[{7, -1}, 0.09], DiskBox[{7, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{7, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{6.6, -4.4}, {7.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {7., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{8, -1}, {8, -2}, {8, -3}, {8, -4}}], 
     DiskBox[{8, -1}, 0.09], DiskBox[{8, -2}, 0.09], DiskBox[{8, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{7.6, -4.4}, {8.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {8., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->370.8,
   PlotRange->{{0, 9}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[4.432742845293103, {0, 1, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[0.012073856335005177`, {0, 1, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[2.817525257980638, {0, 1, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[2.747545589976666, {0, 1, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[2.4744289646109827`, {0, 1, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[4.943719086845756, {0, 1, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[5.239494706806739, {0, 1, 1}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[4.747740734987593, {0, 1, 1}, 
     $CellContext`T[Q3`$]]]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->1620686049,ExpressionUUID->"0b08a042-c520-4b3b-af10-a3ec162c67de"]
}, Open  ]],

Cell["\<\
Therefore, the uniformly controlled rotation may be further simplified.\
\>", "ExampleText",
 CellID->1306719150,ExpressionUUID->"b43a695b-6e01-488e-bcfa-9090e246ddcf"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"ExpandAll", "[", "op", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1012640172,ExpressionUUID->"eea2f0ec-8eb6-446f-b16c-779a85988fe7"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {17, -1}}, {{0, -2}, {17, -2}}, {{0, -3}, {17, -3}}, {{
     0, -4}, {17, -4}}}], {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{2, -3}, {2, -4}}], 
     DiskBox[{2, -3}, 0.09], {CircleBox[{2, -4}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -4}, {2.2666666666666666`, -4}}, {{
         2, -4.266666666666667}, {2, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{2.6, -4.4}, {3.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {3., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{4, -2}, {4, -4}}], 
     DiskBox[{4, -2}, 0.09], {CircleBox[{4, -4}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -4}, {4.266666666666667, -4}}, {{
         4, -4.266666666666667}, {4, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{4.6, -4.4}, {5.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {5., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{6, -3}, {6, -4}}], 
     DiskBox[{6, -3}, 0.09], {CircleBox[{6, -4}, 0.26666666666666666], 
      LineBox[{{{5.733333333333333, -4}, {6.266666666666667, -4}}, {{
         6, -4.266666666666667}, {6, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{6.6, -4.4}, {7.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {7., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{8, -1}, {8, -4}}], 
     DiskBox[{8, -1}, 0.09], {CircleBox[{8, -4}, 0.26666666666666666], 
      LineBox[{{{7.733333333333333, -4}, {8.266666666666667, -4}}, {{
         8, -4.266666666666667}, {8, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{8.6, -4.4}, {9.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {9., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{10, -3}, {10, -4}}], 
     DiskBox[{10, -3}, 0.09], {CircleBox[{10, -4}, 0.26666666666666666], 
      LineBox[{{{9.733333333333333, -4}, {10.266666666666667`, -4}}, {{
         10, -4.266666666666667}, {10, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{10.6, -4.4}, {11.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {11., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{12, -2}, {12, -4}}], 
     DiskBox[{12, -2}, 0.09], {CircleBox[{12, -4}, 0.26666666666666666], 
      LineBox[{{{11.733333333333333`, -4}, {12.266666666666667`, -4}}, {{
         12, -4.266666666666667}, {12, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{12.6, -4.4}, {13.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {13., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{14, -3}, {14, -4}}], 
     DiskBox[{14, -3}, 0.09], {CircleBox[{14, -4}, 0.26666666666666666], 
      LineBox[{{{13.733333333333333`, -4}, {14.266666666666667`, -4}}, {{
         14, -4.266666666666667}, {14, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{14.6, -4.4}, {15.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {15., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{16, -1}, {16, -4}}], 
     DiskBox[{16, -1}, 0.09], {CircleBox[{16, -4}, 0.26666666666666666], 
      LineBox[{{{15.733333333333333`, -4}, {16.266666666666666`, -4}}, {{
         16, -4.266666666666667}, {16, -3.7333333333333334`}}}]}}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->658.8000000000001,
   PlotRange->{{0, 17}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[3.42690888035456, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0.31413906331830543`, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[2, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0.17370565336252575`, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[-0.4611676920833485, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0.18110415550104964`, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0.9139666768760055, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[2, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0.8085231009222122, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[-0.9244369929582072, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}]]]], "Output",
 CellLabel->"Out[5]=",
 CellID->2136769447,ExpressionUUID->"8e35dc6b-4ba8-42f4-9c2b-2de693c68ed7"]
}, Open  ]],

Cell["This is equivalent to the above.", "ExampleText",
 CellID->1280867960,ExpressionUUID->"49adf1cd-67e6-4bb2-9dba-7ffc9b3e7c25"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ExpandAll", "@", "op"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->2023783963,ExpressionUUID->"b0c36bce-611d-42af-b2ca-7a8e29982935"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {17, -1}}, {{0, -2}, {17, -2}}, {{0, -3}, {17, -3}}, {{
     0, -4}, {17, -4}}}], {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{2, -3}, {2, -4}}], 
     DiskBox[{2, -3}, 0.09], {CircleBox[{2, -4}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -4}, {2.2666666666666666`, -4}}, {{
         2, -4.266666666666667}, {2, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{2.6, -4.4}, {3.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {3., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{4, -2}, {4, -4}}], 
     DiskBox[{4, -2}, 0.09], {CircleBox[{4, -4}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -4}, {4.266666666666667, -4}}, {{
         4, -4.266666666666667}, {4, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{4.6, -4.4}, {5.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {5., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{6, -3}, {6, -4}}], 
     DiskBox[{6, -3}, 0.09], {CircleBox[{6, -4}, 0.26666666666666666], 
      LineBox[{{{5.733333333333333, -4}, {6.266666666666667, -4}}, {{
         6, -4.266666666666667}, {6, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{6.6, -4.4}, {7.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {7., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{8, -1}, {8, -4}}], 
     DiskBox[{8, -1}, 0.09], {CircleBox[{8, -4}, 0.26666666666666666], 
      LineBox[{{{7.733333333333333, -4}, {8.266666666666667, -4}}, {{
         8, -4.266666666666667}, {8, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{8.6, -4.4}, {9.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {9., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{10, -3}, {10, -4}}], 
     DiskBox[{10, -3}, 0.09], {CircleBox[{10, -4}, 0.26666666666666666], 
      LineBox[{{{9.733333333333333, -4}, {10.266666666666667`, -4}}, {{
         10, -4.266666666666667}, {10, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{10.6, -4.4}, {11.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {11., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{12, -2}, {12, -4}}], 
     DiskBox[{12, -2}, 0.09], {CircleBox[{12, -4}, 0.26666666666666666], 
      LineBox[{{{11.733333333333333`, -4}, {12.266666666666667`, -4}}, {{
         12, -4.266666666666667}, {12, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{12.6, -4.4}, {13.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {13., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{14, -3}, {14, -4}}], 
     DiskBox[{14, -3}, 0.09], {CircleBox[{14, -4}, 0.26666666666666666], 
      LineBox[{{{13.733333333333333`, -4}, {14.266666666666667`, -4}}, {{
         14, -4.266666666666667}, {14, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{14.6, -4.4}, {15.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", 
        StyleBox["\<\"n\"\>",
         StripOnInput->False,
         FontWeight->Bold]],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {15., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{16, -1}, {16, -4}}], 
     DiskBox[{16, -1}, 0.09], {CircleBox[{16, -4}, 0.26666666666666666], 
      LineBox[{{{15.733333333333333`, -4}, {16.266666666666666`, -4}}, {{
         16, -4.266666666666667}, {16, -3.7333333333333334`}}}]}}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->658.8000000000001,
   PlotRange->{{0, 17}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[3.42690888035456, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0.31413906331830543`, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[2, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0.17370565336252575`, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[-0.4611676920833485, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0.18110415550104964`, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0.9139666768760055, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[2, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0.8085231009222122, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[-0.9244369929582072, {0, 1, 1}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->228469757,ExpressionUUID->"f87493a3-562c-4261-a7a4-b7f75b6d11c8"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Matrix", "[", "new", "]"}], "-", 
    RowBox[{"Matrix", "[", "qc", "]"}]}], "//", "Chop"}], "//", 
  "MatrixForm"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->488723745,ExpressionUUID->"923c9268-fab3-4586-8685-9db4c9edc5bb"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {16, 16}, 0, {
     1, {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
       0}, {}}, {}}]]]]], "Output",
 CellLabel->"Out[7]//MatrixForm=",
 CellID->577929963,ExpressionUUID->"1c2e07b0-64d7-41d3-bfd8-eead01249ad5"]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "1"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "ExampleSubsection", "2"}, Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"7469d43b-2c18-4759-9123-c8dada9280f8"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"b242f418-564d-43a1-a1df-d127ba4cd0db"],
 "ControlledPower",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(1)", "ExampleCount",ExpressionUUID->
  "1e67ae91-6620-4168-b96a-60906686b0ca"]
}], "ExampleSubsection", "ExampleSubsection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1313350173,ExpressionUUID->"9f3b353d-3ef2-4c01-9a02-10f439c7812b"],

Cell["\<\
Controlled power of a single-qubit rotation is a special case of uniformly \
controlled rotation.\
\>", "ExampleText",
 CellID->603809129,ExpressionUUID->"32c7e7e3-8d92-4c66-80cf-bbbbb8dd054c"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S", ",", "T"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->2106864546,ExpressionUUID->"ef16aade-83e9-4c4f-9cf8-7f338c1cec88"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"$n", "=", "3"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$N", "=", 
   RowBox[{"Power", "[", 
    RowBox[{"2", ",", "$n"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"kk", "=", 
   RowBox[{"Range", "[", "$n", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"xx", "=", 
  RowBox[{
   RowBox[{"Range", "[", "$N", "]"}], "-", "1"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->596381436,ExpressionUUID->"90818056-8632-4632-8e4c-c7cd9c695fa9"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "0", ",", "1", ",", "2", ",", "3", ",", "4", ",", "5", ",", "6", ",", "7"}],
   "}"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1484311187,ExpressionUUID->"f837e8f6-9bfc-4dca-8e2b-1c0a6496f2b6"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"SS", "=", 
  RowBox[{"S", "[", 
   RowBox[{"kk", ",", "$"}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"ST", "=", 
  RowBox[{"Append", "[", 
   RowBox[{"SS", ",", "T"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->214569239,ExpressionUUID->"69c95ec5-43d6-4eac-8f1d-379a28014e47"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "1"},
      "RowWithSeparators"]],
    $CellContext`S[1, Q3`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "2"},
      "RowWithSeparators"]],
    $CellContext`S[2, Q3`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "3"},
      "RowWithSeparators"]],
    $CellContext`S[3, Q3`$]]}], "}"}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1198226520,ExpressionUUID->"1843672f-97a8-485b-b48f-0493861e8abc"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "1"},
      "RowWithSeparators"]],
    $CellContext`S[1, Q3`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "2"},
      "RowWithSeparators"]],
    $CellContext`S[2, Q3`$]], ",", 
   InterpretationBox[
    SubscriptBox["S", 
     TemplateBox[{",", "\",\"", "3"},
      "RowWithSeparators"]],
    $CellContext`S[3, Q3`$]], ",", "T"}], "}"}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1638963721,ExpressionUUID->"c4a876d5-3c0d-4d69-a088-350043f245ba"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"cop", "=", 
  RowBox[{"ControlledPower", "[", 
   RowBox[{"SS", ",", 
    RowBox[{"Rotation", "[", 
     RowBox[{"\[Phi]", ",", 
      RowBox[{"T", "[", "2", "]"}]}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->2078201721,ExpressionUUID->"d66882f1-4404-4184-9801-6ae41141bd32"],

Cell[BoxData[
 RowBox[{"ControlledPower", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "1"},
        "RowWithSeparators"]],
      $CellContext`S[1, Q3`$]], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "3"},
        "RowWithSeparators"]],
      $CellContext`S[3, Q3`$]]}], "}"}], ",", 
   InterpretationBox[
    TagBox[
     RowBox[{"Exp", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"-", 
         FractionBox["1", "2"]}], " ", "\[ImaginaryI]", " ", "\[Phi]", " ", 
        InterpretationBox[
         TemplateBox[{"T", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"Y\""}, 
            "RowWithSeparators"]},
          "Superscript"],
         $CellContext`T[2]]}], ")"}]}],
     DisplayForm],
    Q3`Rotation[$CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`T[Q3`$]]]}], "]"}]], "Output",
 CellLabel->"Out[4]=",
 CellID->950982202,ExpressionUUID->"c0beb0b5-be95-4dd6-be4e-ef22e98bbbf3"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"QuantumCircuit", "[", "cop", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1868568862,ExpressionUUID->"051b004e-34b0-4ecd-9c10-0d095d3e49c3"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}, {{
     0, -4}, {2, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -3.4}, {1.4, -0.6},
       RoundingRadius->0.4]}, InsetBox[
      StyleBox["\<\"x\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1., -2.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       TemplateBox[{"\"U\"", "\"x\""},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->118.8,
   PlotRange->{{0, 2}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledPower[{
     $CellContext`S[1, Q3`$], 
     $CellContext`S[2, Q3`$], 
     $CellContext`S[3, Q3`$]}, 
    Q3`Rotation[$CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`T[Q3`$]]]]]], "Output",
 CellLabel->"Out[5]=",
 CellID->1262036340,ExpressionUUID->"181eb295-865e-44e9-8368-58eb1301a053"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ucr", "=", 
  RowBox[{"UniformlyControlledRotation", "[", 
   RowBox[{"SS", ",", 
    RowBox[{"xx", "*", "\[Phi]"}], ",", 
    RowBox[{"T", "[", "2", "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->1493921650,ExpressionUUID->"d79b9e09-14db-4d75-b4f7-55bc1ee94c32"],

Cell[BoxData[
 RowBox[{"UniformlyControlledRotation", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "1"},
        "RowWithSeparators"]],
      $CellContext`S[1, Q3`$]], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "3"},
        "RowWithSeparators"]],
      $CellContext`S[3, Q3`$]]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "\[Phi]", ",", 
     RowBox[{"2", " ", "\[Phi]"}], ",", 
     RowBox[{"3", " ", "\[Phi]"}], ",", 
     RowBox[{"4", " ", "\[Phi]"}], ",", 
     RowBox[{"5", " ", "\[Phi]"}], ",", 
     RowBox[{"6", " ", "\[Phi]"}], ",", 
     RowBox[{"7", " ", "\[Phi]"}]}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "1", ",", "0"}], "}"}], ",", 
   InterpretationBox["T",
    $CellContext`T[Q3`$]]}], "]"}]], "Output",
 CellLabel->"Out[6]=",
 CellID->806519942,ExpressionUUID->"6ac39051-9b04-4789-90b5-79706d082d57"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"QuantumCircuit", "[", "ucr", "]"}], "\[IndentingNewLine]", 
 RowBox[{"QuantumCircuit", "[", 
  RowBox[{"Expand", "@", "ucr"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"QuantumCircuit", "[", 
  RowBox[{"ExpandAll", "@", "ucr"}], "]"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->1489404584,ExpressionUUID->"56d3004b-7c3e-4677-bd4d-7daf74ae411a"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}, {{
     0, -4}, {2, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      DiskBox[{1, -1}, 0.09, 
       NCache[{Rational[1, 4] Pi, Rational[5, 4] Pi}, {0.7853981633974483, 
        3.9269908169872414`}]], 
      {GrayLevel[0], 
       DiskBox[{1, -1}, 0.09, 
        NCache[{Rational[-3, 4] Pi, Rational[1, 4] Pi}, {-2.356194490192345, 
         0.7853981633974483}]]}}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      DiskBox[{1, -2}, 0.09, 
       NCache[{Rational[1, 4] Pi, Rational[5, 4] Pi}, {0.7853981633974483, 
        3.9269908169872414`}]], 
      {GrayLevel[0], 
       DiskBox[{1, -2}, 0.09, 
        NCache[{Rational[-3, 4] Pi, Rational[1, 4] Pi}, {-2.356194490192345, 
         0.7853981633974483}]]}}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      DiskBox[{1, -3}, 0.09, 
       NCache[{Rational[1, 4] Pi, Rational[5, 4] Pi}, {0.7853981633974483, 
        3.9269908169872414`}]], 
      {GrayLevel[0], 
       DiskBox[{1, -3}, 0.09, 
        NCache[{Rational[-3, 4] Pi, Rational[1, 4] Pi}, {-2.356194490192345, 
         0.7853981633974483}]]}}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->118.8,
   PlotRange->{{0, 2}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`UniformlyControlledRotation[{
     $CellContext`S[1, Q3`$], 
     $CellContext`S[2, Q3`$], 
     $CellContext`S[3, Q3`$]}, {
    0, $CellContext`\[Phi], 2 $CellContext`\[Phi], 3 $CellContext`\[Phi], 
     4 $CellContext`\[Phi], 5 $CellContext`\[Phi], 6 $CellContext`\[Phi], 
     7 $CellContext`\[Phi]}, {0, 1, 0}, 
    $CellContext`T[Q3`$]]]]], "Output",
 CellLabel->"Out[7]=",
 CellID->877741184,ExpressionUUID->"b97035c6-52cf-4e2c-9d83-769f275fa55f"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {9, -1}}, {{0, -2}, {9, -2}}, {{0, -3}, {9, -3}}, {{
     0, -4}, {9, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{1, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}, {2, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -1}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{2, -2}, 0.09]}, 
     DiskBox[{2, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{1.6, -4.4}, {2.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {2., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{3, -1}, {3, -2}, {3, -3}, {3, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -1}, 0.09]}, 
     DiskBox[{3, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{3, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{2.6, -4.4}, {3.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {3., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}, {4, -4}}], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{4, -1}, 0.09]}, 
     DiskBox[{4, -2}, 0.09], DiskBox[{4, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{3.6, -4.4}, {4.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {4., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{5, -1}, {5, -2}, {5, -3}, {5, -4}}], 
     DiskBox[{5, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{5, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{4.6, -4.4}, {5.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {5., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{6, -1}, {6, -2}, {6, -3}, {6, -4}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{6, -2}, 0.09]}, 
     DiskBox[{6, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{5.6, -4.4}, {6.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {6., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{7, -1}, {7, -2}, {7, -3}, {7, -4}}], 
     DiskBox[{7, -1}, 0.09], DiskBox[{7, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], DiskBox[{7, -3}, 0.09]}, 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{6.6, -4.4}, {7.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {7., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{8, -1}, {8, -2}, {8, -3}, {8, -4}}], 
     DiskBox[{8, -1}, 0.09], DiskBox[{8, -2}, 0.09], DiskBox[{8, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{7.6, -4.4}, {8.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.044444444444444446`],
       FontWeight->"Light",
       FontSlant->Italic], {8., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->370.8,
   PlotRange->{{0, 9}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[0, {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[$CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[2 $CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 0, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[3 $CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[4 $CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[5 $CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 0}, 
    Q3`Rotation[6 $CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`T[Q3`$]]], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    Q3`Rotation[7 $CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`T[Q3`$]]]]]], "Output",
 CellLabel->"Out[7]=",
 CellID->1130908245,ExpressionUUID->"20f53378-5b94-41b8-a079-6ba28a735e58"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {17, -1}}, {{0, -2}, {17, -2}}, {{0, -3}, {17, -3}}, {{
     0, -4}, {17, -4}}}], {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {1., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{2, -3}, {2, -4}}], 
     DiskBox[{2, -3}, 0.09], {CircleBox[{2, -4}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -4}, {2.2666666666666666`, -4}}, {{
         2, -4.266666666666667}, {2, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{2.6, -4.4}, {3.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {3., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{4, -2}, {4, -4}}], 
     DiskBox[{4, -2}, 0.09], {CircleBox[{4, -4}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -4}, {4.266666666666667, -4}}, {{
         4, -4.266666666666667}, {4, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{4.6, -4.4}, {5.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {5., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{6, -3}, {6, -4}}], 
     DiskBox[{6, -3}, 0.09], {CircleBox[{6, -4}, 0.26666666666666666], 
      LineBox[{{{5.733333333333333, -4}, {6.266666666666667, -4}}, {{
         6, -4.266666666666667}, {6, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{6.6, -4.4}, {7.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {7., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{8, -1}, {8, -4}}], 
     DiskBox[{8, -1}, 0.09], {CircleBox[{8, -4}, 0.26666666666666666], 
      LineBox[{{{7.733333333333333, -4}, {8.266666666666667, -4}}, {{
         8, -4.266666666666667}, {8, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{8.6, -4.4}, {9.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {9., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{10, -3}, {10, -4}}], 
     DiskBox[{10, -3}, 0.09], {CircleBox[{10, -4}, 0.26666666666666666], 
      LineBox[{{{9.733333333333333, -4}, {10.266666666666667`, -4}}, {{
         10, -4.266666666666667}, {10, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{10.6, -4.4}, {11.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {11., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{12, -2}, {12, -4}}], 
     DiskBox[{12, -2}, 0.09], {CircleBox[{12, -4}, 0.26666666666666666], 
      LineBox[{{{11.733333333333333`, -4}, {12.266666666666667`, -4}}, {{
         12, -4.266666666666667}, {12, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{12.6, -4.4}, {13.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {13., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{14, -3}, {14, -4}}], 
     DiskBox[{14, -3}, 0.09], {CircleBox[{14, -4}, 0.26666666666666666], 
      LineBox[{{{13.733333333333333`, -4}, {14.266666666666667`, -4}}, {{
         14, -4.266666666666667}, {14, -3.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[Opacity[1]], 
      RectangleBox[{14.6, -4.4}, {15.4, -3.6}]}, InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.023529411764705882`],
       FontWeight->"Light",
       FontSlant->Italic], {15., -4.}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], ImageScaled[{0.5, 0.5}]],
       Automatic, {1, 0}]}, {LineBox[{{16, -1}, {16, -4}}], 
     DiskBox[{16, -1}, 0.09], {CircleBox[{16, -4}, 0.26666666666666666], 
      LineBox[{{{15.733333333333333`, -4}, {16.266666666666666`, -4}}, {{
         16, -4.266666666666667}, {16, -3.7333333333333334`}}}]}}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {7.2, 7.2}},
   ImageSize->658.8000000000001,
   PlotRange->{{0, 17}, {-4.5, -0.5}},
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[Rational[7, 2] $CellContext`\[Phi], {0, 1, 0}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[Rational[-1, 2] $CellContext`\[Phi], {0, 1, 0}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[2, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0, {0, 1, 0}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[-$CellContext`\[Phi], {0, 1, 0}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0, {0, 1, 0}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0, {0, 1, 0}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[2, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[0, {0, 1, 0}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[3, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}], 
   Q3`Rotation[(-2) $CellContext`\[Phi], {0, 1, 0}, 
    $CellContext`T[Q3`$]], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`T[Q3`$]}]]]], "Output",
 CellLabel->"Out[7]=",
 CellID->1944597765,ExpressionUUID->"46fb74c6-34c3-4c96-90db-fdc7b2627cf8"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"qc", "=", 
   RowBox[{"QuantumCircuit", "[", 
    RowBox[{"ExpandAll", "@", "ucr"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Cases", "[", 
  RowBox[{"qc", ",", 
   RowBox[{
    RowBox[{"Rotation", "[", 
     RowBox[{"ang_", ",", "___"}], "]"}], "->", "ang"}], ",", "Infinity"}], 
  "]"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->1274612506,ExpressionUUID->"e90064ab-bd4a-405e-a800-33581c934490"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   FractionBox[
    RowBox[{"7", " ", "\[Phi]"}], "2"], ",", 
   RowBox[{"-", 
    FractionBox["\[Phi]", "2"]}], ",", "0", ",", 
   RowBox[{"-", "\[Phi]"}], ",", "0", ",", "0", ",", "0", ",", 
   RowBox[{
    RowBox[{"-", "2"}], " ", "\[Phi]"}]}], "}"}]], "Output",
 CellLabel->"Out[8]=",
 CellID->2013487213,ExpressionUUID->"66c8c4c1-1322-41c9-a2ab-86cf0f35d82b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Block", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"\[Phi]", "=", 
     RowBox[{"0.3", "*", "Pi"}]}], "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"mat", "=", 
     RowBox[{"Matrix", "[", 
      RowBox[{"cop", ",", "ST"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"new", "=", 
     RowBox[{"Matrix", "[", 
      RowBox[{"ucr", ",", "ST"}], "]"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"mat", "-", "new"}], "//", "ChopThrough"}], "//", 
     "MatrixForm"}]}]}], "\[IndentingNewLine]", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[9]:=",
 CellID->1045178272,ExpressionUUID->"eb5c34a6-0b2a-4d40-9aaf-34fc29cfb5f4"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"},
     {"0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", 
      "0", "0"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {16, 16}, 0, {
     1, {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
       0}, {}}, {}}]]]]], "Output",
 CellLabel->"Out[9]//MatrixForm=",
 CellID->74599150,ExpressionUUID->"41ced61d-9062-450a-aef5-2c072e6de04c"]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "2"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, 
  Closed]]]],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedFunction.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"See", " ", "Also"}], "SeeAlsoSection"]},
      {Cell[TextData[{
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "ef279ca7-12c8-49b5-bd04-2990db5d98c6"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["ControlledPower"]], "paclet:Q3/ref/ControlledPower", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "caa5e16c-7c58-4dfd-826d-642ca648e2d9"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "ade041b7-e771-4cf2-9fd6-a3b2e39f4dcc"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["CZ"]], "paclet:Q3/ref/CZ", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "01af80be-ef76-4e64-96a5-68e7b0ab16e8"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["AmplitudeEmbeddingGate"]], 
           "paclet:Q3/ref/AmplitudeEmbeddingGate", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "c24225b1-4a4b-467f-a18f-da88c9f78817"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["UniformlyControlledGate"]], 
           "paclet:Q3/ref/UniformlyControlledGate", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "f4dab0f8-a82d-4cda-8dbf-51ccf75aa946"]
       }], "SeeAlso",ExpressionUUID->"84ee5976-e0ac-4130-a0c5-d1b970535139"]}
     }]}
  }]], "SeeAlsoSection",ExpressionUUID->"02092a9e-f8cc-4a36-b5eb-\
1723c40bc0f7"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedTechNote.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Tech", " ", "Notes"}], "TechNotesSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Multi-Control Unitary Gates"]], 
           "paclet:Q3/tutorial/MultiControlUnitaryGates"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "d0abd5fb-d436-4cb5-8a06-ac85ae3e2c8a"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Information Systems with Q3"]], 
           "paclet:Q3/tutorial/QuantumInformationSystems"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "ac2d7129-480d-4593-bfad-2defc4bc14f1"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quick Quantum Computing with Q3"]], 
           "paclet:Q3/tutorial/QuickQuantumComputingWithQ3"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "8cc2775e-16e3-41dc-8fff-db358cdf8475"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3: Quick Start"]], "paclet:Q3/tutorial/Q3QuickStart"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "64ad8782-b117-490e-961e-438285dacbf3"]}]}
     }]}
  }]], "TechNotesSection",ExpressionUUID->"c819798d-f4e8-4df1-90a6-\
564b35430576"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, "RelatedGuide.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Related", " ", "Guides"}], "MoreAboutSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Information Systems"]], 
           "paclet:Q3/guide/QuantumInformationSystems"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "8908a67a-4aab-4031-8411-32aacf1fed67"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3"]], "paclet:Q3/guide/Q3"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "cf4a8981-a8fb-4180-892b-b794afa3fc57"]}]}
     }]}
  }]], "MoreAboutSection",ExpressionUUID->"76f8f1c0-264a-4903-b48a-\
2ba3d4ff22ee"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{29},
     "Spacer1"], GridBox[{
      {
       RowBox[{
        TemplateBox[{17},
         "Spacer1"], 
        StyleBox[
         RowBox[{"Related", " ", "Links"}], "RelatedLinksSection"]}]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "M. M\[ODoubleDot]tt\[ODoubleDot]nen "}]]]], 
             "https://doi.org/10.1103/PhysRevLett.93.130502"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "362259c9-3c23-4c11-96d9-be0e21acbc95"]}]],ExpressionUUID->
         "ed590cb6-fd64-433d-b746-c4e9bc23ad5b"],
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData[
             StyleBox[{
               StyleBox["et al", FontSlant -> "Italic"], 
               "., Physical Review Letters 93, 130502 (2004)"}]]], 
           "https://doi.org/10.1103/PhysRevLett.93.130502"},
          "WebLink",
          BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
         "b600f45e-c3b4-435c-ae5f-be55e4445d85"],
        ", \"Quantum Circuits for General Multiqubit Gates.\""
       }], "RelatedLinks",ExpressionUUID->
        "9b4af67d-a88b-48fb-a054-3ebcef29c4cc"]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "M. Nielsen and I. L. Chuang (2022)"}]]]], 
             "https://doi.org/10.1017/CBO9780511976667"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "969ede6d-f009-4a70-a964-5826e05ab333"]}]],ExpressionUUID->
         "c14c3966-3ace-433b-87d6-38775ab421b1"],
        StyleBox[
        ", Quantum Computation and Quantum Information (Cambridge University \
Press).",
         FontSlant->"Plain"]
       }], "RelatedLinks",ExpressionUUID->
        "3bbac90c-d714-4a42-9434-0d6b5a365774"]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "Mahn-Soo Choi (2022)"}]]]], 
             "https://doi.org/10.1007/978-3-030-91214-7"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "7abee64c-30c3-4fd7-b8fc-106525aa7fe1"]}]],ExpressionUUID->
         "e711bafe-98e9-4bbd-aa01-868a5850045f"],
        ", A Quantum Computation Workbook (Springer)."
       }], "RelatedLinks",ExpressionUUID->
        "e06ca67a-189b-4476-bf17-941cd388154f"]}
     }]}
  }]], "RelatedLinksSection",ExpressionUUID->"33b577c1-1491-4a5e-8f7f-\
e2baa6355607"],

Cell[" ", "FooterCell",ExpressionUUID->"85d9e59d-64f2-45ee-b6e0-b9b0f2a44d2f"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{900, 830},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"UniformlyControlledRotation",
TaggingRules->{
 "ModificationHighlight" -> False, "ColorType" -> "", "LinkTrails" -> "", 
  "ExampleCounter" -> 1, 
  "Openers" -> {
   "PrimaryExamplesSection" -> Open, 
    "ExampleSection" -> {"0" -> Open, "1" -> Closed}, "AllOptsTable" -> 
    Closed, "NotesSection" -> Closed, 
    "ExampleSubsection" -> {"0" -> Closed, "1" -> Closed, "2" -> Closed}}, 
  "NewStyles" -> True, "CitationPopupData" -> $Failed, "ShowCitation" -> 
  False, "HasOptions" -> True, "RootCaptions" -> "", 
  "HeaderCoreAreaLink" -> {}, 
  "Metadata" -> {
   "built" -> "{2024, 3, 2, 0, 53, 32.181505}", 
    "history" -> {"13.3", "14.0", "", ""}, "context" -> "Q3`", 
    "keywords" -> {
     "universal quantum computation", "quantum machine learning", 
      "variational quantum algorithms"}, "specialkeywords" -> {}, 
    "tutorialcollectionlinks" -> {}, "index" -> True, "label" -> "Q3 Symbol", 
    "language" -> "en", "paclet" -> "Q3", "status" -> "None", "summary" -> 
    "UniformlyControlledRotation[{c1, c2, ..., cn}, {\\[Theta]1, \\[Theta]2, \
..., \\[Theta]2^n}, {x, y, z}, s] represents the uniformly controlled \
rotation on qubit s around axis {x, y, z} by angles \\[Theta]1, \\[Theta]2, \
..., \\[Theta] 2 n depending on all possible bit sequences of control qubits \
c1, c2, ..., cn. UniformlyControlledRotation[{c1, c2, ..., cn}, {\\[Theta]1, \
\\[Theta]2, ..., \\[Theta]2^n}, s[..., k]] uses the k-axis as the rotation \
axis.", "synonyms" -> {}, "tabletags" -> {}, "title" -> 
    "UniformlyControlledRotation", "titlemodifier" -> "", "metadescription" -> 
    "", "windowtitle" -> "UniformlyControlledRotation", "type" -> "Symbol", 
    "uri" -> "Q3/ref/UniformlyControlledRotation"}},
CellContext->"Global`",
FrontEndVersion->"14.0 for Mac OS X ARM (64-bit) (December 12, 2023)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> FrontEnd`FileName[{"Wolfram"}, "Reference.nb"]]], 
   Cell[
    StyleData["Input"], CellContext -> "Global`"], 
   Cell[
    StyleData["Output"], CellContext -> "Global`"]}, Visible -> False, 
  FrontEndVersion -> "14.0 for Mac OS X ARM (64-bit) (December 12, 2023)", 
  StyleDefinitions -> "Default.nb"],
ExpressionUUID->"2715e7ca-958e-48d1-bd57-23f8c6497455"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "PrimaryExamplesSection"->{
  Cell[20960, 596, 1390, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"98e35c8d-2f08-44e3-a2fe-0ef80833996c",
   CellTags->"PrimaryExamplesSection",
   CellID->1516651688]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"PrimaryExamplesSection", 170781, 4296}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[599, 21, 7599, 185, 57, "AnchorBarGrid",ExpressionUUID->"94542b31-fb3a-4462-be96-e2819ae7dbe2",
 CellID->1],
Cell[8201, 208, 85, 0, 23, "ContextNameCell",ExpressionUUID->"c835a996-4234-4b72-b916-d46b802b024e"],
Cell[CellGroupData[{
Cell[8311, 212, 1190, 31, 60, "ObjectNameGrid",ExpressionUUID->"410ab358-abde-49c4-94c4-8dd779e9b7ed"],
Cell[9504, 245, 5052, 146, 214, "Usage",ExpressionUUID->"f0e31d49-56bb-40c1-9c4a-db9b3061f805",
 CellID->1604475725]
}, Open  ]],
Cell[CellGroupData[{
Cell[14593, 396, 1898, 47, 37, "NotesSection",ExpressionUUID->"ab896003-f768-4397-8719-79596c5b8e91",
 CellGroupingRules->{"SectionGrouping", 50},
 CellID->506455307],
Cell[16494, 445, 1576, 52, 70, "Notes",ExpressionUUID->"ae0bbd84-36cf-4df2-abb8-07b3d8ef73be",
 CellID->471354696],
Cell[18073, 499, 2332, 78, 70, "Notes",ExpressionUUID->"3b7a3b8a-d1fa-42ce-ae8e-f5f6de2d4b3e",
 CellID->1734206947],
Cell[20408, 579, 425, 11, 70, "Notes",ExpressionUUID->"67d2a3c7-cb3d-4ad3-9716-8f3879367beb",
 CellID->940907943]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],
Cell[CellGroupData[{
Cell[20960, 596, 1390, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"98e35c8d-2f08-44e3-a2fe-0ef80833996c",
 CellTags->"PrimaryExamplesSection",
 CellID->1516651688],
Cell[22353, 635, 192, 3, 31, "Input",ExpressionUUID->"96c47721-5f98-45ed-9938-103103a6dbf8",
 CellID->1759966869],
Cell[CellGroupData[{
Cell[22570, 642, 1368, 36, 31, "ExampleSection",ExpressionUUID->"275f18fc-9b01-4f0e-ad25-c0dd905e7d59",
 CellID->1881513973],
Cell[23941, 680, 219, 5, 29, "Input",ExpressionUUID->"175b08b0-7149-48ff-b55f-d26d2322e5da",
 CellID->1226794958],
Cell[CellGroupData[{
Cell[24185, 689, 530, 15, 84, "Input",ExpressionUUID->"b35f5711-3cde-4aa7-8a73-8e6894ced45c",
 CellID->968013306],
Cell[24718, 706, 596, 19, 37, "Output",ExpressionUUID->"1e6e1805-e808-491e-927d-1a0b5a8ec915",
 CellID->1831391757]
}, Open  ]],
Cell[25329, 728, 188, 5, 40, "ExampleText",ExpressionUUID->"2e179b0f-523f-4f10-b4f2-176c3012d595",
 CellID->2035556350],
Cell[CellGroupData[{
Cell[25542, 737, 320, 10, 29, "Input",ExpressionUUID->"310656d4-c653-4b24-9c3f-b7f7474ec298",
 CellID->694985576],
Cell[25865, 749, 387, 8, 37, "Output",ExpressionUUID->"7b31f997-f210-4226-b42d-21c240938c80",
 CellID->448605525]
}, Open  ]],
Cell[CellGroupData[{
Cell[26289, 762, 300, 7, 29, "Input",ExpressionUUID->"97d02a23-5a20-47a9-98a7-ea8e27d85294",
 CellID->250707124],
Cell[26592, 771, 1106, 31, 55, "Output",ExpressionUUID->"2915f4dd-5348-4443-9dc6-6f05fa833e34",
 CellID->519875328]
}, Open  ]],
Cell[CellGroupData[{
Cell[27735, 807, 218, 5, 29, "Input",ExpressionUUID->"7c18c4c8-6418-40e8-a1e3-d1f26a7b7d74",
 CellID->1555841960],
Cell[27956, 814, 2376, 55, 179, "Output",ExpressionUUID->"51574fb8-17a2-48d7-bd18-60ddba5d927b",
 CellID->638458366]
}, Open  ]],
Cell[CellGroupData[{
Cell[30369, 874, 207, 5, 70, "Input",ExpressionUUID->"d66179ed-bdf7-48cc-a4d3-0f8dbf88bf57",
 CellID->602405762],
Cell[30579, 881, 2777, 67, 41, "Output",ExpressionUUID->"600380f0-0001-4b4b-97e0-986165cf6b71",
 CellID->1741443396]
}, Open  ]],
Cell[CellGroupData[{
Cell[33393, 953, 215, 5, 70, "Input",ExpressionUUID->"bb779a81-a09b-4381-bca4-239355dc7b08",
 CellID->494556011],
Cell[33611, 960, 13120, 324, 93, "Output",ExpressionUUID->"6128cb06-0004-43ec-adc0-0780fa0f2987",
 CellID->422165691]
}, Open  ]],
Cell[CellGroupData[{
Cell[46768, 1289, 270, 8, 70, "Input",ExpressionUUID->"632018de-1827-4759-bda2-7a75df532218",
 CellID->707741982],
Cell[47041, 1299, 3875, 71, 304, "Output",ExpressionUUID->"5a45c24a-11e4-40f9-b2b2-78b9ebc4c28e",
 CellID->1984853574]
}, Open  ]],
Cell[50931, 1373, 206, 4, 70, "ExampleText",ExpressionUUID->"135b2504-3956-40a0-9f08-c21f78cf8de0",
 CellID->906806088],
Cell[CellGroupData[{
Cell[51162, 1381, 210, 5, 70, "Input",ExpressionUUID->"757bbad6-58f0-4555-b248-edcf2f28cd70",
 CellID->757126852],
Cell[51375, 1388, 7029, 146, 179, "Output",ExpressionUUID->"088e5811-4a4a-4099-a26c-88b728bf0dda",
 CellID->1997490796]
}, Open  ]],
Cell[58419, 1537, 458, 13, 70, "ExampleText",ExpressionUUID->"774f5a02-1d29-4cfe-90dd-03fc699e855b",
 CellID->1187733402],
Cell[CellGroupData[{
Cell[58902, 1554, 247, 6, 70, "Input",ExpressionUUID->"28273c5d-fcfa-4e26-8db9-2ddbe0f4ce4b",
 CellID->486908243],
Cell[59152, 1562, 7029, 146, 179, "Output",ExpressionUUID->"bbdd41fb-7f90-44c8-8f67-d945b5579b19",
 CellID->890160962]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, Closed]]]],
Cell[CellGroupData[{
Cell[66330, 1716, 1393, 36, 70, "ExampleSection",ExpressionUUID->"eed9fbe2-0173-40fa-a861-5e3cef642e82",
 CellID->221896986],
Cell[CellGroupData[{
Cell[67748, 1756, 1403, 36, 70, "ExampleSubsection",ExpressionUUID->"639c0fa7-b3e9-4216-8a32-5b108aed9aa1",
 CellID->648435845],
Cell[69154, 1794, 219, 5, 70, "Input",ExpressionUUID->"3a220eec-ee76-41f3-a646-565b33ae9edb",
 CellID->1561406280],
Cell[CellGroupData[{
Cell[69398, 1803, 530, 15, 70, "Input",ExpressionUUID->"c54cc7c7-0c5c-48c3-90a3-7054a141a5ca",
 CellID->305181620],
Cell[69931, 1820, 596, 19, 37, "Output",ExpressionUUID->"98953010-a87e-409f-b9d7-bee6961e1923",
 CellID->1181095032]
}, Open  ]],
Cell[CellGroupData[{
Cell[70564, 1844, 320, 10, 70, "Input",ExpressionUUID->"216bb6d5-5688-435f-8ea1-4ac04fffbd31",
 CellID->121249603],
Cell[70887, 1856, 388, 8, 37, "Output",ExpressionUUID->"811e7601-834e-4a1d-aab5-d3c7ce316d44",
 CellID->686931921]
}, Open  ]],
Cell[CellGroupData[{
Cell[71312, 1869, 441, 11, 70, "Input",ExpressionUUID->"e4f41a2c-2b63-4621-bc73-d8c26df1cddd",
 CellID->1716533849],
Cell[71756, 1882, 7031, 146, 179, "Output",ExpressionUUID->"5896af69-c0b7-494c-946d-4fc571de7339",
 CellID->1485820981]
}, Open  ]],
Cell[CellGroupData[{
Cell[78824, 2033, 500, 13, 70, "Input",ExpressionUUID->"e42f86b3-cd0e-4314-8adf-fc7d2aba4cc9",
 CellID->263366503],
Cell[79327, 2048, 6879, 138, 179, "Output",ExpressionUUID->"624d7f79-b097-4e51-9e18-4b7ab4ca87a1",
 CellID->1855623583]
}, Open  ]],
Cell[CellGroupData[{
Cell[86243, 2191, 277, 7, 70, "Input",ExpressionUUID->"d0ac0b09-5072-41ae-88a5-3eb6e84507d3",
 CellID->627928911],
Cell[86523, 2200, 7572, 155, 179, "Output",ExpressionUUID->"5b903e48-6f53-462c-91b8-f34123b6ae3d",
 CellID->2129833687]
}, Open  ]],
Cell[CellGroupData[{
Cell[94132, 2360, 312, 9, 70, "Input",ExpressionUUID->"51c98929-6d82-4029-9c08-ba422a2b7610",
 CellID->1417394473],
Cell[94447, 2371, 2515, 54, 304, "Output",ExpressionUUID->"89bf9b40-fdcc-457b-bace-512ef7912663",
 CellID->1224848887]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "0"}, Closed]]]],
Cell[CellGroupData[{
Cell[97114, 2433, 1412, 36, 70, "ExampleSubsection",ExpressionUUID->"2e890b3f-c3bb-49d6-8b01-4c26f19d3801",
 CellID->1929222037],
Cell[98529, 2471, 309, 7, 70, "ExampleText",ExpressionUUID->"6760deb9-d6d0-4722-b9c7-d0d4f0c22916",
 CellID->943224651],
Cell[98841, 2480, 218, 5, 70, "Input",ExpressionUUID->"513f8654-0de3-4e23-b114-728de5faaac3",
 CellID->103290834],
Cell[CellGroupData[{
Cell[99084, 2489, 530, 15, 70, "Input",ExpressionUUID->"482b6dd8-38bb-4510-be1a-85decf3b81cd",
 CellID->261036225],
Cell[99617, 2506, 595, 19, 37, "Output",ExpressionUUID->"dde6d113-1ed4-40c7-b4da-cfad129f4733",
 CellID->466029800]
}, Open  ]],
Cell[CellGroupData[{
Cell[100249, 2530, 321, 10, 70, "Input",ExpressionUUID->"5c8973b8-6aac-4e69-8965-0ad38140cb5d",
 CellID->1126297971],
Cell[100573, 2542, 386, 8, 37, "Output",ExpressionUUID->"bd7a3d23-c290-48f7-9710-24de92f3c210",
 CellID->209907377]
}, Open  ]],
Cell[100974, 2553, 159, 2, 70, "ExampleText",ExpressionUUID->"cd662b7e-413b-45c4-801c-9661f5c0bc63",
 CellID->1357819613],
Cell[CellGroupData[{
Cell[101158, 2559, 486, 13, 70, "Input",ExpressionUUID->"30cf5667-babf-49ec-9077-f56edea9b4c5",
 CellID->1265229398],
Cell[101647, 2574, 7636, 170, 179, "Output",ExpressionUUID->"0b08a042-c520-4b3b-af10-a3ec162c67de",
 CellID->1620686049]
}, Open  ]],
Cell[109298, 2747, 178, 3, 70, "ExampleText",ExpressionUUID->"b43a695b-6e01-488e-bcfa-9090e246ddcf",
 CellID->1306719150],
Cell[CellGroupData[{
Cell[109501, 2754, 214, 5, 70, "Input",ExpressionUUID->"eea2f0ec-8eb6-446f-b16c-779a85988fe7",
 CellID->1012640172],
Cell[109718, 2761, 7706, 174, 179, "Output",ExpressionUUID->"8e35dc6b-4ba8-42f4-9c2b-2de693c68ed7",
 CellID->2136769447]
}, Open  ]],
Cell[117439, 2938, 131, 1, 70, "ExampleText",ExpressionUUID->"49adf1cd-67e6-4bb2-9dba-7ffc9b3e7c25",
 CellID->1280867960],
Cell[CellGroupData[{
Cell[117595, 2943, 251, 6, 70, "Input",ExpressionUUID->"b0c36bce-611d-42af-b2ca-7a8e29982935",
 CellID->2023783963],
Cell[117849, 2951, 7705, 174, 179, "Output",ExpressionUUID->"f87493a3-562c-4261-a7a4-b7f75b6d11c8",
 CellID->228469757]
}, Open  ]],
Cell[CellGroupData[{
Cell[125591, 3130, 311, 9, 70, "Input",ExpressionUUID->"923c9268-fab3-4586-8685-9db4c9edc5bb",
 CellID->488723745],
Cell[125905, 3141, 2178, 51, 304, "Output",ExpressionUUID->"1c2e07b0-64d7-41d3-bfd8-eead01249ad5",
 CellID->577929963]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "1"}, Closed]]]],
Cell[CellGroupData[{
Cell[128235, 3200, 1413, 36, 70, "ExampleSubsection",ExpressionUUID->"9f3b353d-3ef2-4c01-9a02-10f439c7812b",
 CellID->1313350173],
Cell[129651, 3238, 203, 4, 70, "ExampleText",ExpressionUUID->"32c7e7e3-8d92-4c66-80cf-bbbbb8dd054c",
 CellID->603809129],
Cell[129857, 3244, 219, 5, 70, "Input",ExpressionUUID->"ef16aade-83e9-4c4f-9cf8-7f338c1cec88",
 CellID->2106864546],
Cell[CellGroupData[{
Cell[130101, 3253, 534, 15, 70, "Input",ExpressionUUID->"90818056-8632-4632-8e4c-c7cd9c695fa9",
 CellID->596381436],
Cell[130638, 3270, 238, 6, 37, "Output",ExpressionUUID->"f837e8f6-9bfc-4dca-8e2b-1c0a6496f2b6",
 CellID->1484311187]
}, Open  ]],
Cell[CellGroupData[{
Cell[130913, 3281, 339, 9, 70, "Input",ExpressionUUID->"69c95ec5-43d6-4eac-8f1d-379a28014e47",
 CellID->214569239],
Cell[131255, 3292, 596, 19, 37, "Output",ExpressionUUID->"1843672f-97a8-485b-b48f-0493861e8abc",
 CellID->1198226520],
Cell[131854, 3313, 606, 19, 37, "Output",ExpressionUUID->"c4a876d5-3c0d-4d69-a088-350043f245ba",
 CellID->1638963721]
}, Open  ]],
Cell[CellGroupData[{
Cell[132497, 3337, 344, 9, 70, "Input",ExpressionUUID->"d66882f1-4404-4184-9801-6ae41141bd32",
 CellID->2078201721],
Cell[132844, 3348, 1215, 38, 52, "Output",ExpressionUUID->"c0beb0b5-be95-4dd6-be4e-ef22e98bbbf3",
 CellID->950982202]
}, Open  ]],
Cell[CellGroupData[{
Cell[134096, 3391, 195, 4, 70, "Input",ExpressionUUID->"051b004e-34b0-4ecd-9c10-0d095d3e49c3",
 CellID->1868568862],
Cell[134294, 3397, 1601, 41, 179, "Output",ExpressionUUID->"181eb295-865e-44e9-8368-58eb1301a053",
 CellID->1262036340]
}, Open  ]],
Cell[CellGroupData[{
Cell[135932, 3443, 327, 8, 70, "Input",ExpressionUUID->"d79b9e09-14db-4d75-b4f7-55bc1ee94c32",
 CellID->1493921650],
Cell[136262, 3453, 1133, 33, 37, "Output",ExpressionUUID->"6ac39051-9b04-4789-90b5-79706d082d57",
 CellID->806519942]
}, Open  ]],
Cell[CellGroupData[{
Cell[137432, 3491, 396, 8, 70, "Input",ExpressionUUID->"56d3004b-7c3e-4677-bd4d-7daf74ae411a",
 CellID->1489404584],
Cell[137831, 3501, 2386, 56, 179, "Output",ExpressionUUID->"b97035c6-52cf-4e2c-9d83-769f275fa55f",
 CellID->877741184],
Cell[140220, 3559, 7032, 146, 179, "Output",ExpressionUUID->"20f53378-5b94-41b8-a079-6ba28a735e58",
 CellID->1130908245],
Cell[147255, 3707, 7065, 150, 179, "Output",ExpressionUUID->"46fb74c6-34c3-4c96-90db-fdc7b2627cf8",
 CellID->1944597765]
}, Open  ]],
Cell[CellGroupData[{
Cell[154357, 3862, 474, 14, 70, "Input",ExpressionUUID->"e90064ab-bd4a-405e-a800-33581c934490",
 CellID->1274612506],
Cell[154834, 3878, 404, 11, 52, "Output",ExpressionUUID->"66c8c4c1-1322-41c9-a2ab-86cf0f35d82b",
 CellID->2013487213]
}, Open  ]],
Cell[CellGroupData[{
Cell[155275, 3894, 734, 19, 70, "Input",ExpressionUUID->"eb5c34a6-0b2a-4d40-9aaf-34fc29cfb5f4",
 CellID->1045178272],
Cell[156012, 3915, 2177, 51, 304, "Output",ExpressionUUID->"41ced61d-9062-450a-aef5-2c072e6de04c",
 CellID->74599150]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "2"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, Closed]]]],
Cell[158546, 3978, 3371, 90, 70, "SeeAlsoSection",ExpressionUUID->"02092a9e-f8cc-4a36-b5eb-1723c40bc0f7"],
Cell[161920, 4070, 1826, 46, 70, "TechNotesSection",ExpressionUUID->"c819798d-f4e8-4df1-90a6-564b35430576"],
Cell[163749, 4118, 1045, 27, 70, "MoreAboutSection",ExpressionUUID->"76f8f1c0-264a-4903-b48a-2ba3d4ff22ee"],
Cell[164797, 4147, 3379, 92, 70, "RelatedLinksSection",ExpressionUUID->"33b577c1-1491-4a5e-8f7f-e2baa6355607"],
Cell[168179, 4241, 78, 0, 70, "FooterCell",ExpressionUUID->"85d9e59d-64f2-45ee-b6e0-b9b0f2a44d2f"]
}
]
*)

(* End of internal cache information *)

