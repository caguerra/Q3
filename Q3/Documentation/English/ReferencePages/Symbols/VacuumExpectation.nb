(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Wolfram 14.1' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       154,          7]
NotebookDataLength[     71476,       1921]
NotebookOptionsPosition[     60767,       1709]
NotebookOutlinePosition[     62956,       1764]
CellTagsIndexPosition[     62870,       1759]
WindowTitle->VacuumExpectation
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[GridBox[{
   {GridBox[{
      {
       ItemBox[Cell[BoxData[
         RowBox[{
          TemplateBox[{12},
           "Spacer1"], Cell["Q3 SYMBOL", "PacletNameCell",
           TextAlignment->Center,ExpressionUUID->
           "beee83a0-0361-4346-806f-256bf604a123"], 
          TemplateBox[{8},
           "Spacer1"]}]],
         TextAlignment->Center,ExpressionUUID->
         "62693161-1e98-4ba5-99b1-1f5d42c49740"],
        Background->RGBColor[0.490196, 0.576471, 0.690196],
        ItemSize->Full], ""}
     },
     GridBoxAlignment->{"Rows" -> {{Center}}},
     GridBoxItemSize->{"Columns" -> {Full, 
         Scaled[0.02]}, "Rows" -> {{2.5}}}], Cell[TextData[{
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "See Also",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "04f31731-028f-4b62-a410-5fbc123b75c7"]
         }],ExpressionUUID->"22c08b82-e0ad-45b4-8501-ecfe9764fe38"],
         StripOnInput->False],{
        StyleBox["\"Vacuum\"", "SeeAlsoRelated", StripOnInput -> False] :> 
         Documentation`HelpLookup["paclet:Q3/ref/Vacuum"], 
         StyleBox[
          "\"SurviveVacuum\"", "SeeAlsoRelated", StripOnInput -> False] :> 
         Documentation`HelpLookup["paclet:Q3/ref/SurviveVacuum"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"SeeAlso"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "4ce9c43a-fd95-4196-8fcc-3ffeb90eddc3"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Related Guides",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "b7678815-e9f1-4791-a736-99a41a3568af"]
         }],ExpressionUUID->"67a19d11-83fd-493e-9291-f720717281f9"],
         StripOnInput->False],{
        "\"Quantum Many-Body Systems\"" :> 
         Documentation`HelpLookup["paclet:Q3/guide/QuantumManyBodySystems"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"MoreAbout"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "d95707da-84ba-4b73-a1de-64e051511578"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Tech Notes",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "107cdfd7-e76e-419d-bd1b-dd048b0c912c"]
         }],ExpressionUUID->"286c54ad-069a-431c-b1b2-9b7933c1bf80"],
         StripOnInput->False],{
        "\"Quantum Many-Body Systems with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuantumManyBodySystems"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"Tutorials"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "5abd8ca7-7c21-4663-b0b1-4eedd850fc22"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "URL",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "e4f69d01-6d26-4b25-8e84-6ec38746b9fa"]
         }],ExpressionUUID->"6dd192cd-90e0-4c7d-a852-ca3166b4c1d4"],
         StripOnInput->False],{
        "\"Q3/ref/VacuumExpectation\"" :> None, 
         "\"Copy Wolfram Documentation Center URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{Cell["Q3/ref/VacuumExpectation"]}, Visible -> 
               DocumentationBuild`Make`Private`visible$26993]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], Delimiter, 
         "\"Copy web URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{
               Cell[BoxData[
                 MakeBoxes[
                  Hyperlink[
                   "http://reference.wolfram.com/language/Q3/ref/\
VacuumExpectation.html"], StandardForm]], "Input", TextClipboardType -> 
                 "PlainText"]}, Visible -> 
               DocumentationBuild`Make`Private`visible$26993]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], 
         "\"Go to web URL\"" :> 
         FrontEndExecute[{
           NotebookLocate[{
             URL[If[TrueQ[False], 
                 "http://reference.wolfram.com/system-modeler/", 
                 "http://reference.wolfram.com/language/"] <> 
               "Q3/ref/VacuumExpectation" <> ".html"], None}]}]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"URLMenu"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "cb73bd22-6d7d-4141-9175-d3f4ba285330"]
    }], "AnchorBar",
     CacheGraphics->False,ExpressionUUID->
     "ac118a13-ede5-4c59-b312-8843e9a76000"]}
  }]], "AnchorBarGrid",
 CellID->1,ExpressionUUID->"1ada737a-ab27-4090-8f68-90c79988fe96"],

Cell["Q3`", "ContextNameCell",ExpressionUUID->"e2b354f2-61ca-4f41-9eb6-88886510f80d"],

Cell[CellGroupData[{

Cell[BoxData[GridBox[{
   {Cell[TextData[{
     Cell[
     "VacuumExpectation", "ObjectName",ExpressionUUID->
      "5cbeba16-98d6-4c2f-a5e9-60bb69d8b520"],
     Cell[BoxData[
      TemplateBox[{8},
       "Spacer1"]],ExpressionUUID->"d2182a25-6457-4cbb-b0a9-f3f87d05d093"],
     Cell[BoxData[
     ""], "ObjectNameTranslation",ExpressionUUID->
      "c5bd073a-559d-4f01-bba6-46550590e6ab"]
    }],ExpressionUUID->"4fcbff68-c092-44a5-a4b5-0b535d0afa88"], Cell[BoxData[
     StyleBox[
      GraphicsBox[InsetBox[
        StyleBox["\<\"UPDATED IN 14.1\"\>",
         StripOnInput->False,
         FontFamily->"Source Sans Pro",
         FontSize->17,
         FontWeight->"Bold",
         FontSlant->"Italic",
         FontColor->RGBColor[0.968627, 0.466667, 0]], {Right, Center}, {
        Right, Center}],
       AxesStyle->Large,
       FrameStyle->Large,
       ImageSize->{125, 24},
       PlotRangePadding->Scaled[0.025]], "NewInGraphic",
      StripOnInput->False]],
     Deployed->True,
     Magnification->1,ExpressionUUID->
     "415e8bc9-84af-4de7-9d88-094b9291161d"]}
  }]], "ObjectNameGrid",
 CacheGraphics->False,ExpressionUUID->"68832fc5-7dbc-4b24-be57-27d625e39f30"],

Cell[BoxData[GridBox[{
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{"VacuumExpectation", "[", 
       StyleBox["expr", "TI"], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "2ef48da4-26a7-45f0-9670-c87e960b6b61"],
     "\[LineSeparator]returns the vacuum expectation value of ",
     Cell[BoxData[
      StyleBox["expr", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "c5b002dc-1d20-4ad0-afa6-701ba258b5e9"],
     "."
    }],ExpressionUUID->"3df4c996-6278-498f-a6ce-a49e896b49d3"]}
  }]], "Usage",ExpressionUUID->"8af184e1-3f83-4739-850f-1b14e28bfc3f"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[Cell[BoxData[
 ButtonBox[Cell[TextData[{
   Cell[BoxData[
    DynamicBox[ToBoxes[
      If[
       MatchQ[
        CurrentValue[
         EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, 
         Closed], 
        Alternatives[Open, True]], 
       Style[
        Graphics[{
          Thickness[0.18], 
          RGBColor[0.8509803921568627, 0.396078431372549, 0], 
          Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
         PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
        0.68 Inherited], 
       Rotate[
        Style[
         Graphics[{
           Thickness[0.18], 
           RGBColor[0.8509803921568627, 0.396078431372549, 0], 
           Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
          PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
         0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
     ImageSizeCache->{
      13.600000000000003`, {-0.1685058593749993, 13.768505859375}}]],
    ExpressionUUID->"9ce89851-cb3a-4af6-b10f-f54496874dde"],
   Cell[BoxData[
    TemplateBox[{1},
     "Spacer1"]],ExpressionUUID->"cb89a9a4-f0cb-44f4-9ef6-c55deb9f13c8"],
   "Details and Options"
  }], "NotesFrameText",ExpressionUUID->"2e43c371-590f-4cc9-bc22-2c4afe7a33ac"],
  Appearance->{Automatic, None, "Normal", Automatic},
  BaseStyle->None,
  ButtonFunction:>(FrontEndExecute[{
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], All, ButtonCell], 
     FrontEndToken["OpenCloseGroup"], 
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], After, CellContents]}]& ),
  Evaluator->None,
  Method->
   "Preemptive"]],ExpressionUUID->"fbed4bd2-ddbe-47c3-99ff-4cc1a11ef679"]], \
"NotesSection",
 WholeCellGroupOpener->True,
 CellGroupingRules->{"SectionGrouping", 50},
 CacheGraphics->False,
 CellID->872314970,ExpressionUUID->"edd18e94-5e2b-491b-9c87-c4ec7e94086c"],

Cell["The following options can be given: ", "Notes",ExpressionUUID->"a4df8a81-633a-472a-ac57-058a96dceb6f"],

Cell[BoxData[GridBox[{
   {Cell["      ", "TableRowIcon",ExpressionUUID->
     "5095b0f7-b565-44fb-b626-4e250f8391f7"], 
    TemplateBox[{
      Cell[
       TextData["Method"]], "paclet:ref/Method"},
     "RefLink",
     BaseStyle->{"3ColumnTableMod"}], "Algebra", Cell[TextData[{
     "With \"Algebra\" it uses the standard algebraic method and with \
\"Occupations\" using the ",
     Cell[BoxData[
      TemplateBox[{
        Cell[
         TextData["Fock"]], "paclet:Q3/ref/Fock", "Q3 Package Symbol"},
       "PackageLink",
       BaseStyle->"3ColumnTableMod"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "e3a491d5-5538-43d6-86ba-24bdf720e170"],
     " states Ket[<|...|>]."
    }], "TableText",ExpressionUUID->"6a3c058f-e3db-497a-8907-dc53451161b2"]}
  }]], "3ColumnTableMod",
 GridBoxOptions->{
 GridBoxBackground->{"Columns" -> {{None}}, "Rows" -> {{None}}},
 GridBoxDividers->{
  "Rows" -> {{
     True, True}}}},ExpressionUUID->"6aed0f13-a03f-4ff4-aa28-77adc7f9bdf0"]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "PrimaryExamplesSection"}, Open], 
      Alternatives[True, Open]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{
    13.600000000000001`, {4.251494140625001, 9.348505859375003}}]],
  ExpressionUUID->"671a8072-bdb7-4484-8d57-0bae9eca9c5a"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"1c5d2434-6d68-4b47-b752-3adf580010ac"],
 "Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "0af5e476-17a5-41f7-816c-0e98d1f2c414"]
}], "PrimaryExamplesSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellTags->"PrimaryExamplesSection",
 CellID->126842721,ExpressionUUID->"be030d2e-059b-40fe-a070-2852313cb7ba"],

Cell[BoxData[
 RowBox[{"Needs", "[", "\"\<Q3`\>\"", "]"}]], "Input", "ExampleInitialization",
 CellLabel->"In[1]:=",
 CellID->1927565408,ExpressionUUID->"024f336f-3a03-42dd-bc5a-9d1aa92e53dd"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{
    13.600000000000001`, {4.551318359375001, 9.048681640625002}}]],
  ExpressionUUID->"123731c0-6cc4-4300-b625-4b3889c454c9"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"ec500342-dc49-4904-956f-60ce2714c8f2"],
 "Basic Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "2d9cf445-ddba-4ae9-b820-6941d16fd1b3"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1541834023,ExpressionUUID->"3f11f1f3-e9f7-42cd-bdc3-1e4f57aeba56"],

Cell["For bosons, it is more or less straightforward.", "ExampleText",
 CellID->814487388,ExpressionUUID->"11c85158-82c9-4684-9226-b956f0778321"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Boson", ",", "a", ",", "b"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1028764138,ExpressionUUID->"9c360511-f4dd-40d3-98d7-810cd5606150"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"aa", "=", 
  RowBox[{"MultiplyPower", "[", 
   RowBox[{"a", ",", "3"}], "]"}]}], "\n", 
 RowBox[{"expr", "=", 
  RowBox[{"aa", "**", 
   RowBox[{"Dagger", "[", "aa", "]"}]}]}], "\[IndentingNewLine]", 
 RowBox[{"VacuumExpectation", "[", "expr", "]"}], "\[IndentingNewLine]", 
 RowBox[{"VacuumExpectation", "[", 
  RowBox[{"expr", ",", 
   RowBox[{"Method", "\[Rule]", "\"\<Occupations\>\""}]}], "]"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1048025369,ExpressionUUID->"92e20fc4-378e-4808-8023-c18c47b71ec2"],

Cell[BoxData[
 InterpretationBox[
  TemplateBox[{
    TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", "a", "a", "a"}, 
     "RowWithSeparators"]},
   "RowDefault"],
  Q3`Multiply[$CellContext`a, $CellContext`a, $CellContext`a]]], "Output",
 CellLabel->"Out[2]=",
 CellID->707697795,ExpressionUUID->"cae99f96-3798-4db7-a4fa-54d91d6b94d6"],

Cell[BoxData[
 RowBox[{"6", "+", 
  RowBox[{"18", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"a", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"\[Dagger]\""}, 
            "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
          SuperscriptBox], 
         Q3`Dagger[$CellContext`a]], "a"}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     Q3`Dagger[$CellContext`a], $CellContext`a]]}], "+", 
  RowBox[{"9", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"a", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"\[Dagger]\""}, 
            "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
          SuperscriptBox], 
         Q3`Dagger[$CellContext`a]], 
        InterpretationBox[
         TemplateBox[{"a", 
           
           TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"\[Dagger]\""}, 
            "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
          SuperscriptBox], 
         Q3`Dagger[$CellContext`a]], "a", "a"}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     Q3`Dagger[$CellContext`a], 
     Q3`Dagger[$CellContext`a], $CellContext`a, $CellContext`a]]}], "+", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"a", 
          
          TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"\[Dagger]\""}, 
           "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
         SuperscriptBox], 
        Q3`Dagger[$CellContext`a]], 
       InterpretationBox[
        TemplateBox[{"a", 
          
          TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"\[Dagger]\""}, 
           "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
         SuperscriptBox], 
        Q3`Dagger[$CellContext`a]], 
       InterpretationBox[
        TemplateBox[{"a", 
          
          TemplateBox[{"\[ThinSpace]", "\"\[ThinSpace]\"", "\"\[Dagger]\""}, 
           "RowWithSeparators"]}, "Superscript", SyntaxForm -> 
         SuperscriptBox], 
        Q3`Dagger[$CellContext`a]], "a", "a", "a"}, "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[$CellContext`a], 
    Q3`Dagger[$CellContext`a], 
    Q3`Dagger[$CellContext`a], $CellContext`a, $CellContext`a, \
$CellContext`a]]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1512403479,ExpressionUUID->"efee3c3b-8584-40a9-903a-b4ebf9b2c3e2"],

Cell[BoxData["6"], "Output",
 CellLabel->"Out[2]=",
 CellID->1348825661,ExpressionUUID->"a0be4dce-1010-4dfe-b0e2-211b017c7924"],

Cell[BoxData["6"], "Output",
 CellLabel->"Out[2]=",
 CellID->875506695,ExpressionUUID->"3b324b38-c09a-4801-9ee7-9e4f5d08e536"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"aa", "=", 
  RowBox[{
   RowBox[{"a", "[", "i", "]"}], "**", 
   RowBox[{"a", "[", "j", "]"}], "**", 
   RowBox[{"a", "[", "l", "]"}]}]}], "\[IndentingNewLine]", 
 RowBox[{"VacuumExpectation", "[", "aa", "]"}], "\[IndentingNewLine]", 
 RowBox[{"VacuumExpectation", "[", 
  RowBox[{"Dagger", "[", "aa", "]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"VacuumExpectation", "[", 
   RowBox[{"aa", "**", 
    RowBox[{"Dagger", "[", "aa", "]"}]}], "]"}], "//", 
  "Simplify"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"VacuumExpectation", "[", 
   RowBox[{"aa", "**", 
    RowBox[{"Dagger", "[", "aa", "]"}]}], "]"}], "/.", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"j", "\[Rule]", "i"}], ",", 
    RowBox[{"l", "\[Rule]", "i"}]}], "}"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1245538910,ExpressionUUID->"54e1487c-200b-492f-8003-0eabb64047ec"],

Cell[BoxData[
 InterpretationBox[
  TemplateBox[{
    TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "l"}, "RowWithSeparators"]], 
       $CellContext`a[$CellContext`l]], 
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "j"}, "RowWithSeparators"]], 
       $CellContext`a[$CellContext`j]], 
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "i"}, "RowWithSeparators"]], 
       $CellContext`a[$CellContext`i]]}, "RowWithSeparators"]},
   "RowDefault"],
  Q3`Multiply[
   $CellContext`a[$CellContext`l], 
   $CellContext`a[$CellContext`j], 
   $CellContext`a[$CellContext`i]]]], "Output",
 CellLabel->"Out[3]=",
 CellID->496087249,ExpressionUUID->"89e0bff0-935a-4b5a-851f-e9be50d79010"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->1206876289,ExpressionUUID->"aa894134-bdc9-4967-bd73-166981b795e3"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->986743308,ExpressionUUID->"071b747f-43ca-4ecd-a49b-2c453cfe14ce"],

Cell[BoxData[
 RowBox[{"1", "+", 
  TemplateBox[{
    RowBox[{"i", ",", "l"}]},
   "KroneckerDeltaSeq"], "+", 
  TemplateBox[{
    RowBox[{"j", ",", "l"}]},
   "KroneckerDeltaSeq"], "+", 
  RowBox[{
   TemplateBox[{
     RowBox[{"i", ",", "j"}]},
    "KroneckerDeltaSeq"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "+", 
     RowBox[{"2", " ", 
      TemplateBox[{
        RowBox[{"i", ",", "l"}]},
       "KroneckerDeltaSeq"], " ", 
      TemplateBox[{
        RowBox[{"j", ",", "l"}]},
       "KroneckerDeltaSeq"]}]}], ")"}]}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1326055422,ExpressionUUID->"d817f2df-4f31-423b-83ff-18bb3ccfe249"],

Cell[BoxData["6"], "Output",
 CellLabel->"Out[3]=",
 CellID->428188988,ExpressionUUID->"cb512d7f-48b6-49d8-9efd-448f40104742"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "91349292-d898-451a-b3a1-de4ec86340e5"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->130908940,ExpressionUUID->"91e5c24a-fcce-46d3-8544-4f1db0096d7a"],

Cell["\<\
For a Fermion with Void vacuum, it is as simple as the Bosonic case.\
\>", "ExampleText",
 CellID->2489740,ExpressionUUID->"1a5a5550-fda9-4a12-b6c4-9ee9f5ad3f4f"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Fermion", ",", "d"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1042870887,ExpressionUUID->"33344226-399f-4dbf-bb7f-b9bb8c4735bb"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"dd", "=", 
  RowBox[{
   RowBox[{"d", "[", "Up", "]"}], "**", 
   RowBox[{"d", "[", "Down", "]"}]}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1916954642,ExpressionUUID->"a9c5426c-7045-449b-883e-465156de18df"],

Cell[BoxData[
 InterpretationBox[
  TemplateBox[{
    TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
      InterpretationBox[
       SubscriptBox["d", 
        TemplateBox[{",", "\",\"", "\"\[UpArrow]\""}, "RowWithSeparators"]], 
       $CellContext`d[Plus[1]/2]], 
      InterpretationBox[
       SubscriptBox["d", 
        TemplateBox[{",", "\",\"", "\"\[DownArrow]\""}, "RowWithSeparators"]], 
       $CellContext`d[(-1)/2]]}, "RowWithSeparators"]},
   "RowDefault"],
  Q3`Multiply[
   $CellContext`d[
    Rational[1, 2]], 
   $CellContext`d[
    Rational[-1, 2]]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1213022651,ExpressionUUID->"118d8356-4eaa-47aa-89e8-f89257e865dc"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"dd", "**", 
  RowBox[{"Dagger", "[", "dd", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"VacuumExpectation", "[", 
  RowBox[{"dd", " ", "**", " ", 
   RowBox[{"Dagger", "[", "dd", "]"}]}], "]"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1244370327,ExpressionUUID->"17e5c413-0037-417c-a44f-73b9b175e376"],

Cell[BoxData[
 RowBox[{"1", "-", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"d", 
          
          TemplateBox[{",", "\",\"", "\"\[DownArrow]\""}, 
           "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`d[(-1)/2]]], 
       InterpretationBox[
        SubscriptBox["d", 
         TemplateBox[{",", "\",\"", "\"\[DownArrow]\""}, 
          "RowWithSeparators"]], 
        $CellContext`d[(-1)/2]]}, "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[
     $CellContext`d[
      Rational[-1, 2]]], 
    $CellContext`d[
     Rational[-1, 2]]]], "-", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"d", 
          TemplateBox[{",", "\",\"", "\"\[UpArrow]\""}, "RowWithSeparators"], 
          
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`d[1/2]]], 
       InterpretationBox[
        SubscriptBox["d", 
         TemplateBox[{",", "\",\"", "\"\[UpArrow]\""}, 
          "RowWithSeparators"]], 
        $CellContext`d[Plus[1]/2]]}, "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[
     $CellContext`d[
      Rational[1, 2]]], 
    $CellContext`d[
     Rational[1, 2]]]], "+", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"d", 
          
          TemplateBox[{",", "\",\"", "\"\[DownArrow]\""}, 
           "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`d[(-1)/2]]], 
       InterpretationBox[
        TemplateBox[{"d", 
          TemplateBox[{",", "\",\"", "\"\[UpArrow]\""}, "RowWithSeparators"], 
          
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`d[1/2]]], 
       InterpretationBox[
        SubscriptBox["d", 
         TemplateBox[{",", "\",\"", "\"\[UpArrow]\""}, 
          "RowWithSeparators"]], 
        $CellContext`d[Plus[1]/2]], 
       InterpretationBox[
        SubscriptBox["d", 
         TemplateBox[{",", "\",\"", "\"\[DownArrow]\""}, 
          "RowWithSeparators"]], 
        $CellContext`d[(-1)/2]]}, "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[
     $CellContext`d[
      Rational[-1, 2]]], 
    Q3`Dagger[
     $CellContext`d[
      Rational[1, 2]]], 
    $CellContext`d[
     Rational[1, 2]], 
    $CellContext`d[
     Rational[-1, 2]]]]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1485319708,ExpressionUUID->"55f0ebb7-7609-48a9-bbe1-a288fc243bc9"],

Cell[BoxData["1"], "Output",
 CellLabel->"Out[3]=",
 CellID->1418419628,ExpressionUUID->"d7a50c2c-9ab0-455d-8b5a-4dda45119b0b"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "4e3e7ee3-cc6f-409a-9b54-d54fd2c14d66"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->622693905,ExpressionUUID->"c63f394d-4438-412a-8bd2-1284d49508f4"],

Cell["\<\
The most complicated case is when the Vacuum is a Fermi sea (Vacuum == \
\"Sea\").\
\>", "ExampleText",
 CellID->1374766908,ExpressionUUID->"0aabdfa5-8aaf-4f10-b9e0-0309d0e25fd0"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Fermion", ",", "c", ",", "d", ",", " ", 
   RowBox[{"Vacuum", "\[Rule]", "\"\<Sea\>\""}]}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->930864683,ExpressionUUID->"60ba04f8-df3e-474b-b644-539b647128d7"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"k", "=", "1"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"nn", "=", 
  RowBox[{"MultiplyPower", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"c", "[", 
      RowBox[{"k", ",", "Up"}], "]"}], "**", 
     RowBox[{"Dagger", "[", 
      RowBox[{"c", "[", 
       RowBox[{"k", ",", "Up"}], "]"}], "]"}]}], ",", "2"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"VacuumExpectation", "[", "nn", "]"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->624358786,ExpressionUUID->"249699f5-fcd7-4986-9b44-b6ce8c09b54c"],

Cell[BoxData[
 RowBox[{"1", "-", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"c", 
          
          TemplateBox[{",", "\",\"", "1", "\"\[UpArrow]\""}, 
           "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[1, 1/2]]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "1", "\"\[UpArrow]\""}, 
          "RowWithSeparators"]], 
        $CellContext`c[1, Plus[1]/2]]}, "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[
     $CellContext`c[1, 
      Rational[1, 2]]], 
    $CellContext`c[1, 
     Rational[1, 2]]]]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1493083383,ExpressionUUID->"1fc06a29-8e3d-4e1a-93f3-2a81fd26ef8d"],

Cell[BoxData["1"], "Output",
 CellLabel->"Out[2]=",
 CellID->906002886,ExpressionUUID->"a47cda0d-e786-48c9-b6b5-b9d95cc4e6c3"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"k", "=", 
   RowBox[{"-", "1"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"nn", "=", 
  RowBox[{"MultiplyPower", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"c", "[", 
      RowBox[{"k", ",", "Up"}], "]"}], "**", 
     RowBox[{"Dagger", "[", 
      RowBox[{"c", "[", 
       RowBox[{"k", ",", "Up"}], "]"}], "]"}]}], ",", "2"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"VacuumExpectation", "[", "nn", "]"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1419121191,ExpressionUUID->"24dc5bd5-863c-43d9-9aae-8a762680bf00"],

Cell[BoxData[
 RowBox[{"1", "-", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", 
            RowBox[{"-", "1"}], "\"\[UpArrow]\""}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[-1, 1/2]]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", 
           RowBox[{"-", "1"}], "\"\[UpArrow]\""}, "RowWithSeparators"]], 
        $CellContext`c[-1, Plus[1]/2]]}, "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[
     $CellContext`c[-1, 
      Rational[1, 2]]], 
    $CellContext`c[-1, 
     Rational[1, 2]]]]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1420930842,ExpressionUUID->"2420a013-ec76-4878-b422-8dabf149962c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->1566506854,ExpressionUUID->"6abe44fa-452b-4bc4-962c-dab9453e4a1a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Clear", "[", "k", "]"}], "\[IndentingNewLine]", 
 RowBox[{"expr", "=", 
  RowBox[{
   RowBox[{
    RowBox[{"c", "[", 
     RowBox[{"i", ",", "s"}], "]"}], "^", "Dagger"}], "**", 
   RowBox[{"c", "[", 
    RowBox[{"j", ",", "s"}], "]"}], "**", 
   RowBox[{"c", "[", 
    RowBox[{"k", ",", "s"}], "]"}], "**", 
   RowBox[{
    RowBox[{"c", "[", 
     RowBox[{"l", ",", "s"}], "]"}], "^", 
    "Dagger"}]}]}], "\[IndentingNewLine]", 
 RowBox[{"VacuumExpectation", "[", "expr", "]"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1630700915,ExpressionUUID->"e2bb43c0-4590-44b0-b784-98941ebcacd1"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   TemplateBox[{
     RowBox[{"k", ",", "l"}]},
    "KroneckerDeltaSeq"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"c", 
           TemplateBox[{",", "\",\"", "i", "s"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]},
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         Q3`Dagger[
          $CellContext`c[$CellContext`i, $CellContext`s]]], 
        InterpretationBox[
         SubscriptBox["c", 
          TemplateBox[{",", "\",\"", "j", "s"}, "RowWithSeparators"]], 
         $CellContext`c[$CellContext`j, $CellContext`s]]}, 
       "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     Q3`Dagger[
      $CellContext`c[$CellContext`i, $CellContext`s]], 
     $CellContext`c[$CellContext`j, $CellContext`s]]]}], "-", 
  RowBox[{
   TemplateBox[{
     RowBox[{"j", ",", "l"}]},
    "KroneckerDeltaSeq"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"c", 
           TemplateBox[{",", "\",\"", "i", "s"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]},
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         Q3`Dagger[
          $CellContext`c[$CellContext`i, $CellContext`s]]], 
        InterpretationBox[
         SubscriptBox["c", 
          TemplateBox[{",", "\",\"", "k", "s"}, "RowWithSeparators"]], 
         $CellContext`c[$CellContext`k, $CellContext`s]]}, 
       "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     Q3`Dagger[
      $CellContext`c[$CellContext`i, $CellContext`s]], 
     $CellContext`c[$CellContext`k, $CellContext`s]]]}], "-", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", "i", "s"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`i, $CellContext`s]]], 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", "l", "s"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`l, $CellContext`s]]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "k", "s"}, "RowWithSeparators"]], 
        $CellContext`c[$CellContext`k, $CellContext`s]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "j", "s"}, "RowWithSeparators"]], 
        $CellContext`c[$CellContext`j, $CellContext`s]]}, 
      "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[
     $CellContext`c[$CellContext`i, $CellContext`s]], 
    Q3`Dagger[
     $CellContext`c[$CellContext`l, $CellContext`s]], 
    $CellContext`c[$CellContext`k, $CellContext`s], 
    $CellContext`c[$CellContext`j, $CellContext`s]]]}]], "Output",
 CellLabel->"Out[4]=",
 CellID->2132039604,ExpressionUUID->"cc653f2b-c81c-4605-afee-0043241268dd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"-", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"\"\[CupCap]\""}, "Bra"], 
         Bra[Q3`Vacuum]], 
        InterpretationBox[
         TemplateBox[{"c", 
           TemplateBox[{",", "\",\"", "i", "s"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]},
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         Q3`Dagger[
          $CellContext`c[$CellContext`i, $CellContext`s]]], 
        InterpretationBox[
         TemplateBox[{"c", 
           TemplateBox[{",", "\",\"", "l", "s"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]},
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         Q3`Dagger[
          $CellContext`c[$CellContext`l, $CellContext`s]]], 
        InterpretationBox[
         SubscriptBox["c", 
          TemplateBox[{",", "\",\"", "k", "s"}, "RowWithSeparators"]], 
         $CellContext`c[$CellContext`k, $CellContext`s]], 
        InterpretationBox[
         SubscriptBox["c", 
          TemplateBox[{",", "\",\"", "j", "s"}, "RowWithSeparators"]], 
         $CellContext`c[$CellContext`j, $CellContext`s]], 
        InterpretationBox[
         TemplateBox[{"\"\[CupCap]\""}, "Ket"], 
         Ket[Q3`Vacuum]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     Bra[Q3`Vacuum], 
     Q3`Dagger[
      $CellContext`c[$CellContext`i, $CellContext`s]], 
     Q3`Dagger[
      $CellContext`c[$CellContext`l, $CellContext`s]], 
     $CellContext`c[$CellContext`k, $CellContext`s], 
     $CellContext`c[$CellContext`j, $CellContext`s], 
     Ket[Q3`Vacuum]]]}], "-", 
  RowBox[{
   TemplateBox[{
     RowBox[{"i", ",", "k"}]},
    "KroneckerDeltaSeq"], " ", 
   TemplateBox[{
     RowBox[{"j", ",", "l"}]},
    "KroneckerDeltaSeq"], " ", 
   InterpretationBox[
    TagBox[
     RowBox[{"\[Theta]", "(", 
      RowBox[{"-", "i"}], ")"}],
     DisplayForm],
    UnitStep[-$CellContext`i]]}], "+", 
  RowBox[{
   TemplateBox[{
     RowBox[{"i", ",", "j"}]},
    "KroneckerDeltaSeq"], " ", 
   TemplateBox[{
     RowBox[{"k", ",", "l"}]},
    "KroneckerDeltaSeq"], " ", 
   InterpretationBox[
    TagBox[
     RowBox[{"\[Theta]", "(", 
      RowBox[{"-", "i"}], ")"}],
     DisplayForm],
    UnitStep[-$CellContext`i]]}]}]], "Output",
 CellLabel->"Out[4]=",
 CellID->277490586,ExpressionUUID->"adae625f-2f8a-4d36-9921-97d19d89ce32"]
}, Open  ]],

Cell["\<\
If operators have different Heads, then they are regarded different \
regardless of the Flavor indices.\
\>", "ExampleText",
 CellID->606257165,ExpressionUUID->"2d68a44f-3478-4b3e-82a0-9d4814b28a5a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"expr2", "=", 
  RowBox[{"Multiply", "[", 
   RowBox[{
    RowBox[{"Dagger", "[", 
     RowBox[{"c", "[", 
      RowBox[{"i", ",", " ", "s"}], "]"}], "]"}], ",", " ", 
    RowBox[{"Dagger", "[", 
     RowBox[{"c", "[", 
      RowBox[{"l", ",", " ", "s"}], "]"}], "]"}], ",", " ", 
    RowBox[{"c", "[", 
     RowBox[{"j", ",", " ", "s"}], "]"}], ",", " ", 
    RowBox[{"d", "[", 
     RowBox[{"k", ",", " ", "s"}], "]"}]}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"expr2a", "=", 
  RowBox[{"VacuumExpectation", "[", "expr2", "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1701750787,ExpressionUUID->"bb493cc9-d8a6-4ee4-916a-393fb4517029"],

Cell[BoxData[
 RowBox[{"-", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", "i", "s"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`i, $CellContext`s]]], 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", "l", "s"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`l, $CellContext`s]]], 
       InterpretationBox[
        SubscriptBox["d", 
         TemplateBox[{",", "\",\"", "k", "s"}, "RowWithSeparators"]], 
        $CellContext`d[$CellContext`k, $CellContext`s]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "j", "s"}, "RowWithSeparators"]], 
        $CellContext`c[$CellContext`j, $CellContext`s]]}, 
      "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[
     $CellContext`c[$CellContext`i, $CellContext`s]], 
    Q3`Dagger[
     $CellContext`c[$CellContext`l, $CellContext`s]], 
    $CellContext`d[$CellContext`k, $CellContext`s], 
    $CellContext`c[$CellContext`j, $CellContext`s]]]}]], "Output",
 CellLabel->"Out[5]=",
 CellID->1553264899,ExpressionUUID->"2f0637a8-96d0-4068-ac35-fd767cd2c298"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[5]=",
 CellID->911944561,ExpressionUUID->"823825c2-f83b-47c3-a5ff-be7394b69b88"]
}, Open  ]],

Cell["Further Examples", "ExampleText",
 CellID->1517812154,ExpressionUUID->"a29ccf02-ff36-4afc-bb83-8b976c4a346d"],

Cell[BoxData[{
 RowBox[{"Let", "[", 
  RowBox[{"Boson", ",", "a"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"Let", "[", 
  RowBox[{"Fermion", ",", "c"}], "]"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->2058113212,ExpressionUUID->"c8960f3a-026d-4005-8ddc-f5ef6912753b"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"expr", "=", 
  RowBox[{
   RowBox[{"a", "[", "1", "]"}], "**", 
   RowBox[{"Exp", "[", 
    RowBox[{"a", "[", "1", "]"}], "]"}], "**", 
   RowBox[{
    RowBox[{"c", "[", 
     RowBox[{"1", ",", "Up"}], "]"}], "^", 
    "Dagger"}]}]}], "\[IndentingNewLine]", 
 RowBox[{"expr", "**", 
  RowBox[{"VacuumState", "[", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"SurviveVacuum", "[", "expr", "]"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->1189651855,ExpressionUUID->"02534c32-d8e6-4e12-b0da-13fba72fb45a"],

Cell[BoxData[
 InterpretationBox[
  TemplateBox[{
    TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
       $CellContext`a[1]], 
      InterpretationBox[
       TemplateBox[{"c", 
         TemplateBox[{",", "\",\"", "1", "\"\[UpArrow]\""}, 
          "RowWithSeparators"], 
         TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
        "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
       Q3`Dagger[
        $CellContext`c[1, 1/2]]], 
      InterpretationBox[
       SuperscriptBox["\[ExponentialE]", 
        InterpretationBox[
         SubscriptBox["a", 
          TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
         $CellContext`a[1]]], 
       Q3`MultiplyExp[
        $CellContext`a[1]]]}, "RowWithSeparators"]},
   "RowDefault"],
  Q3`Multiply[
   $CellContext`a[1], 
   Q3`Dagger[
    $CellContext`c[1, 
     Rational[1, 2]]], 
   Q3`MultiplyExp[
    $CellContext`a[1]]]]], "Output",
 CellLabel->"Out[7]=",
 CellID->1646377443,ExpressionUUID->"4d807968-faa6-4398-b0ad-3888ce3f8e05"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[7]=",
 CellID->338892906,ExpressionUUID->"42c2920a-efb1-4e04-8ced-d6cbd217d37f"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[7]=",
 CellID->646439298,ExpressionUUID->"fee00a2b-f0d7-46f6-bd58-5802d0a35ee4"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"expr", "=", 
  RowBox[{
   RowBox[{"a", "[", "1", "]"}], "**", 
   RowBox[{"Exp", "[", 
    RowBox[{
     RowBox[{"MultiplyPower", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"a", "[", "1", "]"}], "^", "Dagger"}], ",", "3"}], "]"}], "+", 
     RowBox[{"a", "[", "1", "]"}]}], "]"}], "**", 
   RowBox[{
    RowBox[{"c", "[", "1", "]"}], "^", 
    "Dagger"}]}]}], "\[IndentingNewLine]", 
 RowBox[{"expr", "**", 
  RowBox[{"VacuumState", "[", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"SurviveVacuum", "[", "expr", "]"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->512660530,ExpressionUUID->"0cecf8e8-8a59-43f4-8c6a-3a3f66a3d699"],

Cell[BoxData[
 InterpretationBox[
  TemplateBox[{
    TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
      InterpretationBox[
       SubscriptBox["a", 
        TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
       $CellContext`a[1]], 
      InterpretationBox[
       TemplateBox[{"c", 
         TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
         TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
        "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
       Q3`Dagger[
        $CellContext`c[1]]], 
      InterpretationBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{
          InterpretationBox[
           SubscriptBox["a", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"]], 
           $CellContext`a[1]], "+", 
          InterpretationBox[
           TemplateBox[{
             TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
               InterpretationBox[
                TemplateBox[{"a", 
                  TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
                  
                  TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, 
                   "RowWithSeparators"]}, "Subsuperscript", SyntaxForm -> 
                 SubsuperscriptBox], 
                Q3`Dagger[
                 $CellContext`a[1]]], 
               InterpretationBox[
                TemplateBox[{"a", 
                  TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
                  
                  TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, 
                   "RowWithSeparators"]}, "Subsuperscript", SyntaxForm -> 
                 SubsuperscriptBox], 
                Q3`Dagger[
                 $CellContext`a[1]]], 
               InterpretationBox[
                TemplateBox[{"a", 
                  TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
                  
                  TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, 
                   "RowWithSeparators"]}, "Subsuperscript", SyntaxForm -> 
                 SubsuperscriptBox], 
                Q3`Dagger[
                 $CellContext`a[1]]]}, "RowWithSeparators"]}, "RowDefault"], 
           Q3`Multiply[
            Q3`Dagger[
             $CellContext`a[1]], 
            Q3`Dagger[
             $CellContext`a[1]], 
            Q3`Dagger[
             $CellContext`a[1]]]]}]], 
       Q3`MultiplyExp[$CellContext`a[1] + Q3`Multiply[
          Q3`Dagger[
           $CellContext`a[1]], 
          Q3`Dagger[
           $CellContext`a[1]], 
          Q3`Dagger[
           $CellContext`a[1]]]]]}, "RowWithSeparators"]},
   "RowDefault"],
  Q3`Multiply[
   $CellContext`a[1], 
   Q3`Dagger[
    $CellContext`c[1]], 
   Q3`MultiplyExp[$CellContext`a[1] + Q3`Multiply[
      Q3`Dagger[
       $CellContext`a[1]], 
      Q3`Dagger[
       $CellContext`a[1]], 
      Q3`Dagger[
       $CellContext`a[1]]]]]]], "Output",
 CellLabel->"Out[8]=",
 CellID->2040371474,ExpressionUUID->"3579edee-e1d4-4829-9219-ce5a3a528bd9"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->1504488222,ExpressionUUID->"fc38a327-28a3-49c0-a65a-629efa557cc4"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->1461087376,ExpressionUUID->"b96f5847-d7ae-40c5-97bd-c747ca0703d0"]
}, Open  ]],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Fermion", ",", "c", ",", "d", ",", 
   RowBox[{"Vacuum", "\[Rule]", "\"\<Sea\>\""}]}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[9]:=",
 CellID->640720002,ExpressionUUID->"8afe24c8-6fc5-4877-9fdb-6b27aec77739"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"expr1", "=", 
  RowBox[{"Multiply", "[", 
   RowBox[{
    RowBox[{"Dagger", "[", 
     RowBox[{"c", "[", 
      RowBox[{"i", ",", " ", "s"}], "]"}], "]"}], ",", " ", 
    RowBox[{"Dagger", "[", 
     RowBox[{"c", "[", 
      RowBox[{"l", ",", " ", "s"}], "]"}], "]"}], ",", " ", 
    RowBox[{"c", "[", 
     RowBox[{"j", ",", " ", "s"}], "]"}], ",", " ", 
    RowBox[{"c", "[", 
     RowBox[{"k", ",", " ", "s"}], "]"}]}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"expr2", "=", 
  RowBox[{
   RowBox[{"c", "[", 
    RowBox[{"i", ",", "Up"}], "]"}], "**", 
   RowBox[{"VacuumExpectation", "[", "expr1", "]"}], "**", 
   RowBox[{
    RowBox[{"c", "[", 
     RowBox[{"j", ",", "Down"}], "]"}], "^", 
    "Dagger"}]}]}], "\[IndentingNewLine]", 
 RowBox[{"expr3", "=", 
  RowBox[{"Dagger", "[", "expr2", "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[10]:=",
 CellID->1098067556,ExpressionUUID->"b6edfb90-a935-4657-a7d4-184dd3ac76f1"],

Cell[BoxData[
 RowBox[{"-", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", "i", "s"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`i, $CellContext`s]]], 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", "l", "s"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`l, $CellContext`s]]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "k", "s"}, "RowWithSeparators"]], 
        $CellContext`c[$CellContext`k, $CellContext`s]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "j", "s"}, "RowWithSeparators"]], 
        $CellContext`c[$CellContext`j, $CellContext`s]]}, 
      "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[
     $CellContext`c[$CellContext`i, $CellContext`s]], 
    Q3`Dagger[
     $CellContext`c[$CellContext`l, $CellContext`s]], 
    $CellContext`c[$CellContext`k, $CellContext`s], 
    $CellContext`c[$CellContext`j, $CellContext`s]]]}]], "Output",
 CellLabel->"Out[10]=",
 CellID->279273307,ExpressionUUID->"b0d8e7a4-9448-468b-94f7-20ee41a2d5dc"],

Cell[BoxData[
 RowBox[{
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"c", 
          
          TemplateBox[{",", "\",\"", "j", "\"\[DownArrow]\""}, 
           "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`j, (-1)/2]]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "i", "\"\[UpArrow]\""}, 
          "RowWithSeparators"]], 
        $CellContext`c[$CellContext`i, Plus[1]/2]]}, "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[
     $CellContext`c[$CellContext`j, 
      Rational[-1, 2]]], 
    $CellContext`c[$CellContext`i, 
     Rational[1, 2]]]], " ", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"\"\[CupCap]\""}, "Bra"], 
        Bra[Q3`Vacuum]], 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", "i", "s"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`i, $CellContext`s]]], 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", "l", "s"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`l, $CellContext`s]]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "k", "s"}, "RowWithSeparators"]], 
        $CellContext`c[$CellContext`k, $CellContext`s]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "j", "s"}, "RowWithSeparators"]], 
        $CellContext`c[$CellContext`j, $CellContext`s]], 
       InterpretationBox[
        TemplateBox[{"\"\[CupCap]\""}, "Ket"], 
        Ket[Q3`Vacuum]]}, "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Bra[Q3`Vacuum], 
    Q3`Dagger[
     $CellContext`c[$CellContext`i, $CellContext`s]], 
    Q3`Dagger[
     $CellContext`c[$CellContext`l, $CellContext`s]], 
    $CellContext`c[$CellContext`k, $CellContext`s], 
    $CellContext`c[$CellContext`j, $CellContext`s], 
    Ket[Q3`Vacuum]]]}]], "Output",
 CellLabel->"Out[10]=",
 CellID->1494702054,ExpressionUUID->"1387f88b-ea87-409d-9416-03d67cde0f0c"],

Cell[BoxData[
 RowBox[{
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"c", 
          
          TemplateBox[{",", "\",\"", "i", "\"\[UpArrow]\""}, 
           "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`i, 1/2]]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "j", "\"\[DownArrow]\""}, 
          "RowWithSeparators"]], 
        $CellContext`c[$CellContext`j, (-1)/2]]}, "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Q3`Dagger[
     $CellContext`c[$CellContext`i, 
      Rational[1, 2]]], 
    $CellContext`c[$CellContext`j, 
     Rational[-1, 2]]]], " ", 
  InterpretationBox[
   TemplateBox[{
     TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
       InterpretationBox[
        TemplateBox[{"\"\[CupCap]\""}, "Bra"], 
        Bra[Q3`Vacuum]], 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", "j", "s"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`j, $CellContext`s]]], 
       InterpretationBox[
        TemplateBox[{"c", 
          TemplateBox[{",", "\",\"", "k", "s"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"\[Dagger]\""}, "RowWithSeparators"]}, 
         "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
        Q3`Dagger[
         $CellContext`c[$CellContext`k, $CellContext`s]]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "l", "s"}, "RowWithSeparators"]], 
        $CellContext`c[$CellContext`l, $CellContext`s]], 
       InterpretationBox[
        SubscriptBox["c", 
         TemplateBox[{",", "\",\"", "i", "s"}, "RowWithSeparators"]], 
        $CellContext`c[$CellContext`i, $CellContext`s]], 
       InterpretationBox[
        TemplateBox[{"\"\[CupCap]\""}, "Ket"], 
        Ket[Q3`Vacuum]]}, "RowWithSeparators"]},
    "RowDefault"],
   Q3`Multiply[
    Bra[Q3`Vacuum], 
    Q3`Dagger[
     $CellContext`c[$CellContext`j, $CellContext`s]], 
    Q3`Dagger[
     $CellContext`c[$CellContext`k, $CellContext`s]], 
    $CellContext`c[$CellContext`l, $CellContext`s], 
    $CellContext`c[$CellContext`i, $CellContext`s], 
    Ket[Q3`Vacuum]]]}]], "Output",
 CellLabel->"Out[10]=",
 CellID->193718972,ExpressionUUID->"ccbc8cfa-19c3-488b-b120-cfe1b0378bd4"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, 
  Closed]]]],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedFunction.png"]],
     ImageSizeCache->{50., {26.47265625, 33.52734375}}], GridBox[{
      {
       StyleBox[
        RowBox[{"See", " ", "Also"}], "SeeAlsoSection"]},
      {Cell[TextData[{
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Vacuum"]], "paclet:Q3/ref/Vacuum", "Q3 Package Symbol"},
          
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "126288cd-52ed-46ce-b0bc-15f63a7edba2"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["SurviveVacuum"]], "paclet:Q3/ref/SurviveVacuum", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "fbf51ac6-492d-482d-ba5d-06bf7eea65cb"]
       }], "SeeAlso",ExpressionUUID->"9275ed5f-10f6-43f0-badc-4ce5f8fa76dc"]}
     }]}
  }]], "SeeAlsoSection",ExpressionUUID->"f4df248a-e196-4371-b0b9-\
2d7310cfe04b"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedTutorial.png"]],
     ImageSizeCache->{50., {26.47265625, 33.52734375}}], GridBox[{
      {
       StyleBox["Tutorials", "TutorialsSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Many-Body Systems with Q3"]], 
           "paclet:Q3/tutorial/QuantumManyBodySystems"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "028295c4-ddff-492c-831c-968f63772705"]}]}
     }]}
  }]], "TutorialsSection",ExpressionUUID->"2b5f22fa-dcbb-42fa-bcdf-\
608ffc83b8cc"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, "RelatedGuide.png"]],
     ImageSizeCache->{50., {26.47265625, 33.52734375}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Related", " ", "Guides"}], "MoreAboutSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Many-Body Systems"]], 
           "paclet:Q3/guide/QuantumManyBodySystems"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "e4d77575-103e-407d-b276-7b20b0b268cf"]}]}
     }]}
  }]], "MoreAboutSection",ExpressionUUID->"314a0112-5b60-4c68-8020-\
068e9ab1fa73"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{29},
     "Spacer1"], GridBox[{
      {
       RowBox[{
        TemplateBox[{17},
         "Spacer1"], 
        StyleBox[
         RowBox[{"Related", " ", "Links"}], "RelatedLinksSection"]}]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "Mahn-Soo Choi (2022)"}]]]], 
             "https://doi.org/10.1007/978-3-030-91214-7"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "9a7ecff7-abf6-43bb-8f94-c331c683c939"]}]],ExpressionUUID->
         "b314beb4-ad51-484d-96fb-fa560513128c"],
        ", A Quantum Computation Workbook (Springer)."
       }], "RelatedLinks",ExpressionUUID->
        "81edff69-35ad-40b7-b66f-5a11dd1535d4"]}
     }]}
  }]], "RelatedLinksSection",ExpressionUUID->"1c27222c-9fbe-4511-97a5-\
5a3797285481"],

Cell[" ", "FooterCell",ExpressionUUID->"ca4d63c7-8f1e-4d6b-893c-0b3cbccc557f"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{900, 830},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"VacuumExpectation",
TaggingRules->{
 "ModificationHighlight" -> False, "ColorType" -> "", "LinkTrails" -> "", 
  "ExampleCounter" -> 1, 
  "Openers" -> {
   "PrimaryExamplesSection" -> Open, "ExampleSection" -> {"0" -> Open}, 
    "AllOptsTable" -> Closed, "NotesSection" -> Closed}, "NewStyles" -> True, 
  "CitationPopupData" -> $Failed, "ShowCitation" -> False, "HasOptions" -> 
  True, "RootCaptions" -> "", "HeaderCoreAreaLink" -> {}, 
  "Metadata" -> {
   "built" -> "{2024, 8, 10, 5, 57, 21.810353}", 
    "history" -> {"12", "14.1", "", ""}, "context" -> "Q3`", 
    "keywords" -> {"vacuum expectation value"}, "specialkeywords" -> {}, 
    "tutorialcollectionlinks" -> {}, "index" -> True, "label" -> "Q3 Symbol", 
    "language" -> "en", "paclet" -> "Q3", "status" -> "None", "summary" -> 
    "VacuumExpectation[expr] returns the vacuum expectation value of expr.", 
    "synonyms" -> {}, "tabletags" -> {}, "title" -> "VacuumExpectation", 
    "titlemodifier" -> "", "metadescription" -> "", "windowtitle" -> 
    "VacuumExpectation", "type" -> "Symbol", "uri" -> 
    "Q3/ref/VacuumExpectation"}},
CellContext->"Global`",
FrontEndVersion->"14.1 for Mac OS X ARM (64-bit) (July 16, 2024)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> FrontEnd`FileName[{"Wolfram"}, "Reference.nb"]]], 
   Cell[
    StyleData["Input"], CellContext -> "Global`"], 
   Cell[
    StyleData["Output"], CellContext -> "Global`"]}, Visible -> False, 
  FrontEndVersion -> "14.1 for Mac OS X ARM (64-bit) (July 16, 2024)", 
  StyleDefinitions -> "Default.nb"],
ExpressionUUID->"d106a139-88cf-4a3f-87c9-7a9563a1e595"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "PrimaryExamplesSection"->{
  Cell[12609, 333, 1440, 38, 34, "PrimaryExamplesSection",ExpressionUUID->"be030d2e-059b-40fe-a070-2852313cb7ba",
   CellTags->"PrimaryExamplesSection",
   CellID->126842721]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"PrimaryExamplesSection", 62670, 1752}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[585, 21, 6884, 171, 50, "AnchorBarGrid",ExpressionUUID->"1ada737a-ab27-4090-8f68-90c79988fe96",
 CellID->1],
Cell[7472, 194, 85, 0, 22, "ContextNameCell",ExpressionUUID->"e2b354f2-61ca-4f41-9eb6-88886510f80d"],
Cell[CellGroupData[{
Cell[7582, 198, 1180, 31, 57, "ObjectNameGrid",ExpressionUUID->"68832fc5-7dbc-4b24-be57-27d625e39f30"],
Cell[8765, 231, 638, 14, 106, "Usage",ExpressionUUID->"8af184e1-3f83-4739-850f-1b14e28bfc3f"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9440, 250, 1916, 48, 34, "NotesSection",ExpressionUUID->"edd18e94-5e2b-491b-9c87-c4ec7e94086c",
 CellGroupingRules->{"SectionGrouping", 50},
 CellID->872314970],
Cell[11359, 300, 108, 0, 70, "Notes",ExpressionUUID->"a4df8a81-633a-472a-ac57-058a96dceb6f"],
Cell[11470, 302, 1012, 25, 70, "3ColumnTableMod",ExpressionUUID->"6aed0f13-a03f-4ff4-aa28-77adc7f9bdf0"]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],
Cell[CellGroupData[{
Cell[12609, 333, 1440, 38, 34, "PrimaryExamplesSection",ExpressionUUID->"be030d2e-059b-40fe-a070-2852313cb7ba",
 CellTags->"PrimaryExamplesSection",
 CellID->126842721],
Cell[14052, 373, 192, 3, 29, "Input",ExpressionUUID->"024f336f-3a03-42dd-bc5a-9d1aa92e53dd",
 CellID->1927565408],
Cell[CellGroupData[{
Cell[14269, 380, 1419, 37, 29, "ExampleSection",ExpressionUUID->"3f11f1f3-e9f7-42cd-bdc3-1e4f57aeba56",
 CellID->1541834023],
Cell[15691, 419, 145, 1, 37, "ExampleText",ExpressionUUID->"11c85158-82c9-4684-9226-b956f0778321",
 CellID->814487388],
Cell[15839, 422, 219, 5, 28, "Input",ExpressionUUID->"9c360511-f4dd-40d3-98d7-810cd5606150",
 CellID->1028764138],
Cell[CellGroupData[{
Cell[16083, 431, 562, 13, 81, "Input",ExpressionUUID->"92e20fc4-378e-4808-8023-c18c47b71ec2",
 CellID->1048025369],
Cell[16648, 446, 346, 8, 36, "Output",ExpressionUUID->"cae99f96-3798-4db7-a4fa-54d91d6b94d6",
 CellID->707697795],
Cell[16997, 456, 2658, 69, 36, "Output",ExpressionUUID->"efee3c3b-8584-40a9-903a-b4ebf9b2c3e2",
 CellID->1512403479],
Cell[19658, 527, 127, 2, 36, "Output",ExpressionUUID->"a0be4dce-1010-4dfe-b0e2-211b017c7924",
 CellID->1348825661],
Cell[19788, 531, 126, 2, 36, "Output",ExpressionUUID->"3b324b38-c09a-4801-9ee7-9e4f5d08e536",
 CellID->875506695]
}, Open  ]],
Cell[CellGroupData[{
Cell[19951, 538, 910, 24, 98, "Input",ExpressionUUID->"54e1487c-200b-492f-8003-0eabb64047ec",
 CellID->1245538910],
Cell[20864, 564, 856, 22, 36, "Output",ExpressionUUID->"89e0bff0-935a-4b5a-851f-e9be50d79010",
 CellID->496087249],
Cell[21723, 588, 127, 2, 36, "Output",ExpressionUUID->"aa894134-bdc9-4967-bd73-166981b795e3",
 CellID->1206876289],
Cell[21853, 592, 126, 2, 36, "Output",ExpressionUUID->"071b747f-43ca-4ecd-a49b-2c453cfe14ce",
 CellID->986743308],
Cell[21982, 596, 639, 22, 36, "Output",ExpressionUUID->"d817f2df-4f31-423b-83ff-18bb3ccfe249",
 CellID->1326055422],
Cell[22624, 620, 126, 2, 36, "Output",ExpressionUUID->"cb512d7f-48b6-49d8-9efd-448f40104742",
 CellID->428188988]
}, Open  ]],
Cell[CellGroupData[{
Cell[22787, 627, 242, 5, 70, "ExampleDelimiter",ExpressionUUID->"91e5c24a-fcce-46d3-8544-4f1db0096d7a",
 CellID->130908940],
Cell[23032, 634, 172, 3, 70, "ExampleText",ExpressionUUID->"1a5a5550-fda9-4a12-b6c4-9ee9f5ad3f4f",
 CellID->2489740],
Cell[23207, 639, 211, 5, 70, "Input",ExpressionUUID->"33344226-399f-4dbf-bb7f-b9bb8c4735bb",
 CellID->1042870887],
Cell[CellGroupData[{
Cell[23443, 648, 262, 7, 70, "Input",ExpressionUUID->"a9c5426c-7045-449b-883e-465156de18df",
 CellID->1916954642],
Cell[23708, 657, 690, 19, 36, "Output",ExpressionUUID->"118d8356-4eaa-47aa-89e8-f89257e865dc",
 CellID->1213022651]
}, Open  ]],
Cell[CellGroupData[{
Cell[24435, 681, 354, 8, 70, "Input",ExpressionUUID->"17e5c413-0037-417c-a44f-73b9b175e376",
 CellID->1244370327],
Cell[24792, 691, 3153, 92, 36, "Output",ExpressionUUID->"55f0ebb7-7609-48a9-bbe1-a288fc243bc9",
 CellID->1485319708],
Cell[27948, 785, 127, 2, 36, "Output",ExpressionUUID->"d7a50c2c-9ab0-455d-8b5a-4dda45119b0b",
 CellID->1418419628]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[28124, 793, 242, 5, 70, "ExampleDelimiter",ExpressionUUID->"c63f394d-4438-412a-8bd2-1284d49508f4",
 CellID->622693905],
Cell[28369, 800, 189, 4, 70, "ExampleText",ExpressionUUID->"0aabdfa5-8aaf-4f10-b9e0-0309d0e25fd0",
 CellID->1374766908],
Cell[28561, 806, 280, 6, 70, "Input",ExpressionUUID->"60ba04f8-df3e-474b-b644-539b647128d7",
 CellID->930864683],
Cell[CellGroupData[{
Cell[28866, 816, 567, 16, 70, "Input",ExpressionUUID->"249699f5-fcd7-4986-9b44-b6ce8c09b54c",
 CellID->624358786],
Cell[29436, 834, 959, 27, 38, "Output",ExpressionUUID->"1fc06a29-8e3d-4e1a-93f3-2a81fd26ef8d",
 CellID->1493083383],
Cell[30398, 863, 126, 2, 36, "Output",ExpressionUUID->"a47cda0d-e786-48c9-b6b5-b9d95cc4e6c3",
 CellID->906002886]
}, Open  ]],
Cell[CellGroupData[{
Cell[30561, 870, 587, 17, 70, "Input",ExpressionUUID->"24dc5bd5-863c-43d9-9aae-8a762680bf00",
 CellID->1419121191],
Cell[31151, 889, 984, 26, 38, "Output",ExpressionUUID->"2420a013-ec76-4878-b422-8dabf149962c",
 CellID->1420930842],
Cell[32138, 917, 127, 2, 36, "Output",ExpressionUUID->"6abe44fa-452b-4bc4-962c-dab9453e4a1a",
 CellID->1566506854]
}, Open  ]],
Cell[CellGroupData[{
Cell[32302, 924, 642, 18, 70, "Input",ExpressionUUID->"e2bb43c0-4590-44b0-b784-98941ebcacd1",
 CellID->1630700915],
Cell[32947, 944, 3470, 85, 37, "Output",ExpressionUUID->"cc653f2b-c81c-4605-afee-0043241268dd",
 CellID->2132039604],
Cell[36420, 1031, 2549, 71, 38, "Output",ExpressionUUID->"adae625f-2f8a-4d36-9921-97d19d89ce32",
 CellID->277490586]
}, Open  ]],
Cell[38984, 1105, 209, 4, 70, "ExampleText",ExpressionUUID->"2d68a44f-3478-4b3e-82a0-9d4814b28a5a",
 CellID->606257165],
Cell[CellGroupData[{
Cell[39218, 1113, 696, 18, 70, "Input",ExpressionUUID->"bb493cc9-d8a6-4ee4-916a-393fb4517029",
 CellID->1701750787],
Cell[39917, 1133, 1605, 37, 37, "Output",ExpressionUUID->"2f0637a8-96d0-4068-ac35-fd767cd2c298",
 CellID->1553264899],
Cell[41525, 1172, 126, 2, 36, "Output",ExpressionUUID->"823825c2-f83b-47c3-a5ff-be7394b69b88",
 CellID->911944561]
}, Open  ]],
Cell[41666, 1177, 115, 1, 70, "ExampleText",ExpressionUUID->"a29ccf02-ff36-4afc-bb83-8b976c4a346d",
 CellID->1517812154],
Cell[41784, 1180, 297, 7, 70, "Input",ExpressionUUID->"c8960f3a-026d-4005-8ddc-f5ef6912753b",
 CellID->2058113212],
Cell[CellGroupData[{
Cell[42106, 1191, 553, 15, 70, "Input",ExpressionUUID->"02534c32-d8e6-4e12-b0da-13fba72fb45a",
 CellID->1189651855],
Cell[42662, 1208, 1160, 33, 38, "Output",ExpressionUUID->"4d807968-faa6-4398-b0ad-3888ce3f8e05",
 CellID->1646377443],
Cell[43825, 1243, 126, 2, 36, "Output",ExpressionUUID->"42c2920a-efb1-4e04-8ced-d6cbd217d37f",
 CellID->338892906],
Cell[43954, 1247, 126, 2, 36, "Output",ExpressionUUID->"fee00a2b-f0d7-46f6-bd58-5802d0a35ee4",
 CellID->646439298]
}, Open  ]],
Cell[CellGroupData[{
Cell[44117, 1254, 688, 19, 70, "Input",ExpressionUUID->"0cecf8e8-8a59-43f4-8c6a-3a3f66a3d699",
 CellID->512660530],
Cell[44808, 1275, 3020, 79, 38, "Output",ExpressionUUID->"3579edee-e1d4-4829-9219-ce5a3a528bd9",
 CellID->2040371474],
Cell[47831, 1356, 127, 2, 36, "Output",ExpressionUUID->"fc38a327-28a3-49c0-a65a-629efa557cc4",
 CellID->1504488222],
Cell[47961, 1360, 127, 2, 36, "Output",ExpressionUUID->"b96f5847-d7ae-40c5-97bd-c747ca0703d0",
 CellID->1461087376]
}, Open  ]],
Cell[48103, 1365, 275, 6, 70, "Input",ExpressionUUID->"8afe24c8-6fc5-4877-9fdb-6b27aec77739",
 CellID->640720002],
Cell[CellGroupData[{
Cell[48403, 1375, 971, 27, 70, "Input",ExpressionUUID->"b6edfb90-a935-4657-a7d4-184dd3ac76f1",
 CellID->1098067556],
Cell[49377, 1404, 1605, 37, 37, "Output",ExpressionUUID->"b0d8e7a4-9448-468b-94f7-20ee41a2d5dc",
 CellID->279273307],
Cell[50985, 1443, 2714, 68, 38, "Output",ExpressionUUID->"1387f88b-ea87-409d-9416-03d67cde0f0c",
 CellID->1494702054],
Cell[53702, 1513, 2707, 68, 38, "Output",ExpressionUUID->"ccbc8cfa-19c3-488b-b120-cfe1b0378bd4",
 CellID->193718972]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, Closed]]]],
Cell[56663, 1591, 1348, 36, 70, "SeeAlsoSection",ExpressionUUID->"f4df248a-e196-4371-b0b9-2d7310cfe04b"],
Cell[58014, 1629, 743, 19, 70, "TutorialsSection",ExpressionUUID->"2b5f22fa-dcbb-42fa-bcdf-608ffc83b8cc"],
Cell[58760, 1650, 753, 19, 70, "MoreAboutSection",ExpressionUUID->"314a0112-5b60-4c68-8020-068e9ab1fa73"],
Cell[59516, 1671, 1166, 34, 70, "RelatedLinksSection",ExpressionUUID->"1c27222c-9fbe-4511-97a5-5a3797285481"],
Cell[60685, 1707, 78, 0, 70, "FooterCell",ExpressionUUID->"ca4d63c7-8f1e-4d6b-893c-0b3cbccc557f"]
}
]
*)

(* End of internal cache information *)

