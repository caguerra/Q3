(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    188217,       5093]
NotebookOptionsPosition[    165315,       4625]
NotebookOutlinePosition[    168085,       4688]
CellTagsIndexPosition[    167998,       4683]
WindowTitle->ControlledGate
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[GridBox[{
   {GridBox[{
      {
       ItemBox[Cell[BoxData[
         RowBox[{
          TemplateBox[{12},
           "Spacer1"], Cell["Q3 SYMBOL", "PacletNameCell",
           TextAlignment->Center,ExpressionUUID->
           "a3873f7e-b70d-4491-8a01-309cb8e0ac80"], 
          TemplateBox[{8},
           "Spacer1"]}]],
         TextAlignment->Center,ExpressionUUID->
         "ce223801-483a-4b8c-99d2-7de55813be32"],
        Background->RGBColor[0.490196, 0.576471, 0.690196],
        ItemSize->Full], ""}
     },
     GridBoxAlignment->{"Rows" -> {{Center}}},
     GridBoxItemSize->{"Columns" -> {Full, 
         Scaled[0.02]}, "Rows" -> {{2.5}}}], Cell[TextData[{
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "See Also",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "bdb86460-5a2f-4a65-a7de-8eb43cdfda92"]
         }],ExpressionUUID->"76854421-886b-4119-a771-74d7fa91c54d"],
         StripOnInput->False],{
        "\"QuantumCircuit\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/QuantumCircuit"], "\"CNOT\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/CNOT"], "\"CZ\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/CZ"], "\"ControlledPower\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/ControlledPower"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"SeeAlso"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "f3a38844-01fd-4ec6-94c0-5525ea8cb301"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Related Guides",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "72ad3167-91ef-4340-97e3-ee1e5df2f838"]
         }],ExpressionUUID->"218317e8-eb60-4656-a89b-6104165441dc"],
         StripOnInput->False],{
        "\"Q3: Symbolic Quantum Simulation\"" :> 
         Documentation`HelpLookup["paclet:Q3/guide/Q3"], 
         "\"Quantum Information Systems\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/guide/QuantumInformationSystems"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"MoreAbout"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "1befe4c6-b5eb-4934-91f4-b654df804a40"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Tech Notes",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "67e8c147-50e8-47e1-9285-fffe553cc80f"]
         }],ExpressionUUID->"6167cd55-e615-4248-99cd-a3968a96c802"],
         StripOnInput->False],{
        "\"Two-Qubit Gates\"" :> 
         Documentation`HelpLookup["paclet:Q3/tutorial/TwoQubitGates"], 
         "\"Quantum Computation: Overview\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuantumComputationOverview"], 
         "\"Multi-Control Unitary Gates\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/MultiControlUnitaryGates"], 
         "\"Quantum Information Systems with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuantumInformationSystems"], 
         "\"Quick Quantum Computing with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuickQuantumComputingWithQ3"], 
         "\"Q3: Quick Start\"" :> 
         Documentation`HelpLookup["paclet:Q3/tutorial/Q3QuickStart"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"Tutorials"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "eed7a57e-1e0a-4240-a592-5fa607f6c1ff"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "URL",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "3ddef9eb-30e8-4894-a745-39b849d63fd1"]
         }],ExpressionUUID->"7d6bff29-10b7-45a7-98ee-dac0836db991"],
         StripOnInput->False],{
        "\"Q3/ref/ControlledGate\"" :> None, 
         "\"Copy Wolfram Documentation Center URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{Cell["Q3/ref/ControlledGate"]}, Visible -> False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], Delimiter, 
         "\"Copy web URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{
               Cell[BoxData[
                 MakeBoxes[
                  Hyperlink[
                   "http://reference.wolfram.com/language/Q3/ref/\
ControlledGate.html"], StandardForm]], "Input", TextClipboardType -> 
                 "PlainText"]}, Visible -> False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], 
         "\"Go to web URL\"" :> 
         FrontEndExecute[{
           NotebookLocate[{
             URL[If[TrueQ[DocumentationBuild`Make`Private`wsmlinkQ$50104], 
                 "http://reference.wolfram.com/system-modeler/", 
                 "http://reference.wolfram.com/language/"] <> 
               "Q3/ref/ControlledGate" <> ".html"], None}]}]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"URLMenu"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "ad2ea953-2131-42db-8d3b-c089a317a23b"]
    }], "AnchorBar",
     CacheGraphics->False,ExpressionUUID->
     "d01cc7cb-666a-4cb6-84c3-7b2105b8f350"]}
  }]], "AnchorBarGrid",
 CellID->1,ExpressionUUID->"f898a7d8-bf72-46bd-b656-9d94dd5dde68"],

Cell["Q3`", "ContextNameCell",ExpressionUUID->"1760f243-67f7-4ffe-abfd-8d75f5037cbd"],

Cell[CellGroupData[{

Cell[BoxData[GridBox[{
   {Cell[TextData[{
     Cell[
     "ControlledGate", "ObjectName",ExpressionUUID->
      "c054e2e4-f839-4d64-8a5d-0095132086d7"],
     Cell[BoxData[
      TemplateBox[{8},
       "Spacer1"]],ExpressionUUID->"b98d4fc7-a07e-4dd4-8d6d-f8e561828530"],
     Cell[BoxData[
     ""], "ObjectNameTranslation",ExpressionUUID->
      "04680329-5d3e-47ff-8afa-d4e7555e6d09"]
    }],ExpressionUUID->"b3667ef2-c23c-47b4-a66d-ed057ce4f2d5"], Cell[BoxData[
     StyleBox[
      GraphicsBox[InsetBox[
        StyleBox["\<\"UPDATED IN 13.3\"\>",
         StripOnInput->False,
         FontFamily->"Source Sans Pro",
         FontSize->17,
         FontWeight->"Bold",
         FontSlant->"Italic",
         FontColor->RGBColor[0.968627, 0.466667, 0]], {Right, Center}, {
        Right, Center}],
       AxesStyle->Large,
       FrameStyle->Large,
       ImageSize->{125, 24},
       PlotRangePadding->Scaled[0.025]], "NewInGraphic",
      StripOnInput->False]],
     Deployed->True,
     Magnification->1,ExpressionUUID->
     "f2ab6ec3-cec7-4e7d-ace4-4410a73802e0"]}
  }]], "ObjectNameGrid",
 CacheGraphics->False,ExpressionUUID->"5fc54a19-b98d-4f9e-832e-4a9ea9f3d57d"],

Cell[BoxData[GridBox[{
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["1", "TR"]], ",", 
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["2", "TR"]], ",", "\[Ellipsis]"}], "}"}], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "ed6091f2-789e-4e16-80b4-b4a6f3552fde"],
     "\[LineSeparator]represents a multi-control multi-target unitary gate \
with control qubits ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["2", "TR"]], ",", "\[Ellipsis]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "6cadba9d-edc5-4276-aee3-5fa04bf64cdf"],
     " and unitary operator ",
     Cell[BoxData[
      StyleBox["op", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "8ee3f6d6-8a73-48bf-8179-b53e054040de"],
     " acting on the target qubits."
    }],ExpressionUUID->"2a3f02a1-c694-419b-ad1a-4415f596951d"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["c", "TI"], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "53adea69-f801-455e-abb8-16b32131ca7e"],
     "\[LineSeparator]is equivalent to ",
     Cell[BoxData[
      RowBox[{"ControlledGate", "[", 
       RowBox[{
        RowBox[{"{", 
         StyleBox["c", "TI"], "}"}], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "d357255c-2eeb-4377-931f-5f217e25facd"],
     "."
    }],ExpressionUUID->"16f1912b-f0b7-47c0-8f99-7c24481dcf15"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], "\[Rule]", 
           SubscriptBox[
            StyleBox["v", "TI"], 
            StyleBox["1", "TR"]]}], ",", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], "\[Rule]", 
           SubscriptBox[
            StyleBox["v", "TI"], 
            StyleBox["2", "TR"]]}], ",", 
          StyleBox["\[Ellipsis]", "TR"]}], "}"}], ",", 
        StyleBox["op", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "b09b6a3f-d688-49b1-99a3-91ea7e1b46a5"],
     "\[LineSeparator]represents a variation of the controlled-unitary gate, \
where operator op operates when the control qubits ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["2", "TR"]], ",", 
       StyleBox["\[Ellipsis]", "TR"]}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "2310f164-a81a-4784-a6ab-2709653326a2"],
     " take the logical values ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["v", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["v", "TI"], 
        StyleBox["2", "TR"]], ",", 
       StyleBox["\[Ellipsis]", "TR"]}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "a6ffb301-0e2e-46e1-b197-503b6fa2af86"],
     ", respectively."
    }],ExpressionUUID->"c9eea197-129a-4733-acf6-3177c14d28b0"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         StyleBox["c", "TI"], "\[Rule]", 
         StyleBox["v", "TI"]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "d86cd33e-8306-4bf7-b19d-c997d3553c3d"],
     "\[LineSeparator]is automatically converted to ",
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          StyleBox["c", "TI"], "\[Rule]", 
          StyleBox["v", "TI"]}], "}"}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "9aec9511-350c-4a88-b422-e563486f8f23"],
     "."
    }],ExpressionUUID->"9bdfe8c7-a383-4fe1-8ad1-22ac55c2d43a"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], ",", 
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
         StyleBox["v", "TI"]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "9aab7ad2-9658-407d-b45f-4c5b991dbe5b"],
     "\[LineSeparator]is automatically converted to ",
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], "\[Rule]", 
           StyleBox["v", "TI"]}], ",", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], "\[Rule]", 
           StyleBox["v", "TI"]}], ",", 
          StyleBox["\[Ellipsis]", "TR"]}], "}"}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "34c56e45-5606-4801-b488-dee38d51c466"],
     "."
    }],ExpressionUUID->"98962a05-1a6b-4b62-86f6-6498ed6f420b"]}
  }]], "Usage",ExpressionUUID->"d5ff7cc3-66ef-4e35-94b3-54814ac31901"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[Cell[BoxData[
 ButtonBox[Cell[TextData[{
   Cell[BoxData[
    DynamicBox[ToBoxes[
      If[
       MatchQ[
        CurrentValue[
         EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, 
         Closed], 
        Alternatives[Open, True]], 
       Style[
        Graphics[{
          Thickness[0.18], 
          RGBColor[0.8509803921568627, 0.396078431372549, 0], 
          Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
         PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
        0.68 Inherited], 
       Rotate[
        Style[
         Graphics[{
           Thickness[0.18], 
           RGBColor[0.8509803921568627, 0.396078431372549, 0], 
           Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
          PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
         0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
     ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
    ExpressionUUID->"98764b74-3a87-4c9b-b8cc-088bb03d3077"],
   Cell[BoxData[
    TemplateBox[{1},
     "Spacer1"]],ExpressionUUID->"2c63ddb5-5c3c-4ad1-9825-b45fd9f137b8"],
   "Details and Options"
  }], "NotesFrameText",ExpressionUUID->"b5448be0-7ba0-46ae-a476-e0c0002adafc"],
  Appearance->{Automatic, None, "Normal", Automatic},
  BaseStyle->None,
  ButtonFunction:>(FrontEndExecute[{
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], All, ButtonCell], 
     FrontEndToken["OpenCloseGroup"], 
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], After, CellContents]}]& ),
  Evaluator->None,
  Method->
   "Preemptive"]],ExpressionUUID->"f518bdae-6a1e-4411-8128-de3fb433687f"]], \
"NotesSection",
 WholeCellGroupOpener->True,
 CellGroupingRules->{"SectionGrouping", 50},
 CacheGraphics->False,
 CellID->856133428,ExpressionUUID->"f124ee49-831c-4b76-8753-712781255e0f"],

Cell[TextData[{
 "If ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "c98b9a46-feb6-4ba7-a8a8-ab3b872f97b7"],
 " is an operator of the form ",
 Cell[BoxData[
  RowBox[{"T", "[", 
   RowBox[{
    StyleBox["j", "TI"], ",", "\[Ellipsis]", ",", 
    StyleBox["k", "TI"]}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "05aae188-4af2-4990-a81d-c0b9e229e77e"],
 ", it is regarded to act on qubit ",
 Cell[BoxData[
  RowBox[{"T", "[", 
   RowBox[{
    StyleBox["j", "TI"], ",", "\[Ellipsis]", ",", 
    TemplateBox[{
      Cell[
       TextData["$"]], "paclet:ref/$"},
     "RefLink",
     BaseStyle->{"InlineFormula"}]}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "10b48ff7-db96-422b-8dcd-4c1bff11568c"],
 "."
}], "Notes",
 CellID->1702748548,ExpressionUUID->"6670571f-a860-473b-8687-f6f46ba1239e"],

Cell[TextData[{
 "Otherwise, ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "3a9f4e08-33fc-4faf-ab14-88e14b91ce7b"],
 " acts on the qubits involved in ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "a6b56d2a-22a7-4c38-b63b-3af38b9985c8"],
 "."
}], "Notes",
 CellID->491054349,ExpressionUUID->"b5b55ba7-a0fb-44e0-bb13-0b0996739ed8"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Elaborate"]], "paclet:Q3/ref/Elaborate", "Q3 Package Symbol"},
    
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", 
   RowBox[{"ControlledGate", "[", "\[Ellipsis]", "]"}], "]"}]], 
  "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "daa599c0-117e-4c49-95ee-304c285389f3"],
 " expands ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
     "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", "\[Ellipsis]", "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "828489bb-87fb-4442-b78a-4722537ee079"],
 " explicitly in terms of the Pauli operators."
}], "Notes",
 CellID->2019652723,ExpressionUUID->"c557efd5-d85f-4cc4-b770-219c017d4918"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Matrix"]], "paclet:Q3/ref/Matrix", "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", 
   RowBox[{"ControlledGate", "[", "\[Ellipsis]", "]"}], "]"}]], 
  "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "fdca150e-98f1-4441-b8af-786d8da3f8fa"],
 " gives the matrix representation of ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
     "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", "\[Ellipsis]", "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "04494634-1771-437a-b381-cc82717d4175"],
 "."
}], "Notes",
 CellID->384437925,ExpressionUUID->"50ad500f-0874-4a12-9f31-91f2c18b8ae0"],

Cell[TextData[{
 "[EXPERIMENTAL] ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Expand"]], "paclet:ref/Expand"},
    "RefLink",
    BaseStyle->{"InlineFormula"}], "[", 
   RowBox[{"ControlledGate", "[", 
    StyleBox["\[Ellipsis]", "TR"], "]"}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "d81cda39-ef0e-46b7-b738-97e7348d0bef"],
 " decomposes the controlled-unitary gate as a product of single-qubit \
rotations and ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "e516f1a5-2755-4871-a296-f1e0a4805be5"],
 " gates."
}], "Notes",
 CellID->1895961038,ExpressionUUID->"2682e52e-904d-4522-a9cf-bc88e79d7a8b"]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "PrimaryExamplesSection"}, Open], 
      Alternatives[True, Open]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "3fdfe08e-d6b2-403c-b3a2-d0207e9324f2"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"82dc0fe4-6b62-42c7-8e39-8165b9449632"],
 "Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(9)", "ExampleCount",ExpressionUUID->
  "ce4b8a6c-1ca0-4e24-a799-034c2d9f74e9"]
}], "PrimaryExamplesSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellTags->"PrimaryExamplesSection",
 CellID->894089496,ExpressionUUID->"edf4098b-09d4-4e13-9cd5-d880fb1d7a56"],

Cell[BoxData[
 RowBox[{"Needs", "[", "\"\<Q3`\>\"", "]"}]], "Input", "ExampleInitialization",
 CellLabel->"In[1]:=",
 CellID->851865642,ExpressionUUID->"c8cb564b-093f-410b-879f-6a85825f367e"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "be0766d0-dd2d-4d50-8f55-941640bf5685"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"e76850b0-f8d8-460b-9266-754ef244c404"],
 "Basic Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(4)", "ExampleCount",ExpressionUUID->
  "6ed73dc1-28ce-41a4-9ed6-173e510e5aa0"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1019081213,ExpressionUUID->"1d1e4a44-aab1-4177-b335-ebfb187fcc78"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1403695601,ExpressionUUID->"baec094e-fa94-458f-9046-ee0c3e6ee972"],

Cell["\<\
This is a controlled-U operator. Usually it remains unevaluated.\
\>", "ExampleText",
 CellID->493202586,ExpressionUUID->"9524945c-8d35-41be-8523-2f18acd83b35"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1804103712,ExpressionUUID->"4354d585-bd81-45a3-b780-b1a61094b1d1"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "1"},
        "RowWithSeparators"]],
      $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]]}], "]"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->814499400,ExpressionUUID->"e0869a83-10b1-418e-b18b-728318efca88"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "[", "op", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1699357571,ExpressionUUID->"5ba2af87-c4be-4b41-a5fd-b3b44b3ef910"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]]}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->2096109642,ExpressionUUID->"fa505388-4920-45a7-a3da-bb5121a2e925"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Matrix", "[", "op", "]"}], "//", "MatrixForm"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->388513540,ExpressionUUID->"b6408331-aaa1-473a-bccf-fc54a169fc74"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", "0"},
     {"0", "1", "0", "0"},
     {"0", "0", "0", "1"},
     {"0", "0", "1", "0"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {4, 4}, 0, {
     1, {{0, 1, 2, 4, 6}, {{1}, {2}, {4}, {3}, {3}, {4}}}, {1, 1, 1, 0, 1, 
      0}}]]]]], "Output",
 CellLabel->"Out[4]//MatrixForm=",
 CellID->604196739,ExpressionUUID->"fff251e6-bb50-419c-9eb0-c25e13358e3f"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "**", 
  RowBox[{"S", "[", 
   RowBox[{"2", ",", "3"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->227378000,ExpressionUUID->"0abb59b9-83fe-458c-8b32-b579e5a49f9e"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 2]]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 2]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]]}]}]], "Output",
 CellLabel->"Out[5]=",
 CellID->1053279401,ExpressionUUID->"77cc99b4-4eea-46c6-a16d-c166036371a1"]
}, Open  ]],

Cell[TextData[{
 Cell[BoxData["ControlledGate"], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "a2935b62-0c3a-4394-9fb6-0c6d7abe5bc7"],
 " can be evaluated explicitly by means of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Elaborate"]], "paclet:Q3/ref/Elaborate", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "93377911-6925-4359-b76e-7afcc8f6f60b"],
 "."
}], "ExampleText",
 CellID->976135211,ExpressionUUID->"4d12dc5f-6f09-4488-9d46-16551fee856b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}], "//", "Elaborate"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->1713072528,ExpressionUUID->"1fd9e696-7166-4688-86e9-4504b2175f03"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]]}]}]], "Output",
 CellLabel->"Out[6]=",
 CellID->10716038,ExpressionUUID->"d35b8cd8-8390-42ba-9b96-a31d171ead82"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "4e19097e-8654-44c7-a522-4a8c7067f5c2"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1117862758,ExpressionUUID->"cd828da9-3fdc-4262-8d12-ecd6569ef8c5"],

Cell["\<\
In the quantum circuit model, a controlled-U gate is depicted by the \
following quantum circuit element.\
\>", "ExampleText",
 CellID->66695600,ExpressionUUID->"ca28bcd1-bf07-4451-9475-4dafb4cb4161"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"QuantumCircuit", "[", "op", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->287461810,ExpressionUUID->"c0c8bbd8-760d-45cd-bd92-82204740f18d"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1}, 
    $CellContext`S[2, 1]]]]], "Output",
 CellLabel->"Out[1]=",
 CellID->484522264,ExpressionUUID->"2a3e38ff-0685-4af7-a4f2-c45633ee0e31"]
}, Open  ]],

Cell[TextData[{
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "d1068799-8183-429f-8c97-8ddb6249fee9"],
 " is a special case of controlled-U gate."
}], "ExampleText",
 CellID->376653752,ExpressionUUID->"da43cfae-26c7-45ab-b5a8-64cd13062d7a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"x1", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", 
       RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{"x2", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"CNOT", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", "2", "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"x1", "-", "x2"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1100337461,ExpressionUUID->"b8e560b0-5ee7-46ff-986c-77f663066168"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], " ", 
  RowBox[{"(", 
   RowBox[{"1", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[2, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1037273568,ExpressionUUID->"9d851301-f587-4c54-9c12-6731735ebbca"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], " ", 
  RowBox[{"(", 
   RowBox[{"1", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[2, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->184611030,ExpressionUUID->"ab303d9a-49b5-429a-b922-89ec6109b397"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[2]=",
 CellID->1791194942,ExpressionUUID->"afaaefa8-f2a8-449a-825d-27d57417ca0c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"x1", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"S", "[", "1", "]"}], ",", 
        RowBox[{"S", "[", "2", "]"}]}], "}"}], ",", 
      RowBox[{"S", "[", 
       RowBox[{"3", ",", "1"}], "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{"x2", "=", 
  RowBox[{
   RowBox[{"Elaborate", "[", 
    RowBox[{"Toffoli", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", "2", "]"}], ",", 
      RowBox[{"S", "[", "3", "]"}]}], "]"}], "]"}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"x1", "-", "x2"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1391490451,ExpressionUUID->"f4bac1ae-dcac-4fd1-9421-86d08672cdbe"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "4"], " ", 
  RowBox[{"(", 
   RowBox[{"3", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[3, 1]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[2, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[3, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1967075000,ExpressionUUID->"bcc5906b-f1c8-461f-87d0-2d2b25b6980c"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "4"], " ", 
  RowBox[{"(", 
   RowBox[{"3", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[3, 1]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[2, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[3, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->118779435,ExpressionUUID->"68ad9bf2-0eba-40eb-97dc-31f1e0241596"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->1313655982,ExpressionUUID->"7254b5bf-e1fa-4efc-b5c4-556d978746de"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "ea9c162d-d97e-4b64-bc87-5ed94ee673ca"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1893551625,ExpressionUUID->"bd94aa2c-2585-4944-b0bc-f60cbcf8b6f5"],

Cell["\<\
Here the controlled-unitary gate has the unitary operator acting on multiple \
qubits.\
\>", "ExampleText",
 CellID->1781572424,ExpressionUUID->"284f2e77-8cfb-496b-b8b1-736b5b941864"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"U", "=", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{"\[Phi]", ",", 
     RowBox[{"S", "[", 
      RowBox[{"2", ",", "1"}], "]"}]}], "]"}], "**", 
   RowBox[{"Rotation", "[", 
    RowBox[{"\[Theta]", ",", 
     RowBox[{"S", "[", 
      RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->907561411,ExpressionUUID->"583dcfd0-4cf8-46b6-8cbe-94a3e01d9163"],

Cell[BoxData[
 InterpretationBox[
  TemplateBox[{
    TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
      InterpretationBox[
       TagBox[
        RowBox[{"Exp", 
          RowBox[{"(", 
            RowBox[{
              RowBox[{"-", 
                FractionBox["1", "2"]}], " ", "\[ImaginaryI]", " ", "\[Phi]", 
              " ", 
              InterpretationBox[
               TemplateBox[{"S", 
                 TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
                 TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
                "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
               $CellContext`S[2, 1]]}], ")"}]}], DisplayForm], 
       Q3`Rotation[$CellContext`\[Phi], {1, 0, 0}, 
        $CellContext`S[2, Q3`$]]], 
      InterpretationBox[
       TagBox[
        RowBox[{"Exp", 
          RowBox[{"(", 
            RowBox[{
              RowBox[{"-", 
                FractionBox["1", "2"]}], " ", "\[ImaginaryI]", " ", 
              "\[Theta]", " ", 
              InterpretationBox[
               TemplateBox[{"S", 
                 TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
                 TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
                "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
               $CellContext`S[3, 2]]}], ")"}]}], DisplayForm], 
       Q3`Rotation[$CellContext`\[Theta], {0, 1, 0}, 
        $CellContext`S[3, Q3`$]]]}, "RowWithSeparators"]},
   "RowDefault"],
  Q3`Multiply[
   Q3`Rotation[$CellContext`\[Phi], {1, 0, 0}, 
    $CellContext`S[2, Q3`$]], 
   Q3`Rotation[$CellContext`\[Theta], {0, 1, 0}, 
    $CellContext`S[3, Q3`$]]]]], "Output",
 CellLabel->"Out[1]=",
 CellID->1640719626,ExpressionUUID->"df45cb47-ebe9-4dd1-89c0-c4bf441dec49"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", "U", ",", 
     RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}], "]"}]}]], "Input",\

 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1556697824,ExpressionUUID->"46924dc0-913b-40f5-b5cd-df985efa14c8"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], NCache[{1, Rational[-5, 2]}, {1, -2.5}], NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1}, 
    Q3`Multiply[
     Q3`Rotation[$CellContext`\[Phi], {1, 0, 0}, 
      $CellContext`S[2, Q3`$]], 
     Q3`Rotation[$CellContext`\[Theta], {0, 1, 0}, 
      $CellContext`S[3, Q3`$]]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1099398866,ExpressionUUID->"104f9b7b-bbee-4803-9216-11761f457d27"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "[", "qc", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1323430295,ExpressionUUID->"b2a0b1b0-c7e3-44dc-8231-b876c785a591"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "2"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "+", 
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["\[Theta]", "2"], "]"}], " ", 
      RowBox[{"Cos", "[", 
       FractionBox["\[Phi]", "2"], "]"}]}]}], ")"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["\[Theta]", "2"], "]"}], " ", 
      RowBox[{"Cos", "[", 
       FractionBox["\[Phi]", "2"], "]"}]}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1402074068,ExpressionUUID->"81a02dfc-3092-4ed2-a56a-bcac76fa28c0"]
}, Open  ]],

Cell["It is more common to have multiple controlled qubits.", "ExampleText",
 CellID->796325451,ExpressionUUID->"0e0f5ac2-9b70-4103-b701-63939a8dcb99"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "@", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2"}], "}"}]}], ",", 
     RowBox[{"Rotation", "[", 
      RowBox[{"\[Phi]", ",", 
       RowBox[{"S", "[", 
        RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1688856124,ExpressionUUID->"abe1d9c9-0aa5-4e31-a4b2-f82660b96e38"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     DiskBox[{1, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1}, 
    Q3`Rotation[$CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`S[3, Q3`$]]]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->234328639,ExpressionUUID->"f241e59d-95b2-47f6-b036-9ad5dd3cb880"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "@", "qc"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->97902928,ExpressionUUID->"4a0cfe0c-14fc-46cd-b599-f70dc62d5171"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"3", "+", 
     RowBox[{"Cos", "[", 
      FractionBox["\[Phi]", "2"], "]"}]}], ")"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[5]=",
 CellID->1388527483,ExpressionUUID->"a7e05b36-8322-4190-a685-e762468d43e7"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "03b762e6-68a0-4bcc-a130-c9f96dae9999"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1616593910,ExpressionUUID->"c5d5c2aa-530a-42aa-8e24-c242c882ad43"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"S", "@", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}]}], "->", 
      RowBox[{"{", 
       RowBox[{"1", ",", "0"}], "}"}]}], ",", 
     RowBox[{"Rotation", "[", 
      RowBox[{"\[Phi]", ",", 
       RowBox[{"S", "[", 
        RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->423687378,ExpressionUUID->"a9a43fc4-d44f-4f85-8721-857e10ee0185"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[GrayLevel[0]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0}, 
    Q3`Rotation[$CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`S[3, Q3`$]]]]]], "Output",
 CellLabel->"Out[1]=",
 CellID->1304075793,ExpressionUUID->"3d8159c7-468c-424a-ba3c-1ffb70f04077"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}], ",", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "@", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}]}], ",", 
      RowBox[{"Rotation", "[", 
       RowBox[{"\[Phi]", ",", 
        RowBox[{"S", "[", 
         RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->446009393,ExpressionUUID->"fa23c664-5d68-4e25-80d2-cdacb9156739"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {4, -1}}, {{0, -2}, {4, -2}}, {{0, -3}, {4, -3}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}}], 
     DiskBox[{2, -1}, 0.09], DiskBox[{2, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{1.6, -3.4}, {2.4, -2.6}]}, 
     LineBox[{{1.6, -3.4}, {2.4, -3.4}, {2.4, -2.6}, {1.6, -2.6}, {
      1.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"R\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {2, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -2.4}, {3.4, -1.6}]}, 
     LineBox[{{2.6, -2.4}, {3.4, -2.4}, {3.4, -1.6}, {2.6, -1.6}, {
      2.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {3, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->190.79999999999998`,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   $CellContext`S[2, 1], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1}, 
    Q3`Rotation[$CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`S[3, Q3`$]]], 
   $CellContext`S[2, 1]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1315750011,ExpressionUUID->"eb1b4f61-34d1-4b09-9491-a5b266eeddf6"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"new", "-", "qc"}], "//", "Elaborate"}], "//", 
  "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->2072193516,ExpressionUUID->"8a007ce5-4573-43b3-83ca-0d657091182b"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->970196462,ExpressionUUID->"d1cdb6b5-4f08-4972-884d-8040c150274c"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"410e2c8d-2c50-4cd4-9ef9-36fc44c0c092"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"9867057a-87ab-4ab1-a732-ebca994cc4e0"],
 "Scope",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "5581e8a2-c958-42bc-a658-1b5dd4823f13"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1293636265,ExpressionUUID->"c6a1ee95-4584-46fe-8ad7-afbb17347d6f"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "ExampleSubsection", "0"}, Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"7ab28b30-ef83-4261-a5d0-c2daea9982c9"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"9fd02a75-5f5f-4c7c-b13d-f1d5fb9b6e27"],
 "Expand",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "4a903aa4-a204-4028-b729-8d52b18a8be6"]
}], "ExampleSubsection", "ExampleSubsection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1965812958,ExpressionUUID->"7043ef27-640d-4de7-b716-4c76bfd09208"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Expand"]], "paclet:ref/Expand"},
    "RefLink",
    BaseStyle->{"InlineFormula"}], "[", 
   RowBox[{
    TemplateBox[{
      Cell[
       TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
      "Q3 Package Symbol"},
     "PackageLink",
     BaseStyle->"InlineFormula"], "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        SubscriptBox[
         StyleBox["c", "TI"], 
         StyleBox["1", "TR"]], ",", 
        SubscriptBox[
         StyleBox["c", "TI"], 
         StyleBox["2", "TR"]], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        SubscriptBox[
         StyleBox["v", "TI"], 
         StyleBox["1", "TR"]], ",", 
        SubscriptBox[
         StyleBox["v", "TI"], 
         StyleBox["2", "TR"]], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "}"}]}], ",", " ", 
     StyleBox["op", "TI"]}], "]"}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "8725e564-d8fd-426e-a8f2-0cce9488b2cb"],
 " decomposes the controlled-unitary gate into a product of the CNOT and \
single-qubit rotations. Note that this ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "201ffca5-21c5-4ab4-be41-7225305cc75c"],
 " feature of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "ae898680-4e51-4cdf-9984-13eef18f7ed1"],
 " is still experimental (as of Q3 v2.11.2)."
}], "ExampleText",
 CellID->227879916,ExpressionUUID->"0c7aa4f3-37dd-4e0e-bd2e-59186a7adb07"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1801264145,ExpressionUUID->"71fb8275-6431-42f8-9f10-5c98244a4ac5"],

Cell["Consider a single-qubit unitary gate.", "ExampleText",
 CellID->1033495556,ExpressionUUID->"db782b97-aa82-4e66-be39-ffc32793b9ad"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{
   RowBox[{"Exp", "[", 
    RowBox[{
     RowBox[{"-", "I"}], "*", 
     RowBox[{"Pi", "/", "4"}]}], "]"}], "*", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Pi", "/", "3"}], ",", 
       RowBox[{"Pi", "/", "2"}], ",", 
       RowBox[{"Pi", "/", "6"}]}], "}"}], ",", 
     RowBox[{"S", "[", "2", "]"}]}], "]"}]}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1096870451,ExpressionUUID->"f44cb84c-1617-45fd-859e-accf2ebd223c"],

Cell[BoxData[
 RowBox[{
  SuperscriptBox["\[ExponentialE]", 
   RowBox[{"-", 
    FractionBox[
     RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]}]], " ", 
  RowBox[{"EulerRotation", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      FractionBox["\[Pi]", "3"], ",", 
      FractionBox["\[Pi]", "2"], ",", 
      FractionBox["\[Pi]", "6"]}], "}"}], ",", 
    InterpretationBox[
     SubscriptBox["S", 
      TemplateBox[{",", "\",\"", "2"},
       "RowWithSeparators"]],
     $CellContext`S[2, Q3`$]]}], "]"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1496693170,ExpressionUUID->"e265c850-a820-4d6a-8791-cf54d371e984"]
}, Open  ]],

Cell["Here is the matrix representation of the above gate.", "ExampleText",
 CellID->1955102746,ExpressionUUID->"76a7ca47-1fd7-419c-a51d-f57fe562138a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mat", "=", 
   RowBox[{
    RowBox[{"Matrix", "[", "op", "]"}], "//", "SimplifyThrough"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"mat", "//", "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->2059470547,ExpressionUUID->"c86952bf-725b-4ec0-9a9f-b5365bfb06f9"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"-", 
       FractionBox["\[ImaginaryI]", 
        SqrtBox["2"]]}], 
      FractionBox[
       RowBox[{"\[ImaginaryI]", " ", 
        RowBox[{"(", 
         RowBox[{"\[ImaginaryI]", "+", 
          SqrtBox["3"]}], ")"}]}], 
       RowBox[{"2", " ", 
        SqrtBox["2"]}]]},
     {
      FractionBox[
       RowBox[{
        RowBox[{"-", "\[ImaginaryI]"}], "+", 
        SqrtBox["3"]}], 
       RowBox[{"2", " ", 
        SqrtBox["2"]}]], 
      FractionBox["1", 
       SqrtBox["2"]]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {2, 2}, 0, {
     1, {{0, 2, 4}, {{1}, {2}, {2}, {1}}}, {
      Complex[0, -1] 
       2^Rational[-1, 2], (Complex[0, Rational[1, 2]] 2^Rational[-1, 2]) (
        Complex[0, 1] + 3^Rational[1, 2]), 2^
       Rational[-1, 2], (Rational[1, 2] 2^Rational[-1, 2]) (Complex[0, -1] + 
        3^Rational[1, 2])}}]]]]], "Output",
 CellLabel->"Out[3]//MatrixForm=",
 CellID->45538633,ExpressionUUID->"46d6c047-ce80-49fa-b9b9-6a3afc4abcdb"]
}, Open  ]],

Cell["\<\
Now, consider a controlled-unitary gate with the above gate acting on the \
target qubit.\
\>", "ExampleText",
 CellID->1600123813,ExpressionUUID->"789492ba-4f63-4904-8043-eee75f8aa180"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"cu", "=", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", "op", ",", 
     RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", "cu", "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->8884588,ExpressionUUID->"61eb7453-9767-442e-b8e4-fd7b76180024"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1}, E^(Complex[0, 
        Rational[-1, 4]] Pi) 
    Q3`EulerRotation[{
      Rational[1, 3] Pi, Rational[1, 2] Pi, Rational[1, 6] Pi}, 
      $CellContext`S[2, Q3`$]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->1553946096,ExpressionUUID->"26f4a27b-5d39-4e73-bb1f-c0f39675e9aa"]
}, Open  ]],

Cell["\<\
Decompose the controlled-unitary gate above into a product of single-qubit \
rotations and CNOT gate.\
\>", "ExampleText",
 CellID->777355164,ExpressionUUID->"bf3616c6-abdb-4186-be16-48d519cda364"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Expand", "[", "cu", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1865987295,ExpressionUUID->"7e24ce5d-ecc7-4235-9aea-c752d184cfad"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {7, -1}}, {{0, -2}, {7, -2}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"C\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}}], 
     DiskBox[{2, -1}, 0.09], {CircleBox[{2, -2}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -2}, {2.2666666666666666`, -2}}, {{
         2, -2.2666666666666666`}, {2, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -2.4}, {3.4, -1.6}]}, 
     LineBox[{{2.6, -2.4}, {3.4, -2.4}, {3.4, -1.6}, {2.6, -1.6}, {
      2.6, -2.4}}], InsetBox[
      StyleBox["\<\"B\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {3, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{4, -1}, {4, -2}}], 
     DiskBox[{4, -1}, 0.09], {CircleBox[{4, -2}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -2}, {4.266666666666667, -2}}, {{
         4, -2.2666666666666666`}, {4, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{4.6, -2.4}, {5.4, -1.6}]}, 
     LineBox[{{4.6, -2.4}, {5.4, -2.4}, {5.4, -1.6}, {4.6, -1.6}, {
      4.6, -2.4}}], InsetBox[
      StyleBox["\<\"A\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {5, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -1.4}, {6.4, -0.6}]}, 
     LineBox[{{5.6, -1.4}, {6.4, -1.4}, {6.4, -0.6}, {5.6, -0.6}, {
      5.6, -1.4}}], InsetBox[
      StyleBox[
       TemplateBox[{"\"Z\"", 
         RowBox[{"-", 
           FractionBox["\[Pi]", "4"]}]},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {6, -1}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->298.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[-
    ArcTan[((-2^
           Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) - 
          2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])) + 
        2^Rational[-1, 2] ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])))^(-1) ((-2^
          Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
           Rational[1, 4] 3^Rational[1, 2]) + 
         2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])) + 
       2^Rational[-1, 2] (
         2^Rational[-1, 2] (Rational[-1, 4] + 
           Rational[1, 4] 3^Rational[1, 2]) + 
         2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])))], {0, 0, 1}, 
    $CellContext`S[2, Q3`$], "Label" -> "C"], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{
    0, -ArcSin[((Rational[-1, 4] + Rational[1, 4] 3^Rational[1, 2])^2 + (
          Rational[1, 4] + Rational[1, 4] 3^Rational[1, 2])^2)^
       Rational[1, 2]], Rational[-1, 4] Pi}, 
    $CellContext`S[2, Q3`$], "Label" -> "B"], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{
    Rational[1, 4] Pi + 
     ArcTan[((-2^
            Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
             Rational[1, 4] 3^Rational[1, 2]) - 
           2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])) + 
         2^Rational[-1, 2] ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
             Rational[1, 4] 3^Rational[1, 2]) + 
           2^Rational[-1, 2] (Rational[1, 4] + 
             Rational[1, 4] 3^Rational[1, 2])))^(-1) ((-2^
           Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])) + 
        2^Rational[-1, 2] (
          2^Rational[-1, 2] (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])))], 
     ArcSin[((Rational[-1, 4] + Rational[1, 4] 3^Rational[1, 2])^2 + (
         Rational[1, 4] + Rational[1, 4] 3^Rational[1, 2])^2)^Rational[1, 2]],
      0}, 
    $CellContext`S[2, Q3`$], "Label" -> "A"], 
   Q3`Phase[Rational[-1, 4] Pi, 
    $CellContext`S[1, 3]]]]], "Output",
 CellLabel->"Out[5]=",
 CellID->1882559549,ExpressionUUID->"4414e819-a0ea-4e88-b1a4-eb1d02d65456"]
}, Open  ]],

Cell["Represent the decomposition in a quantum circuit.", "ExampleText",
 CellID->1490385628,ExpressionUUID->"c2eca4a6-5908-4d48-9fdb-eada5eb2ce3e"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "[", "cu", "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->984160605,ExpressionUUID->"9999c13b-9a3d-4b6e-877f-7602761e86eb"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {7, -1}}, {{0, -2}, {7, -2}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"C\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}}], 
     DiskBox[{2, -1}, 0.09], {CircleBox[{2, -2}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -2}, {2.2666666666666666`, -2}}, {{
         2, -2.2666666666666666`}, {2, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -2.4}, {3.4, -1.6}]}, 
     LineBox[{{2.6, -2.4}, {3.4, -2.4}, {3.4, -1.6}, {2.6, -1.6}, {
      2.6, -2.4}}], InsetBox[
      StyleBox["\<\"B\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {3, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{4, -1}, {4, -2}}], 
     DiskBox[{4, -1}, 0.09], {CircleBox[{4, -2}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -2}, {4.266666666666667, -2}}, {{
         4, -2.2666666666666666`}, {4, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{4.6, -2.4}, {5.4, -1.6}]}, 
     LineBox[{{4.6, -2.4}, {5.4, -2.4}, {5.4, -1.6}, {4.6, -1.6}, {
      4.6, -2.4}}], InsetBox[
      StyleBox["\<\"A\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {5, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -1.4}, {6.4, -0.6}]}, 
     LineBox[{{5.6, -1.4}, {6.4, -1.4}, {6.4, -0.6}, {5.6, -0.6}, {
      5.6, -1.4}}], InsetBox[
      StyleBox[
       TemplateBox[{"\"Z\"", 
         RowBox[{"-", 
           FractionBox["\[Pi]", "4"]}]},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {6, -1}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->298.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[-
    ArcTan[((-2^
           Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) - 
          2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])) + 
        2^Rational[-1, 2] ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])))^(-1) ((-2^
          Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
           Rational[1, 4] 3^Rational[1, 2]) + 
         2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])) + 
       2^Rational[-1, 2] (
         2^Rational[-1, 2] (Rational[-1, 4] + 
           Rational[1, 4] 3^Rational[1, 2]) + 
         2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])))], {0, 0, 1}, 
    $CellContext`S[2, Q3`$], "Label" -> "C"], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{
    0, -ArcSin[((Rational[-1, 4] + Rational[1, 4] 3^Rational[1, 2])^2 + (
          Rational[1, 4] + Rational[1, 4] 3^Rational[1, 2])^2)^
       Rational[1, 2]], Rational[-1, 4] Pi}, 
    $CellContext`S[2, Q3`$], "Label" -> "B"], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{
    Rational[1, 4] Pi + 
     ArcTan[((-2^
            Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
             Rational[1, 4] 3^Rational[1, 2]) - 
           2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])) + 
         2^Rational[-1, 2] ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
             Rational[1, 4] 3^Rational[1, 2]) + 
           2^Rational[-1, 2] (Rational[1, 4] + 
             Rational[1, 4] 3^Rational[1, 2])))^(-1) ((-2^
           Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])) + 
        2^Rational[-1, 2] (
          2^Rational[-1, 2] (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])))], 
     ArcSin[((Rational[-1, 4] + Rational[1, 4] 3^Rational[1, 2])^2 + (
         Rational[1, 4] + Rational[1, 4] 3^Rational[1, 2])^2)^Rational[1, 2]],
      0}, 
    $CellContext`S[2, Q3`$], "Label" -> "A"], 
   Q3`Phase[Rational[-1, 4] Pi, 
    $CellContext`S[1, 3]]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->1365516949,ExpressionUUID->"e7472261-47f8-4b5a-bdfc-9c0a8901e6ba"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Elaborate", "[", "cu", "]"}], "-", 
   RowBox[{"Elaborate", "[", "new", "]"}]}], "//", "FullGarner"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->298820583,ExpressionUUID->"8e470220-2270-4db5-bc2f-98b5d8369bf7"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[7]=",
 CellID->318013100,ExpressionUUID->"b482cd55-8838-4a18-b0aa-ce4f7706743a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "973e01be-e50a-4caa-9d7b-1da358e3d5e4"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1705608657,ExpressionUUID->"fdb16c1f-65f0-41d4-bd3a-8efdae87f25a"],

Cell[TextData[{
 "The ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "1340c724-9dbc-4c8b-9805-bd4cc504938c"],
 " feature of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "6b93201b-4825-4f95-bcff-472e135328da"],
 " is supposed to be used inside ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["QuantumCircuit"]], "paclet:Q3/ref/QuantumCircuit", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "4eb0932b-b6a9-4285-9e6e-9ec9dc0a223f"],
 ". If you want to analyse or check the decomposition, the following example \
may be useful."
}], "ExampleText",
 CellID->181077262,ExpressionUUID->"2d7e6b91-089e-46bf-872e-62fb7e3771f7"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"cmp", "=", 
  RowBox[{"Expand", "[", "cu", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1563352008,ExpressionUUID->"f6d84b02-f8d0-46e1-9c31-c4e075ddbf10"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {7, -1}}, {{0, -2}, {7, -2}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"C\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}}], 
     DiskBox[{2, -1}, 0.09], {CircleBox[{2, -2}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -2}, {2.2666666666666666`, -2}}, {{
         2, -2.2666666666666666`}, {2, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -2.4}, {3.4, -1.6}]}, 
     LineBox[{{2.6, -2.4}, {3.4, -2.4}, {3.4, -1.6}, {2.6, -1.6}, {
      2.6, -2.4}}], InsetBox[
      StyleBox["\<\"B\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {3, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{4, -1}, {4, -2}}], 
     DiskBox[{4, -1}, 0.09], {CircleBox[{4, -2}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -2}, {4.266666666666667, -2}}, {{
         4, -2.2666666666666666`}, {4, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{4.6, -2.4}, {5.4, -1.6}]}, 
     LineBox[{{4.6, -2.4}, {5.4, -2.4}, {5.4, -1.6}, {4.6, -1.6}, {
      4.6, -2.4}}], InsetBox[
      StyleBox["\<\"A\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {5, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -1.4}, {6.4, -0.6}]}, 
     LineBox[{{5.6, -1.4}, {6.4, -1.4}, {6.4, -0.6}, {5.6, -0.6}, {
      5.6, -1.4}}], InsetBox[
      StyleBox[
       TemplateBox[{"\"Z\"", 
         RowBox[{"-", 
           FractionBox["\[Pi]", "4"]}]},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {6, -1}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->298.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[-
    ArcTan[((-2^
           Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) - 
          2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])) + 
        2^Rational[-1, 2] ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])))^(-1) ((-2^
          Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
           Rational[1, 4] 3^Rational[1, 2]) + 
         2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])) + 
       2^Rational[-1, 2] (
         2^Rational[-1, 2] (Rational[-1, 4] + 
           Rational[1, 4] 3^Rational[1, 2]) + 
         2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])))], {0, 0, 1}, 
    $CellContext`S[2, Q3`$], "Label" -> "C"], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{
    0, -ArcSin[((Rational[-1, 4] + Rational[1, 4] 3^Rational[1, 2])^2 + (
          Rational[1, 4] + Rational[1, 4] 3^Rational[1, 2])^2)^
       Rational[1, 2]], Rational[-1, 4] Pi}, 
    $CellContext`S[2, Q3`$], "Label" -> "B"], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{
    Rational[1, 4] Pi + 
     ArcTan[((-2^
            Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
             Rational[1, 4] 3^Rational[1, 2]) - 
           2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])) + 
         2^Rational[-1, 2] ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
             Rational[1, 4] 3^Rational[1, 2]) + 
           2^Rational[-1, 2] (Rational[1, 4] + 
             Rational[1, 4] 3^Rational[1, 2])))^(-1) ((-2^
           Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])) + 
        2^Rational[-1, 2] (
          2^Rational[-1, 2] (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])))], 
     ArcSin[((Rational[-1, 4] + Rational[1, 4] 3^Rational[1, 2])^2 + (
         Rational[1, 4] + Rational[1, 4] 3^Rational[1, 2])^2)^Rational[1, 2]],
      0}, 
    $CellContext`S[2, Q3`$], "Label" -> "A"], 
   Q3`Phase[Rational[-1, 4] Pi, 
    $CellContext`S[1, 3]]]]], "Output",
 CellLabel->"Out[1]=",
 CellID->415526188,ExpressionUUID->"18b64c18-9050-488a-a469-040f68c6d2d9"]
}, Open  ]],

Cell["You can remove the labels.", "ExampleText",
 CellID->1652630181,ExpressionUUID->"4868bc9a-b530-45cd-ba8f-03165a086a0c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"more", "=", 
  RowBox[{"QuantumCircuitTrim", "[", "cmp", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->63469277,ExpressionUUID->"1a99cb39-aa0b-4cff-aebb-6a6dda19de11"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   InterpretationBox[
    TagBox[
     RowBox[{"Exp", 
      RowBox[{"(", 
       RowBox[{
        FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
        RowBox[{"ArcTan", "[", 
         FractionBox[
          RowBox[{
           RowBox[{"-", 
            FractionBox[
             RowBox[{
              RowBox[{"-", 
               FractionBox[
                RowBox[{
                 RowBox[{"-", 
                  FractionBox["1", "4"]}], "+", 
                 FractionBox[
                  SqrtBox["3"], "4"]}], 
                SqrtBox["2"]]}], "+", 
              FractionBox[
               RowBox[{
                FractionBox["1", "4"], "+", 
                FractionBox[
                 SqrtBox["3"], "4"]}], 
               SqrtBox["2"]]}], 
             SqrtBox["2"]]}], "+", 
           FractionBox[
            RowBox[{
             FractionBox[
              RowBox[{
               RowBox[{"-", 
                FractionBox["1", "4"]}], "+", 
               FractionBox[
                SqrtBox["3"], "4"]}], 
              SqrtBox["2"]], "+", 
             FractionBox[
              RowBox[{
               FractionBox["1", "4"], "+", 
               FractionBox[
                SqrtBox["3"], "4"]}], 
              SqrtBox["2"]]}], 
            SqrtBox["2"]]}], 
          RowBox[{
           RowBox[{"-", 
            FractionBox[
             RowBox[{
              RowBox[{"-", 
               FractionBox[
                RowBox[{
                 RowBox[{"-", 
                  FractionBox["1", "4"]}], "+", 
                 FractionBox[
                  SqrtBox["3"], "4"]}], 
                SqrtBox["2"]]}], "-", 
              FractionBox[
               RowBox[{
                FractionBox["1", "4"], "+", 
                FractionBox[
                 SqrtBox["3"], "4"]}], 
               SqrtBox["2"]]}], 
             SqrtBox["2"]]}], "+", 
           FractionBox[
            RowBox[{
             RowBox[{"-", 
              FractionBox[
               RowBox[{
                RowBox[{"-", 
                 FractionBox["1", "4"]}], "+", 
                FractionBox[
                 SqrtBox["3"], "4"]}], 
               SqrtBox["2"]]}], "+", 
             FractionBox[
              RowBox[{
               FractionBox["1", "4"], "+", 
               FractionBox[
                SqrtBox["3"], "4"]}], 
              SqrtBox["2"]]}], 
            SqrtBox["2"]]}]], "]"}], " ", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
          "Subsuperscript"],
         $CellContext`S[2, 3]]}], ")"}]}],
     DisplayForm],
    Q3`Rotation[-
     ArcTan[((-2^
            Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
             Rational[1, 4] 3^Rational[1, 2]) - 
           2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])) + 
         2^Rational[-1, 2] ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
             Rational[1, 4] 3^Rational[1, 2]) + 
           2^Rational[-1, 2] (Rational[1, 4] + 
             Rational[1, 4] 3^Rational[1, 2])))^(-1) ((-2^
           Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])) + 
        2^Rational[-1, 2] (
          2^Rational[-1, 2] (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])))], {0, 0, 1}, 
     $CellContext`S[2, Q3`$]]], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       InterpretationBox[
        SubscriptBox["S", 
         TemplateBox[{",", "\",\"", "1"},
          "RowWithSeparators"]],
        $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", 
        RowBox[{"ArcSin", "[", 
         SqrtBox[
          RowBox[{
           SuperscriptBox[
            RowBox[{"(", 
             RowBox[{
              RowBox[{"-", 
               FractionBox["1", "4"]}], "+", 
              FractionBox[
               SqrtBox["3"], "4"]}], ")"}], "2"], "+", 
           SuperscriptBox[
            RowBox[{"(", 
             RowBox[{
              FractionBox["1", "4"], "+", 
              FractionBox[
               SqrtBox["3"], "4"]}], ")"}], "2"]}]], "]"}]}], ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}]}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       InterpretationBox[
        SubscriptBox["S", 
         TemplateBox[{",", "\",\"", "1"},
          "RowWithSeparators"]],
        $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        FractionBox["\[Pi]", "4"], "+", 
        RowBox[{"ArcTan", "[", 
         FractionBox[
          RowBox[{
           RowBox[{"-", 
            FractionBox[
             RowBox[{
              RowBox[{"-", 
               FractionBox[
                RowBox[{
                 RowBox[{"-", 
                  FractionBox["1", "4"]}], "+", 
                 FractionBox[
                  SqrtBox["3"], "4"]}], 
                SqrtBox["2"]]}], "+", 
              FractionBox[
               RowBox[{
                FractionBox["1", "4"], "+", 
                FractionBox[
                 SqrtBox["3"], "4"]}], 
               SqrtBox["2"]]}], 
             SqrtBox["2"]]}], "+", 
           FractionBox[
            RowBox[{
             FractionBox[
              RowBox[{
               RowBox[{"-", 
                FractionBox["1", "4"]}], "+", 
               FractionBox[
                SqrtBox["3"], "4"]}], 
              SqrtBox["2"]], "+", 
             FractionBox[
              RowBox[{
               FractionBox["1", "4"], "+", 
               FractionBox[
                SqrtBox["3"], "4"]}], 
              SqrtBox["2"]]}], 
            SqrtBox["2"]]}], 
          RowBox[{
           RowBox[{"-", 
            FractionBox[
             RowBox[{
              RowBox[{"-", 
               FractionBox[
                RowBox[{
                 RowBox[{"-", 
                  FractionBox["1", "4"]}], "+", 
                 FractionBox[
                  SqrtBox["3"], "4"]}], 
                SqrtBox["2"]]}], "-", 
              FractionBox[
               RowBox[{
                FractionBox["1", "4"], "+", 
                FractionBox[
                 SqrtBox["3"], "4"]}], 
               SqrtBox["2"]]}], 
             SqrtBox["2"]]}], "+", 
           FractionBox[
            RowBox[{
             RowBox[{"-", 
              FractionBox[
               RowBox[{
                RowBox[{"-", 
                 FractionBox["1", "4"]}], "+", 
                FractionBox[
                 SqrtBox["3"], "4"]}], 
               SqrtBox["2"]]}], "+", 
             FractionBox[
              RowBox[{
               FractionBox["1", "4"], "+", 
               FractionBox[
                SqrtBox["3"], "4"]}], 
              SqrtBox["2"]]}], 
            SqrtBox["2"]]}]], "]"}]}], ",", 
       RowBox[{"ArcSin", "[", 
        SqrtBox[
         RowBox[{
          SuperscriptBox[
           RowBox[{"(", 
            RowBox[{
             RowBox[{"-", 
              FractionBox["1", "4"]}], "+", 
             FractionBox[
              SqrtBox["3"], "4"]}], ")"}], "2"], "+", 
          SuperscriptBox[
           RowBox[{"(", 
            RowBox[{
             FractionBox["1", "4"], "+", 
             FractionBox[
              SqrtBox["3"], "4"]}], ")"}], "2"]}]], "]"}], ",", "0"}], "}"}], 
     ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]]}], "]"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
           "Subsuperscript"],
          $CellContext`S[1, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         RowBox[{"-", 
          FractionBox["\[Pi]", "4"]}], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]}], "}"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->641218697,ExpressionUUID->"6ea65726-0dc7-4c67-b07e-28c7e97ea1c1"]
}, Open  ]],

Cell[TextData[{
 "You can directly multiply the components to check the equivalence. Here, \
notice ",
 StyleBox["Reverse[cmp]", "Input"],
 "."
}], "ExampleText",
 CellID->1753917898,ExpressionUUID->"496b1728-af9e-4ac7-b616-8e54245465fa"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"EchoTiming", "[", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"Apply", "[", 
      RowBox[{"Multiply", ",", 
       RowBox[{"Reverse", "@", "cmp"}]}], "]"}], "-", "cu"}], "//", 
    "Elaborate"}], "//", "FullGarner"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1043909238,ExpressionUUID->"5f5ee38e-11a3-414b-a7d1-fe8b6bec43a2"],

Cell[BoxData["1.596775`"], "EchoTiming",
 CellID->2037669358,ExpressionUUID->"f8bcd810-937e-475f-901e-e41d0e72a074"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->1187181197,ExpressionUUID->"c9ad1b73-ac39-4663-9aff-526bb8f5c106"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "7f26634e-daa4-4185-b379-cdaec91cf4eb"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1600539001,ExpressionUUID->"31ae6430-8c7b-44cd-8300-670c45ce1b5f"],

Cell[TextData[{
 "The ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "b78d7b08-2be2-4ae1-b461-d0e33c31a1ca"],
 " feature also applies to multi-control unitary gates. For example, consider \
the above unitary gate controlled by two qubits ",
 StyleBox["S[0,$]", "Input"],
 " and ",
 StyleBox["S[1,$]", "Input"],
 "."
}], "ExampleText",
 CellID->595717937,ExpressionUUID->"79199969-d11b-4cb4-a2e6-7269e9019f29"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ccu", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"0", ",", "1"}], "}"}]}], ",", "op", ",", 
    RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1811053528,ExpressionUUID->"500055e9-8455-419c-9fdf-7e03c8b7ed13"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "0"},
         "RowWithSeparators"]],
       $CellContext`S[0, Q3`$]], "\[Rule]", "1"}], ",", 
     RowBox[{
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "1"},
         "RowWithSeparators"]],
       $CellContext`S[1, Q3`$]], "\[Rule]", "1"}]}], "}"}], ",", 
   RowBox[{
    SuperscriptBox["\[ExponentialE]", 
     RowBox[{"-", 
      FractionBox[
       RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]}]], " ", 
    RowBox[{"EulerRotation", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        FractionBox["\[Pi]", "3"], ",", 
        FractionBox["\[Pi]", "2"], ",", 
        FractionBox["\[Pi]", "6"]}], "}"}], ",", 
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]]}], "]"}]}], ",", 
   RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"U\"\>"}]}], "]"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->1234308568,ExpressionUUID->"e49c0ab4-6518-40b8-8bf0-23b63c8b123b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qcc", "=", 
  RowBox[{"QuantumCircuit", "[", "ccu", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1793861229,ExpressionUUID->"6e0e1754-9344-49b1-8f8a-89c82edae3b9"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     DiskBox[{1, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[0, Q3`$] -> 1, $CellContext`S[1, Q3`$] -> 
     1}, E^(Complex[0, 
        Rational[-1, 4]] Pi) 
    Q3`EulerRotation[{
      Rational[1, 3] Pi, Rational[1, 2] Pi, Rational[1, 6] Pi}, 
      $CellContext`S[2, Q3`$]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1561371743,ExpressionUUID->"ef1a1636-9006-4ae3-96a4-3461a6468e7f"]
}, Open  ]],

Cell[TextData[{
 "Decompose the quantum circuit above into a product of the multi-controlled \
NOT gate  and single-qubit rotations. (See also the ",
 ButtonBox["Generalization & Extensions",
  BaseStyle->"Link",
  ButtonData->"paclet:Q3/ref/ControlledGate#1020263627"],
 " section below.)"
}], "ExampleText",
 CellID->1051097161,ExpressionUUID->"caa8d7d5-c50e-46f8-aeb9-d2402a1df659"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "[", "ccu", "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1765521323,ExpressionUUID->"d1091702-79cb-4981-ba49-cb4d7dba0090"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {7, -1}}, {{0, -2}, {7, -2}}, {{0, -3}, {7, -3}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"C\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}}], 
     DiskBox[{2, -1}, 0.09], 
     DiskBox[{2, -2}, 0.09], {CircleBox[{2, -3}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -3}, {2.2666666666666666`, -3}}, {{
         2, -3.2666666666666666`}, {2, -2.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -3.4}, {3.4, -2.6}]}, 
     LineBox[{{2.6, -3.4}, {3.4, -3.4}, {3.4, -2.6}, {2.6, -2.6}, {
      2.6, -3.4}}], InsetBox[
      StyleBox["\<\"B\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {3, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}}], 
     DiskBox[{4, -1}, 0.09], 
     DiskBox[{4, -2}, 0.09], {CircleBox[{4, -3}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -3}, {4.266666666666667, -3}}, {{
         4, -3.2666666666666666`}, {4, -2.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{4.6, -3.4}, {5.4, -2.6}]}, 
     LineBox[{{4.6, -3.4}, {5.4, -3.4}, {5.4, -2.6}, {4.6, -2.6}, {
      4.6, -3.4}}], InsetBox[
      StyleBox["\<\"A\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {5, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{6, -1}, {6, -2}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -2.4}, {6.4, -1.6}]}, 
     LineBox[{{5.6, -2.4}, {6.4, -2.4}, {6.4, -1.6}, {5.6, -1.6}, {
      5.6, -2.4}}], InsetBox[
      StyleBox[
       TemplateBox[{"\"Z\"", 
         RowBox[{"-", 
           FractionBox["\[Pi]", "4"]}]},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {6, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->298.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[-
    ArcTan[((-2^
           Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) - 
          2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])) + 
        2^Rational[-1, 2] ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])))^(-1) ((-2^
          Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
           Rational[1, 4] 3^Rational[1, 2]) + 
         2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])) + 
       2^Rational[-1, 2] (
         2^Rational[-1, 2] (Rational[-1, 4] + 
           Rational[1, 4] 3^Rational[1, 2]) + 
         2^Rational[-1, 2] (Rational[1, 4] + 
           Rational[1, 4] 3^Rational[1, 2])))], {0, 0, 1}, 
    $CellContext`S[2, Q3`$], "Label" -> "C"], 
   Q3`CNOT[{$CellContext`S[0, Q3`$] -> 1, $CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{
    0, -ArcSin[((Rational[-1, 4] + Rational[1, 4] 3^Rational[1, 2])^2 + (
          Rational[1, 4] + Rational[1, 4] 3^Rational[1, 2])^2)^
       Rational[1, 2]], Rational[-1, 4] Pi}, 
    $CellContext`S[2, Q3`$], "Label" -> "B"], 
   Q3`CNOT[{$CellContext`S[0, Q3`$] -> 1, $CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{
    Rational[1, 4] Pi + 
     ArcTan[((-2^
            Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
             Rational[1, 4] 3^Rational[1, 2]) - 
           2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])) + 
         2^Rational[-1, 2] ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
             Rational[1, 4] 3^Rational[1, 2]) + 
           2^Rational[-1, 2] (Rational[1, 4] + 
             Rational[1, 4] 3^Rational[1, 2])))^(-1) ((-2^
           Rational[-1, 2]) ((-2^Rational[-1, 2]) (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])) + 
        2^Rational[-1, 2] (
          2^Rational[-1, 2] (Rational[-1, 4] + 
            Rational[1, 4] 3^Rational[1, 2]) + 
          2^Rational[-1, 2] (Rational[1, 4] + 
            Rational[1, 4] 3^Rational[1, 2])))], 
     ArcSin[((Rational[-1, 4] + Rational[1, 4] 3^Rational[1, 2])^2 + (
         Rational[1, 4] + Rational[1, 4] 3^Rational[1, 2])^2)^Rational[1, 2]],
      0}, 
    $CellContext`S[2, Q3`$], "Label" -> "A"], 
   Q3`ControlledGate[{$CellContext`S[0, Q3`$] -> 1}, 
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]]]], "Output",
 CellLabel->"Out[3]=",
 CellID->1016728554,ExpressionUUID->"8b2fa70e-df70-4204-ac47-56933dad9427"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"EchoTiming", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"qcc", "-", "new"}], "//", "Elaborate"}], "//", "FullGarner"}], 
  "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1192347325,ExpressionUUID->"b1b686f0-ef19-4317-8b2d-973c6b14e8e5"],

Cell[BoxData["9.831454`"], "EchoTiming",
 CellID->1925385378,ExpressionUUID->"9af4e560-d0b4-4594-8b7f-90a0ae0cf7e1"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[4]=",
 CellID->1668455050,ExpressionUUID->"8867f56b-6e26-4bc1-9be9-b7ecef6b4006"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "0"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"f026fc1a-64ce-428e-902f-0ffa580914a5"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"e5610254-7627-4d9b-a4c8-f666b3c11ee8"],
 "Generalizations & Extensions",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(2)", "ExampleCount",ExpressionUUID->
  "144a2821-54de-4c25-8b47-31cfeda0b8a7"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1020263627,ExpressionUUID->"2a2b669f-040e-49c3-9f03-3731259755c8"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->54597739,ExpressionUUID->"d99a708d-487c-469f-b6d1-781a1847c020"],

Cell["\<\
When the unitary operator is a complex number of unit amplitude, then the \
controlled-U gate is equivalent to the phase gate on the controlled qubit.\
\>", "ExampleText",
 CellID->1658935743,ExpressionUUID->"ce1bb20e-d226-4061-b0c9-827052c6e4a2"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Let", "[", 
  RowBox[{"Real", ",", "\[Phi]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"z", "=", 
  RowBox[{"Exp", "[", 
   RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->450269680,ExpressionUUID->"07b011eb-009c-4d3c-8d88-f0caf64477f4"],

Cell[BoxData[
 SuperscriptBox["\[ExponentialE]", 
  RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]]], "Output",
 CellLabel->"Out[2]=",
 CellID->402671898,ExpressionUUID->"1843574d-c071-46cb-8ac1-5f7a2243bedc"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"S", "[", "1", "]"}], ",", "z"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->113446564,ExpressionUUID->"5fe293ac-8bc2-45a2-b34d-2d32a7052650"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{"S", 
          TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       RowBox[{"arg", "(", 
        SuperscriptBox["\[ExponentialE]", 
         RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]], ")"}], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[
   Arg[E^(Complex[0, 1] $CellContext`\[Phi])], 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[3]=",
 CellID->1462382222,ExpressionUUID->"089b93b6-fc8d-43a2-9012-9d5766df7f80"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", "z"}], "]"}], "/.", 
  RowBox[{"{", 
   RowBox[{"\[Phi]", "\[Rule]", 
    RowBox[{"Pi", "/", "3"}]}], "}"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1884776724,ExpressionUUID->"20541f68-d4d5-403a-9b7c-b35230ba90d8"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{"S", 
          TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       FractionBox["\[Pi]", "3"], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[Rational[1, 3] Pi, 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->978414068,ExpressionUUID->"4202685f-04f7-485b-b613-13549c3c30ee"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", 
     RowBox[{
      RowBox[{"S", "[", 
       RowBox[{"2", ",", "0"}], "]"}], " ", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}], ",", 
     RowBox[{"\"\<Label\>\"", "\[Rule]", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1389124015,ExpressionUUID->"a9538de2-cc5f-4e43-a03c-e888e971dcf6"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1}, 
    E^(Complex[0, 1] $CellContext`\[Phi]) $CellContext`S[2, 0], "Label" -> 
    E^(Complex[0, 1] $CellContext`\[Phi])]]]], "Output",
 CellLabel->"Out[5]=",
 CellID->115024120,ExpressionUUID->"4a760e4f-3924-4d7a-bdd2-17ddf75c714c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc1", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", " ", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}], ",", 
      RowBox[{"\"\<Label\>\"", "\[Rule]", 
       RowBox[{"Exp", "[", 
        RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<Visible\>\"", "\[Rule]", 
     RowBox[{"S", "[", "2", "]"}]}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->125637926,ExpressionUUID->"65b1bae5-0660-4eef-b5a3-603d47994957"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
     LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
      0.6, -1.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -1}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Phase[
    Arg[E^(Complex[0, 1] $CellContext`\[Phi])], 
    $CellContext`S[1, 3], "Label" -> E^(Complex[0, 1] $CellContext`\[Phi])], 
   "Visible" -> $CellContext`S[2]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->1391925546,ExpressionUUID->"4290fa50-5528-46c4-9e29-ac25610b040f"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc1"}], "]"}], "//", "FullSimplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->1909614846,ExpressionUUID->"9dd3297d-b0d9-4eb7-b005-025ea5b87a1c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[7]=",
 CellID->1773489211,ExpressionUUID->"7885e1d9-1fff-4b17-8cb4-048340705067"]
}, Open  ]],

Cell["\<\
When the number is not of unit magnitude, it gives a warning message.\
\>", "ExampleText",
 CellID->511713125,ExpressionUUID->"15d62ffe-8c12-4b2b-b186-afd2fe6eadb1"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"S", "[", "1", "]"}], ",", 
   RowBox[{"1", "+", "I"}]}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->375479679,ExpressionUUID->"30d874de-864b-4b1c-9e38-02f2d12a42e8"],

Cell[BoxData[
 TemplateBox[{
  "ControlledGate", "unitary", 
   "\"The operator \\!\\(\\*RowBox[{\\\"1\\\", \\\"+\\\", \\\"\[ImaginaryI]\\\
\"}]\\) is not unitary.\"", 2, 258, 6, 18496328616814250296, "Local", 
   "Q3`ControlledGate"},
  "MessageTemplate2"]], "Message", "MSG",
 CellLabel->"During evaluation of In[8]:=",
 CellID->1765895391,ExpressionUUID->"4f4f2840-ad51-44d6-a458-8a3655fb1928"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{"S", 
          TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       FractionBox["\[Pi]", "4"], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[Rational[1, 4] Pi, 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[8]=",
 CellID->1179834997,ExpressionUUID->"ffe1d848-129e-4fbb-aac2-9b314558480c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "1a5bc3c4-ecf0-492e-8d57-7143fa8e45a7"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->174573991,ExpressionUUID->"b102b10c-2e0c-4f52-af7d-4f35c16a731a"],

Cell[TextData[{
 "When there are more than one control qubits, then the controlled-U gate \
induces a relative phase shift on the state ",
 Cell[BoxData[
  TemplateBox[{
    RowBox[{"11", "\[Ellipsis]1"}]},
   "Ket"]],ExpressionUUID->"9d2f3b7b-542e-481d-b1b0-3436ac17c901"],
 "."
}], "ExampleText",
 CellID->1484041902,ExpressionUUID->"14c34e30-a4de-4b49-ac74-cd06839bb1cd"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2"}], "}"}]}], ",", 
    RowBox[{"Exp", "[", 
     RowBox[{"I", " ", 
      RowBox[{"\[Pi]", "/", "4"}]}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1674411155,ExpressionUUID->"dc19ad6b-fe7c-4749-b923-c11da779a41e"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "1"},
        "RowWithSeparators"]],
      $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
           "Subsuperscript"],
          $CellContext`S[2, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         FractionBox["\[Pi]", "4"], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[1, 4] Pi, 
     $CellContext`S[2, 3]]]}], "]"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->48044563,ExpressionUUID->"452dbb1d-9970-4f09-b842-e019c685b230"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "@", "op"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1750426850,ExpressionUUID->"dacf46e0-996f-4937-91d7-16d92e1787ca"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"3", "+", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"-", "1"}], "+", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]]}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->219440447,ExpressionUUID->"f6e84e62-bb4f-491a-b995-eabef1acd7bb"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Matrix", "[", "op", "]"}], "//", "Simplify"}], "//", 
  "MatrixForm"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->295000539,ExpressionUUID->"97d44f6c-079f-45b1-a0a3-67e5bde7554e"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", "0"},
     {"0", "1", "0", "0"},
     {"0", "0", "1", "0"},
     {"0", "0", "0", 
      FractionBox[
       RowBox[{"1", "+", "\[ImaginaryI]"}], 
       SqrtBox["2"]]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {4, 4}, 0, {
     1, {{0, 1, 2, 3, 4}, {{1}, {2}, {3}, {4}}}, {
      1, 1, 1, Complex[1, 1] 2^Rational[-1, 2]}}]]]]], "Output",
 CellLabel->"Out[3]//MatrixForm=",
 CellID->1556241750,ExpressionUUID->"103f79f0-1ece-4574-8892-bbbe9929bd1d"]
}, Open  ]],

Cell["\<\
This expression is equivalent to the above one, but does not expand.\
\>", "ExampleText",
 CellID->2142135012,ExpressionUUID->"e8e32497-7873-4774-8f47-101658e21881"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2"}], "}"}]}], ",", 
    RowBox[{
     RowBox[{"Exp", "[", 
      RowBox[{"I", " ", 
       RowBox[{"\[Pi]", "/", "4"}]}], "]"}], " ", 
     RowBox[{"S", "[", 
      RowBox[{"3", ",", "0"}], "]"}]}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1434563406,ExpressionUUID->"73da201d-7fa1-4349-aff3-8e4546d704a8"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "1"},
         "RowWithSeparators"]],
       $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], ",", 
     RowBox[{
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]], "\[Rule]", "1"}]}], "}"}], ",", 
   RowBox[{
    SuperscriptBox["\[ExponentialE]", 
     FractionBox[
      RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]], " ", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "0"}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[3, 0]]}]}], "]"}]], "Output",
 CellLabel->"Out[4]=",
 CellID->832964981,ExpressionUUID->"9a1151f4-05f0-442f-b7f0-bfecbba21ae9"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Elaborate", "[", "op", "]"}], "-", 
   RowBox[{"Elaborate", "[", "new", "]"}]}], "//", "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1544994010,ExpressionUUID->"e3064ca8-e8d2-4efc-b849-3137a78ebf7c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[5]=",
 CellID->1677317764,ExpressionUUID->"0b422eb0-a910-404b-9e04-ac982ef04c5b"]
}, Open  ]],

Cell["\<\
The equivalence can also be examined in quantum circuit model. The \
controlled-unitary gate with the unitary gate given by the global phase shift \
is represented by the following quantum circuit model.\
\>", "ExampleText",
 CellID->382850454,ExpressionUUID->"65be8571-3cf9-4553-85a7-395894e269f2"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "@", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], ",", 
     RowBox[{
      RowBox[{"S", "[", 
       RowBox[{"4", ",", "0"}], "]"}], 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}], ",", 
     RowBox[{"\"\<Label\>\"", "\[Rule]", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->1698297027,ExpressionUUID->"1793343c-9063-4915-a491-af9497437511"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}, {{
     0, -4}, {2, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     DiskBox[{1, -1}, 0.09], DiskBox[{1, -2}, 0.09], DiskBox[{1, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, 
     LineBox[{{0.6, -4.4}, {1.4, -4.4}, {1.4, -3.6}, {0.6, -3.6}, {
      0.6, -4.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -4}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-9, 2], 
       Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    E^(Complex[0, 1] $CellContext`\[Phi]) $CellContext`S[4, 0], "Label" -> 
    E^(Complex[0, 1] $CellContext`\[Phi])]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->224725151,ExpressionUUID->"73316438-98f0-4087-b9d3-90337ec06b9c"]
}, Open  ]],

Cell["\<\
It is equivalent to the following three quantum circuit models involving \
(relative) phase-shift gate, and leaving the forth qubit intact.\
\>", "ExampleText",
 CellID->42562061,ExpressionUUID->"6e2d2745-0a7b-4b9e-bfbd-a37e9cfb24ba"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"qc1", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"1", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qc2", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "3"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"2", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qc3", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"3", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"GraphicsRow", "@", 
  RowBox[{"{", 
   RowBox[{"qc1", ",", "qc2", ",", "qc3"}], "}"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->385898355,ExpressionUUID->"d7f533b5-da8d-4744-af3a-cc59bfb42591"],

Cell[BoxData[
 GraphicsBox[{{}, {InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -1}}], 
           DiskBox[{1, -1}, 0.09], DiskBox[{1, -2}, 0.09], 
           DiskBox[{1, -3}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
           LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
            0.6, -1.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -1}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 
           1, $CellContext`S[2, Q3`$] -> 1, $CellContext`S[3, Q3`$] -> 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[1, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {63.9625, -76.65}, {Center, Center}, {118.99999999999999, 146.},
     
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}], 
    InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -3}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
           DiskBox[{1, -3}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
           LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
            0.6, -2.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -2}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 
           1, $CellContext`S[3, Q3`$] -> 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[2, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {191.8875, -76.65}, {Center, Center}, {119., 146.},
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}], 
    InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
           DiskBox[{1, -2}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
           LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
            0.6, -3.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -3}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 
           1, $CellContext`S[2, Q3`$] -> 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[3, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {319.8125, -76.65}, {Center, Center}, {119., 146.},
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}]}, {}},
  AxesStyle->Large,
  FrameStyle->Large,
  ImageSize->{
    UpTo[600], Automatic},
  PlotRange->{{0, 383.775}, {-153.3, 0}},
  PlotRangePadding->{6, 5}]], "Output",
 CellLabel->"Out[7]=",
 CellID->585666826,ExpressionUUID->"3d4a17b2-2e22-4891-9c07-fff1552aa203"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc1"}], "]"}], "//", 
  "Simplify"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc2"}], "]"}], "//", 
  "Simplify"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc3"}], "]"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->286463219,ExpressionUUID->"f0f0bd4c-571c-4294-80bb-fccbbc5be354"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->1460965915,ExpressionUUID->"08d7d25e-c7e3-4f8d-92fb-93eb7d948e60"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->126113607,ExpressionUUID->"94af79dc-5dc9-4072-b5c8-64cc9b07417c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->25033260,ExpressionUUID->"b29eb73e-e743-4007-9eb9-d8a1dfe5fae3"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, 
  Closed]]]],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedFunction.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"See", " ", "Also"}], "SeeAlsoSection"]},
      {Cell[TextData[{
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["QuantumCircuit"]], "paclet:Q3/ref/QuantumCircuit", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "6b6e3582-36df-4cdf-9747-f3ef5c15f490"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "9ddcdd82-1891-4116-a229-bf864d2c6bac"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["CZ"]], "paclet:Q3/ref/CZ", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "07864278-d9ac-49c0-a955-ad95a0778cc7"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["ControlledPower"]], "paclet:Q3/ref/ControlledPower", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "70e46ca8-18c1-4a1a-a405-368bd1d373fe"]
       }], "SeeAlso",ExpressionUUID->"2069cc9a-73bc-4a71-9a7f-600230bac6a8"]}
     }]}
  }]], "SeeAlsoSection",ExpressionUUID->"544b2641-2bf7-484f-a940-\
95c5978dc84d"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedTutorial.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox["Tutorials", "TutorialsSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Two-Qubit Gates"]], "paclet:Q3/tutorial/TwoQubitGates"},
          
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "d41cafb1-73ed-4f4d-8e4d-0b2e250af6b7"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Computation: Overview"]], 
           "paclet:Q3/tutorial/QuantumComputationOverview"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "dcfb9f66-bfbf-442b-a31e-e503a9f8b1f0"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Multi-Control Unitary Gates"]], 
           "paclet:Q3/tutorial/MultiControlUnitaryGates"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "1cb46c29-e557-4290-a1ed-3751c39250dc"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Information Systems with Q3"]], 
           "paclet:Q3/tutorial/QuantumInformationSystems"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "10b76f39-0fc2-40bd-a81a-4686f53984c3"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quick Quantum Computing with Q3"]], 
           "paclet:Q3/tutorial/QuickQuantumComputingWithQ3"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "ba3d675f-5ca2-4699-8005-fddd5bf2ca56"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3: Quick Start"]], "paclet:Q3/tutorial/Q3QuickStart"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "18eb3008-3e75-4e86-bb30-d7e680083ff3"]}]}
     }]}
  }]], "TutorialsSection",ExpressionUUID->"a37c8169-9782-4385-8575-\
75a3f8d34001"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, "RelatedGuide.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Related", " ", "Guides"}], "MoreAboutSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3: Symbolic Quantum Simulation"]], 
           "paclet:Q3/guide/Q3"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "5df3a578-c73f-4cc0-bf9a-bf1855abe1c6"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Information Systems"]], 
           "paclet:Q3/guide/QuantumInformationSystems"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "2a84307a-1916-48c9-8a5f-0c29046ed86f"]}]}
     }]}
  }]], "MoreAboutSection",ExpressionUUID->"62afad8d-c674-4f28-9709-\
754475ca4a36"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{29},
     "Spacer1"], GridBox[{
      {
       RowBox[{
        TemplateBox[{17},
         "Spacer1"], 
        StyleBox[
         RowBox[{"Related", " ", "Links"}], "RelatedLinksSection"]}]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "M. Nielsen and I. L. Chuang (2022)"}]]]], 
             "https://doi.org/10.1017/CBO9780511976667"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "bdb879ce-0894-4331-9cca-0a0caa075323"]}]],ExpressionUUID->
         "746caeda-6e49-43fc-a65f-0be9accefed2"],
        StyleBox[
        ", Quantum Computation and Quantum Information (Cambridge University \
Press).",
         FontSlant->"Plain"]
       }], "RelatedLinks",ExpressionUUID->
        "a40c8c48-8649-4007-a575-9a4705f7e194"]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "Mahn-Soo Choi (2022)"}]]]], 
             "https://doi.org/10.1007/978-3-030-91214-7"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "933cd0b1-159d-4fdd-a5c4-c39e8bb2fe9b"]}]],ExpressionUUID->
         "ef97ef89-8a4a-4d1c-ba37-8fb0e03ca07c"],
        ", A Quantum Computation Workbook (Springer)."
       }], "RelatedLinks",ExpressionUUID->
        "d3b67a3d-e9bf-456f-8b4c-1b9fb674ad64"]}
     }]}
  }]], "RelatedLinksSection",ExpressionUUID->"b1e31789-8a53-494a-9947-\
f9fa9841a389"],

Cell[" ", "FooterCell",ExpressionUUID->"8d664f1e-1f5d-4a97-bfde-65c398f7adbe"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{900, 830},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"ControlledGate",
TaggingRules->{
 "ModificationHighlight" -> False, "ColorType" -> "", "LinkTrails" -> "", 
  "HasOptions" -> True, "ExampleCounter" -> 1, 
  "Openers" -> {
   "PrimaryExamplesSection" -> Open, 
    "ExampleSection" -> {"0" -> Open, "1" -> Closed, "2" -> Closed}, 
    "NotesSection" -> Closed, "ExampleSubsection" -> {"0" -> Closed}}, 
  "NewStyles" -> True, "CitationPopupData" -> $Failed, "ShowCitation" -> 
  False, "RootCaptions" -> "", 
  "Metadata" -> {
   "built" -> "{2023, 10, 3, 15, 2, 39.349680}", 
    "history" -> {"12", "13.3", "", ""}, "context" -> "Q3`", "keywords" -> {},
     "specialkeywords" -> {}, "tutorialcollectionlinks" -> {}, "index" -> 
    True, "label" -> "Q3 Symbol", "language" -> "en", "paclet" -> "Q3", 
    "status" -> "None", "summary" -> 
    "ControlledGate[{c1, c2, ...}, op] represents a multi-control \
multi-target unitary gate with control qubits c1, c2, ... and unitary \
operator op acting on the target qubits. ControlledGate[c, op] is equivalent \
to ControlledGate[{c}, op]. ControlledGate[{c1 -> v1, c2 -> v2, ...}, op] \
represents a variation of the controlled-unitary gate, where operator op \
operates when the control qubits c1, c2, ... take the logical values v1, v2, \
..., respectively. ControlledGate[c -> v, ...] is automatically converted to \
ControlledGate[{c -> v}, ...]. ControlledGate[{c1, c2, ...} -> v, ...] is \
automatically converted to ControlledGate[{c1 -> v, c2 -> v, ...}, ...].", 
    "synonyms" -> {}, "tabletags" -> {}, "title" -> "ControlledGate", 
    "titlemodifier" -> "", "metadescription" -> "", "windowtitle" -> 
    "ControlledGate", "type" -> "Symbol", "uri" -> "Q3/ref/ControlledGate"}},
CellContext->"Global`",
FrontEndVersion->"13.3 for Mac OS X ARM (64-bit) (July 24, 2023)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> FrontEnd`FileName[{"Wolfram"}, "Reference.nb"]]], 
   Cell[
    StyleData["Input"], CellContext -> "Global`"], 
   Cell[
    StyleData["Output"], CellContext -> "Global`"]}, Visible -> False, 
  FrontEndVersion -> "13.3 for Mac OS X ARM (64-bit) (July 24, 2023)", 
  StyleDefinitions -> "Default.nb"],
ExpressionUUID->"dfd61d1e-7f23-4038-bcee-d7011080b9f5"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "PrimaryExamplesSection"->{
  Cell[22899, 640, 1389, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"edf4098b-09d4-4e13-9cd5-d880fb1d7a56",
   CellTags->"PrimaryExamplesSection",
   CellID->894089496]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"PrimaryExamplesSection", 167798, 4676}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[586, 21, 7615, 185, 57, "AnchorBarGrid",ExpressionUUID->"f898a7d8-bf72-46bd-b656-9d94dd5dde68",
 CellID->1],
Cell[8204, 208, 85, 0, 23, "ContextNameCell",ExpressionUUID->"1760f243-67f7-4ffe-abfd-8d75f5037cbd"],
Cell[CellGroupData[{
Cell[8314, 212, 1177, 31, 60, "ObjectNameGrid",ExpressionUUID->"5fc54a19-b98d-4f9e-832e-4a9ea9f3d57d"],
Cell[9494, 245, 7378, 210, 452, "Usage",ExpressionUUID->"d5ff7cc3-66ef-4e35-94b3-54814ac31901"]
}, Open  ]],
Cell[CellGroupData[{
Cell[16909, 460, 1898, 47, 37, "NotesSection",ExpressionUUID->"f124ee49-831c-4b76-8753-712781255e0f",
 CellGroupingRules->{"SectionGrouping", 50},
 CellID->856133428],
Cell[18810, 509, 920, 28, 70, "Notes",ExpressionUUID->"6670571f-a860-473b-8687-f6f46ba1239e",
 CellID->1702748548],
Cell[19733, 539, 459, 13, 70, "Notes",ExpressionUUID->"b5b55ba7-a0fb-44e0-bb13-0b0996739ed8",
 CellID->491054349],
Cell[20195, 554, 876, 26, 70, "Notes",ExpressionUUID->"c557efd5-d85f-4cc4-b770-219c017d4918",
 CellID->2019652723],
Cell[21074, 582, 848, 25, 70, "Notes",ExpressionUUID->"50ad500f-0874-4a12-9f31-91f2c18b8ae0",
 CellID->384437925],
Cell[21925, 609, 847, 25, 70, "Notes",ExpressionUUID->"2682e52e-904d-4522-a9cf-bc88e79d7a8b",
 CellID->1895961038]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],
Cell[CellGroupData[{
Cell[22899, 640, 1389, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"edf4098b-09d4-4e13-9cd5-d880fb1d7a56",
 CellTags->"PrimaryExamplesSection",
 CellID->894089496],
Cell[24291, 679, 191, 3, 31, "Input",ExpressionUUID->"c8cb564b-093f-410b-879f-6a85825f367e",
 CellID->851865642],
Cell[CellGroupData[{
Cell[24507, 686, 1368, 36, 31, "ExampleSection",ExpressionUUID->"1d1e4a44-aab1-4177-b335-ebfb187fcc78",
 CellID->1019081213],
Cell[25878, 724, 209, 5, 29, "Input",ExpressionUUID->"baec094e-fa94-458f-9046-ee0c3e6ee972",
 CellID->1403695601],
Cell[26090, 731, 170, 3, 38, "ExampleText",ExpressionUUID->"9524945c-8d35-41be-8523-2f18acd83b35",
 CellID->493202586],
Cell[CellGroupData[{
Cell[26285, 738, 327, 9, 29, "Input",ExpressionUUID->"4354d585-bd81-45a3-b780-b1a61094b1d1",
 CellID->1804103712],
Cell[26615, 749, 612, 17, 40, "Output",ExpressionUUID->"e0869a83-10b1-418e-b18b-728318efca88",
 CellID->814499400]
}, Open  ]],
Cell[CellGroupData[{
Cell[27264, 771, 189, 4, 29, "Input",ExpressionUUID->"5ba2af87-c4be-4b41-a5fd-b3b44b3ef910",
 CellID->1699357571],
Cell[27456, 777, 1562, 41, 52, "Output",ExpressionUUID->"fa505388-4920-45a7-a3da-bb5121a2e925",
 CellID->2096109642]
}, Open  ]],
Cell[CellGroupData[{
Cell[29055, 823, 218, 5, 70, "Input",ExpressionUUID->"b6408331-aaa1-473a-bccf-fc54a169fc74",
 CellID->388513540],
Cell[29276, 830, 787, 23, 100, "Output",ExpressionUUID->"fff251e6-bb50-419c-9eb0-c25e13358e3f",
 CellID->604196739]
}, Open  ]],
Cell[CellGroupData[{
Cell[30100, 858, 228, 6, 70, "Input",ExpressionUUID->"0abb59b9-83fe-458c-8b32-b579e5a49f9e",
 CellID->227378000],
Cell[30331, 866, 2427, 61, 52, "Output",ExpressionUUID->"77cc99b4-4eea-46c6-a16d-c166036371a1",
 CellID->1053279401]
}, Open  ]],
Cell[32773, 930, 581, 15, 70, "ExampleText",ExpressionUUID->"4d12dc5f-6f09-4488-9d46-16551fee856b",
 CellID->976135211],
Cell[CellGroupData[{
Cell[33379, 949, 335, 9, 70, "Input",ExpressionUUID->"1fd9e696-7166-4688-86e9-4504b2175f03",
 CellID->1713072528],
Cell[33717, 960, 1560, 41, 52, "Output",ExpressionUUID->"d35b8cd8-8390-42ba-9b96-a31d171ead82",
 CellID->10716038]
}, Open  ]],
Cell[CellGroupData[{
Cell[35314, 1006, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"cd828da9-3fdc-4262-8d12-ecd6569ef8c5",
 CellID->1117862758],
Cell[35560, 1013, 210, 4, 70, "ExampleText",ExpressionUUID->"ca28bcd1-bf07-4451-9475-4dafb4cb4161",
 CellID->66695600],
Cell[CellGroupData[{
Cell[35795, 1021, 193, 4, 70, "Input",ExpressionUUID->"c0c8bbd8-760d-45cd-bd92-82204740f18d",
 CellID->287461810],
Cell[35991, 1027, 1123, 28, 95, "Output",ExpressionUUID->"2a3e38ff-0685-4af7-a4f2-c45633ee0e31",
 CellID->484522264]
}, Open  ]],
Cell[37129, 1058, 422, 11, 70, "ExampleText",ExpressionUUID->"da43cfae-26c7-45ab-b5a8-64cd13062d7a",
 CellID->376653752],
Cell[CellGroupData[{
Cell[37576, 1073, 730, 22, 70, "Input",ExpressionUUID->"b8e560b0-5ee7-46ff-986c-77f663066168",
 CellID->1100337461],
Cell[38309, 1097, 1505, 37, 52, "Output",ExpressionUUID->"9d851301-f587-4c54-9c12-6731735ebbca",
 CellID->1037273568],
Cell[39817, 1136, 1504, 37, 52, "Output",ExpressionUUID->"ab303d9a-49b5-429a-b922-89ec6109b397",
 CellID->184611030],
Cell[41324, 1175, 127, 2, 37, "Output",ExpressionUUID->"afaaefa8-f2a8-449a-825d-27d57417ca0c",
 CellID->1791194942]
}, Open  ]],
Cell[CellGroupData[{
Cell[41488, 1182, 871, 26, 70, "Input",ExpressionUUID->"f4bac1ae-dcac-4fd1-9421-86d08672cdbe",
 CellID->1391490451],
Cell[42362, 1210, 4544, 107, 52, "Output",ExpressionUUID->"bcc5906b-f1c8-461f-87d0-2d2b25b6980c",
 CellID->1967075000],
Cell[46909, 1319, 4543, 107, 52, "Output",ExpressionUUID->"68ad9bf2-0eba-40eb-97dc-31f1e0241596",
 CellID->118779435],
Cell[51455, 1428, 127, 2, 37, "Output",ExpressionUUID->"7254b5bf-e1fa-4efc-b5c4-556d978746de",
 CellID->1313655982]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[51631, 1436, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"bd94aa2c-2585-4944-b0bc-f60cbcf8b6f5",
 CellID->1893551625],
Cell[51877, 1443, 193, 4, 70, "ExampleText",ExpressionUUID->"284f2e77-8cfb-496b-b8b1-736b5b941864",
 CellID->1781572424],
Cell[CellGroupData[{
Cell[52095, 1451, 448, 13, 70, "Input",ExpressionUUID->"583dcfd0-4cf8-46b6-8cbe-94a3e01d9163",
 CellID->907561411],
Cell[52546, 1466, 1792, 43, 52, "Output",ExpressionUUID->"df45cb47-ebe9-4dd1-89c0-c4bf441dec49",
 CellID->1640719626]
}, Open  ]],
Cell[CellGroupData[{
Cell[54375, 1514, 374, 10, 70, "Input",ExpressionUUID->"46924dc0-913b-40f5-b5cd-df985efa14c8",
 CellID->1556697824],
Cell[54752, 1526, 1360, 32, 131, "Output",ExpressionUUID->"104f9b7b-bbee-4803-9216-11761f457d27",
 CellID->1099398866]
}, Open  ]],
Cell[CellGroupData[{
Cell[56149, 1563, 189, 4, 70, "Input",ExpressionUUID->"b2a0b1b0-c7e3-44dc-8231-b876c785a591",
 CellID->1323430295],
Cell[56341, 1569, 6087, 158, 84, "Output",ExpressionUUID->"81a02dfc-3092-4ed2-a56a-bcac76fa28c0",
 CellID->1402074068]
}, Open  ]],
Cell[62443, 1730, 151, 1, 70, "ExampleText",ExpressionUUID->"0e0f5ac2-9b70-4103-b701-63939a8dcb99",
 CellID->796325451],
Cell[CellGroupData[{
Cell[62619, 1735, 497, 14, 70, "Input",ExpressionUUID->"abe1d9c9-0aa5-4e31-a4b2-f82660b96e38",
 CellID->1688856124],
Cell[63119, 1751, 1307, 32, 131, "Output",ExpressionUUID->"f241e59d-95b2-47f6-b036-9ad5dd3cb880",
 CellID->234328639]
}, Open  ]],
Cell[CellGroupData[{
Cell[64463, 1788, 182, 4, 70, "Input",ExpressionUUID->"4a0cfe0c-14fc-46cd-b599-f70dc62d5171",
 CellID->97902928],
Cell[64648, 1794, 5499, 141, 84, "Output",ExpressionUUID->"a7e05b36-8322-4190-a685-e762468d43e7",
 CellID->1388527483]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[70196, 1941, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"c5d5c2aa-530a-42aa-8e24-c242c882ad43",
 CellID->1616593910],
Cell[CellGroupData[{
Cell[70464, 1950, 581, 17, 70, "Input",ExpressionUUID->"a9a43fc4-d44f-4f85-8721-857e10ee0185",
 CellID->423687378],
Cell[71048, 1969, 1348, 32, 131, "Output",ExpressionUUID->"3d8159c7-468c-424a-ba3c-1ffb70f04077",
 CellID->1304075793]
}, Open  ]],
Cell[CellGroupData[{
Cell[72433, 2006, 652, 19, 70, "Input",ExpressionUUID->"fa23c664-5d68-4e25-80d2-cdacb9156739",
 CellID->446009393],
Cell[73088, 2027, 2218, 53, 131, "Output",ExpressionUUID->"eb1b4f61-34d1-4b09-9491-a5b266eeddf6",
 CellID->1315750011]
}, Open  ]],
Cell[CellGroupData[{
Cell[75343, 2085, 245, 7, 70, "Input",ExpressionUUID->"8a007ce5-4573-43b3-83ca-0d657091182b",
 CellID->2072193516],
Cell[75591, 2094, 126, 2, 37, "Output",ExpressionUUID->"d1cdb6b5-4f08-4972-884d-8040c150274c",
 CellID->970196462]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, Closed]]]],
Cell[CellGroupData[{
Cell[75878, 2105, 1394, 36, 70, "ExampleSection",ExpressionUUID->"c6a1ee95-4584-46fe-8ad7-afbb17347d6f",
 CellID->1293636265],
Cell[CellGroupData[{
Cell[77297, 2145, 1404, 36, 70, "ExampleSubsection",ExpressionUUID->"7043ef27-640d-4de7-b716-4c76bfd09208",
 CellID->1965812958],
Cell[78704, 2183, 1921, 60, 70, "ExampleText",ExpressionUUID->"0c7aa4f3-37dd-4e0e-bd2e-59186a7adb07",
 CellID->227879916],
Cell[80628, 2245, 209, 5, 70, "Input",ExpressionUUID->"71fb8275-6431-42f8-9f10-5c98244a4ac5",
 CellID->1801264145],
Cell[80840, 2252, 136, 1, 70, "ExampleText",ExpressionUUID->"db782b97-aa82-4e66-be39-ffc32793b9ad",
 CellID->1033495556],
Cell[CellGroupData[{
Cell[81001, 2257, 550, 17, 70, "Input",ExpressionUUID->"f44cb84c-1617-45fd-859e-accf2ebd223c",
 CellID->1096870451],
Cell[81554, 2276, 626, 19, 53, "Output",ExpressionUUID->"e265c850-a820-4d6a-8791-cf54d371e984",
 CellID->1496693170]
}, Open  ]],
Cell[82195, 2298, 151, 1, 70, "ExampleText",ExpressionUUID->"76a7ca47-1fd7-419c-a51d-f57fe562138a",
 CellID->1955102746],
Cell[CellGroupData[{
Cell[82371, 2303, 337, 9, 70, "Input",ExpressionUUID->"c86952bf-725b-4ec0-9a9f-b5365bfb06f9",
 CellID->2059470547],
Cell[82711, 2314, 1395, 43, 92, "Output",ExpressionUUID->"46d6c047-ce80-49fa-b9b9-6a3afc4abcdb",
 CellID->45538633]
}, Open  ]],
Cell[84121, 2360, 196, 4, 70, "ExampleText",ExpressionUUID->"789492ba-4f63-4904-8043-eee75f8aa180",
 CellID->1600123813],
Cell[CellGroupData[{
Cell[84342, 2368, 445, 12, 70, "Input",ExpressionUUID->"61eb7453-9767-442e-b8e4-fd7b76180024",
 CellID->8884588],
Cell[84790, 2382, 1278, 31, 95, "Output",ExpressionUUID->"26f4a27b-5d39-4e73-bb1f-c0f39675e9aa",
 CellID->1553946096]
}, Open  ]],
Cell[86083, 2416, 207, 4, 70, "ExampleText",ExpressionUUID->"bf3616c6-abdb-4186-be16-48d519cda364",
 CellID->777355164],
Cell[CellGroupData[{
Cell[86315, 2424, 186, 4, 70, "Input",ExpressionUUID->"7e24ce5d-ecc7-4235-9aea-c752d184cfad",
 CellID->1865987295],
Cell[86504, 2430, 5486, 120, 95, "Output",ExpressionUUID->"4414e819-a0ea-4e88-b1a4-eb1d02d65456",
 CellID->1882559549]
}, Open  ]],
Cell[92005, 2553, 148, 1, 70, "ExampleText",ExpressionUUID->"c2eca4a6-5908-4d48-9fdb-eada5eb2ce3e",
 CellID->1490385628],
Cell[CellGroupData[{
Cell[92178, 2558, 252, 6, 70, "Input",ExpressionUUID->"9999c13b-9a3d-4b6e-877f-7602761e86eb",
 CellID->984160605],
Cell[92433, 2566, 5486, 120, 95, "Output",ExpressionUUID->"e7472261-47f8-4b5a-bdfc-9c0a8901e6ba",
 CellID->1365516949]
}, Open  ]],
Cell[CellGroupData[{
Cell[97956, 2691, 284, 7, 70, "Input",ExpressionUUID->"8e470220-2270-4db5-bc2f-98b5d8369bf7",
 CellID->298820583],
Cell[98243, 2700, 126, 2, 37, "Output",ExpressionUUID->"b482cd55-8838-4a18-b0aa-ce4f7706743a",
 CellID->318013100]
}, Open  ]],
Cell[CellGroupData[{
Cell[98406, 2707, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"fdb16c1f-65f0-41d4-bd3a-8efdae87f25a",
 CellID->1705608657],
Cell[98652, 2714, 1101, 33, 70, "ExampleText",ExpressionUUID->"2d7e6b91-089e-46bf-872e-62fb7e3771f7",
 CellID->181077262],
Cell[CellGroupData[{
Cell[99778, 2751, 211, 5, 70, "Input",ExpressionUUID->"f6d84b02-f8d0-46e1-9c31-c4e075ddbf10",
 CellID->1563352008],
Cell[99992, 2758, 5485, 120, 95, "Output",ExpressionUUID->"18b64c18-9050-488a-a469-040f68c6d2d9",
 CellID->415526188]
}, Open  ]],
Cell[105492, 2881, 125, 1, 70, "ExampleText",ExpressionUUID->"4868bc9a-b530-45cd-ba8f-03165a086a0c",
 CellID->1652630181],
Cell[CellGroupData[{
Cell[105642, 2886, 223, 5, 70, "Input",ExpressionUUID->"1a99cb39-aa0b-4cff-aebb-6a6dda19de11",
 CellID->63469277],
Cell[105868, 2893, 9391, 291, 289, "Output",ExpressionUUID->"6ea65726-0dc7-4c67-b07e-28c7e97ea1c1",
 CellID->641218697]
}, Open  ]],
Cell[115274, 3187, 238, 6, 70, "ExampleText",ExpressionUUID->"496b1728-af9e-4ac7-b616-8e54245465fa",
 CellID->1753917898],
Cell[CellGroupData[{
Cell[115537, 3197, 391, 11, 70, "Input",ExpressionUUID->"5f5ee38e-11a3-414b-a7d1-fe8b6bec43a2",
 CellID->1043909238],
Cell[115931, 3210, 116, 1, 70, "EchoTiming",ExpressionUUID->"f8bcd810-937e-475f-901e-e41d0e72a074",
 CellID->2037669358],
Cell[116050, 3213, 127, 2, 37, "Output",ExpressionUUID->"c9ad1b73-ac39-4663-9aff-526bb8f5c106",
 CellID->1187181197]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[116226, 3221, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"31ae6430-8c7b-44cd-8300-670c45ce1b5f",
 CellID->1600539001],
Cell[116472, 3228, 571, 17, 70, "ExampleText",ExpressionUUID->"79199969-d11b-4cb4-a2e6-7269e9019f29",
 CellID->595717937],
Cell[CellGroupData[{
Cell[117068, 3249, 377, 10, 70, "Input",ExpressionUUID->"500055e9-8455-419c-9fdf-7e03c8b7ed13",
 CellID->1811053528],
Cell[117448, 3261, 1202, 36, 53, "Output",ExpressionUUID->"e49c0ab4-6518-40b8-8bf0-23b63c8b123b",
 CellID->1234308568]
}, Open  ]],
Cell[CellGroupData[{
Cell[118687, 3302, 220, 5, 70, "Input",ExpressionUUID->"6e0e1754-9344-49b1-8f8a-89c82edae3b9",
 CellID->1793861229],
Cell[118910, 3309, 1373, 33, 131, "Output",ExpressionUUID->"ef1a1636-9006-4ae3-96a4-3461a6468e7f",
 CellID->1561371743]
}, Open  ]],
Cell[120298, 3345, 385, 8, 70, "ExampleText",ExpressionUUID->"caa8d7d5-c50e-46f8-aeb9-d2402a1df659",
 CellID->1051097161],
Cell[CellGroupData[{
Cell[120708, 3357, 254, 6, 70, "Input",ExpressionUUID->"d1091702-79cb-4981-ba49-cb4d7dba0090",
 CellID->1765521323],
Cell[120965, 3365, 5760, 124, 131, "Output",ExpressionUUID->"8b2fa70e-df70-4204-ac47-56933dad9427",
 CellID->1016728554]
}, Open  ]],
Cell[CellGroupData[{
Cell[126762, 3494, 287, 8, 70, "Input",ExpressionUUID->"b1b686f0-ef19-4317-8b2d-973c6b14e8e5",
 CellID->1192347325],
Cell[127052, 3504, 116, 1, 70, "EchoTiming",ExpressionUUID->"9af4e560-d0b4-4594-8b7f-90a0ae0cf7e1",
 CellID->1925385378],
Cell[127171, 3507, 127, 2, 37, "Output",ExpressionUUID->"8867f56b-6e26-4bc1-9be9-b7ecef6b4006",
 CellID->1668455050]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "0"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, Closed]]]],
Cell[CellGroupData[{
Cell[127574, 3521, 1417, 36, 70, "ExampleSection",ExpressionUUID->"2a2b669f-040e-49c3-9f03-3731259755c8",
 CellID->1020263627],
Cell[128994, 3559, 207, 5, 70, "Input",ExpressionUUID->"d99a708d-487c-469f-b6d1-781a1847c020",
 CellID->54597739],
Cell[129204, 3566, 257, 4, 70, "ExampleText",ExpressionUUID->"ce1bb20e-d226-4061-b0c9-827052c6e4a2",
 CellID->1658935743],
Cell[CellGroupData[{
Cell[129486, 3574, 323, 8, 70, "Input",ExpressionUUID->"07b011eb-009c-4d3c-8d88-f0caf64477f4",
 CellID->450269680],
Cell[129812, 3584, 203, 4, 38, "Output",ExpressionUUID->"1843574d-c071-46cb-8ac1-5f7a2243bedc",
 CellID->402671898]
}, Open  ]],
Cell[CellGroupData[{
Cell[130052, 3593, 244, 6, 70, "Input",ExpressionUUID->"5fe293ac-8bc2-45a2-b34d-2d32a7052650",
 CellID->113446564],
Cell[130299, 3601, 831, 26, 40, "Output",ExpressionUUID->"089b93b6-fc8d-43a2-9012-9d5766df7f80",
 CellID->1462382222]
}, Open  ]],
Cell[CellGroupData[{
Cell[131167, 3632, 355, 10, 70, "Input",ExpressionUUID->"20541f68-d4d5-403a-9b7c-b35230ba90d8",
 CellID->1884776724],
Cell[131525, 3644, 705, 23, 50, "Output",ExpressionUUID->"4202685f-04f7-485b-b613-13549c3c30ee",
 CellID->978414068]
}, Open  ]],
Cell[CellGroupData[{
Cell[132267, 3672, 589, 16, 70, "Input",ExpressionUUID->"a9538de2-cc5f-4e43-a03c-e888e971dcf6",
 CellID->1389124015],
Cell[132859, 3690, 1297, 31, 95, "Output",ExpressionUUID->"4a760e4f-3924-4d7a-bdd2-17ddf75c714c",
 CellID->115024120]
}, Open  ]],
Cell[CellGroupData[{
Cell[134193, 3726, 642, 17, 70, "Input",ExpressionUUID->"65b1bae5-0660-4eef-b5a3-603d47994957",
 CellID->125637926],
Cell[134838, 3745, 1240, 31, 95, "Output",ExpressionUUID->"4290fa50-5528-46c4-9e29-ac25610b040f",
 CellID->1391925546]
}, Open  ]],
Cell[CellGroupData[{
Cell[136115, 3781, 250, 6, 70, "Input",ExpressionUUID->"9dd3297d-b0d9-4eb7-b005-025ea5b87a1c",
 CellID->1909614846],
Cell[136368, 3789, 127, 2, 37, "Output",ExpressionUUID->"7885e1d9-1fff-4b17-8cb4-048340705067",
 CellID->1773489211]
}, Open  ]],
Cell[136510, 3794, 175, 3, 70, "ExampleText",ExpressionUUID->"15d62ffe-8c12-4b2b-b186-afd2fe6eadb1",
 CellID->511713125],
Cell[CellGroupData[{
Cell[136710, 3801, 268, 7, 70, "Input",ExpressionUUID->"30d874de-864b-4b1c-9e38-02f2d12a42e8",
 CellID->375479679],
Cell[136981, 3810, 397, 8, 70, "Message",ExpressionUUID->"4f4f2840-ad51-44d6-a458-8a3655fb1928",
 CellID->1765895391],
Cell[137381, 3820, 706, 23, 50, "Output",ExpressionUUID->"ffe1d848-129e-4fbb-aac2-9b314558480c",
 CellID->1179834997]
}, Open  ]],
Cell[CellGroupData[{
Cell[138124, 3848, 242, 5, 70, "ExampleDelimiter",ExpressionUUID->"b102b10c-2e0c-4f52-af7d-4f35c16a731a",
 CellID->174573991],
Cell[138369, 3855, 374, 9, 70, "ExampleText",ExpressionUUID->"14c34e30-a4de-4b49-ac74-cd06839bb1cd",
 CellID->1484041902],
Cell[CellGroupData[{
Cell[138768, 3868, 408, 12, 70, "Input",ExpressionUUID->"dc19ad6b-fe7c-4749-b923-c11da779a41e",
 CellID->1674411155],
Cell[139179, 3882, 1012, 32, 50, "Output",ExpressionUUID->"452dbb1d-9970-4f09-b842-e019c685b230",
 CellID->48044563]
}, Open  ]],
Cell[CellGroupData[{
Cell[140228, 3919, 184, 4, 70, "Input",ExpressionUUID->"dacf46e0-996f-4937-91d7-16d92e1787ca",
 CellID->1750426850],
Cell[140415, 3925, 2248, 67, 52, "Output",ExpressionUUID->"f6e84e62-bb4f-491a-b995-eabef1acd7bb",
 CellID->219440447]
}, Open  ]],
Cell[CellGroupData[{
Cell[142700, 3997, 253, 7, 70, "Input",ExpressionUUID->"97d44f6c-079f-45b1-a0a3-67e5bde7554e",
 CellID->295000539],
Cell[142956, 4006, 884, 26, 110, "Output",ExpressionUUID->"103f79f0-1ece-4574-8892-bbbe9929bd1d",
 CellID->1556241750]
}, Open  ]],
Cell[143855, 4035, 175, 3, 70, "ExampleText",ExpressionUUID->"e8e32497-7873-4774-8f47-101658e21881",
 CellID->2142135012],
Cell[CellGroupData[{
Cell[144055, 4042, 495, 15, 70, "Input",ExpressionUUID->"73da201d-7fa1-4349-aff3-8e4546d704a8",
 CellID->1434563406],
Cell[144553, 4059, 961, 28, 50, "Output",ExpressionUUID->"9a1151f4-05f0-442f-b7f0-bfecbba21ae9",
 CellID->832964981]
}, Open  ]],
Cell[CellGroupData[{
Cell[145551, 4092, 283, 7, 70, "Input",ExpressionUUID->"e3064ca8-e8d2-4efc-b849-3137a78ebf7c",
 CellID->1544994010],
Cell[145837, 4101, 127, 2, 37, "Output",ExpressionUUID->"0b422eb0-a910-404b-9e04-ac982ef04c5b",
 CellID->1677317764]
}, Open  ]],
Cell[145979, 4106, 309, 5, 70, "ExampleText",ExpressionUUID->"65be8571-3cf9-4553-85a7-395894e269f2",
 CellID->382850454],
Cell[CellGroupData[{
Cell[146313, 4115, 644, 18, 70, "Input",ExpressionUUID->"1793343c-9063-4915-a491-af9497437511",
 CellID->1698297027],
Cell[146960, 4135, 1475, 33, 167, "Output",ExpressionUUID->"73316438-98f0-4087-b9d3-90337ec06b9c",
 CellID->224725151]
}, Open  ]],
Cell[148450, 4171, 244, 4, 70, "ExampleText",ExpressionUUID->"6e2d2745-0a7b-4b9e-bfbd-a37e9cfb24ba",
 CellID->42562061],
Cell[CellGroupData[{
Cell[148719, 4179, 1945, 54, 70, "Input",ExpressionUUID->"d7f533b5-da8d-4744-af3a-cc59bfb42591",
 CellID->385898355],
Cell[150667, 4235, 5382, 127, 261, "Output",ExpressionUUID->"3d4a17b2-2e22-4891-9c07-fff1552aa203",
 CellID->585666826]
}, Open  ]],
Cell[CellGroupData[{
Cell[156086, 4367, 495, 14, 70, "Input",ExpressionUUID->"f0f0bd4c-571c-4294-80bb-fccbbc5be354",
 CellID->286463219],
Cell[156584, 4383, 127, 2, 37, "Output",ExpressionUUID->"08d7d25e-c7e3-4f8d-92fb-93eb7d948e60",
 CellID->1460965915],
Cell[156714, 4387, 126, 2, 37, "Output",ExpressionUUID->"94af79dc-5dc9-4072-b5c8-64cc9b07417c",
 CellID->126113607],
Cell[156843, 4391, 125, 2, 37, "Output",ExpressionUUID->"b29eb73e-e743-4007-9eb9-d8a1dfe5fae3",
 CellID->25033260]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, Closed]]]],
Cell[157222, 4403, 2311, 62, 70, "SeeAlsoSection",ExpressionUUID->"544b2641-2bf7-484f-a940-95c5978dc84d"],
Cell[159536, 4467, 2508, 63, 70, "TutorialsSection",ExpressionUUID->"a37c8169-9782-4385-8575-75a3f8d34001"],
Cell[162047, 4532, 1086, 28, 70, "MoreAboutSection",ExpressionUUID->"62afad8d-c674-4f28-9709-754475ca4a36"],
Cell[163136, 4562, 2094, 59, 70, "RelatedLinksSection",ExpressionUUID->"b1e31789-8a53-494a-9947-f9fa9841a389"],
Cell[165233, 4623, 78, 0, 70, "FooterCell",ExpressionUUID->"8d664f1e-1f5d-4a97-bfde-65c398f7adbe"]
}
]
*)

(* End of internal cache information *)

