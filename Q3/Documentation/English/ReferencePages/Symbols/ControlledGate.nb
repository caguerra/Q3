(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    173064,       4769]
NotebookOptionsPosition[    150294,       4303]
NotebookOutlinePosition[    153063,       4366]
CellTagsIndexPosition[    152976,       4361]
WindowTitle->ControlledGate
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[GridBox[{
   {GridBox[{
      {
       ItemBox[Cell[BoxData[
         RowBox[{
          TemplateBox[{12},
           "Spacer1"], Cell["Q3 SYMBOL", "PacletNameCell",
           TextAlignment->Center,ExpressionUUID->
           "6aa79da7-a1f8-4d4f-ac27-c6015e57dd05"], 
          TemplateBox[{8},
           "Spacer1"]}]],
         TextAlignment->Center,ExpressionUUID->
         "5a354f61-184f-4ab9-8a25-cc05fe08d04e"],
        Background->RGBColor[0.490196, 0.576471, 0.690196],
        ItemSize->Full], ""}
     },
     GridBoxAlignment->{"Rows" -> {{Center}}},
     GridBoxItemSize->{"Columns" -> {Full, 
         Scaled[0.02]}, "Rows" -> {{2.5}}}], Cell[TextData[{
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "See Also",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "eb761a67-0870-4c75-b35b-787febb0d1eb"]
         }],ExpressionUUID->"927c8f01-4d81-4553-a1fc-ecd51d73afa2"],
         StripOnInput->False],{
        "\"QuantumCircuit\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/QuantumCircuit"], "\"CNOT\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/CNOT"], "\"CZ\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/CZ"], "\"ControlledPower\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/ControlledPower"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"SeeAlso"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "c29f78ec-79a6-421f-b10c-8284c035a8c0"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Related Guides",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "7e427dc7-2dcf-4ad8-aca6-6408d30bacac"]
         }],ExpressionUUID->"b78f43dc-5758-4ebd-8953-06d3b23af06e"],
         StripOnInput->False],{
        "\"Q3: Symbolic Quantum Simulation\"" :> 
         Documentation`HelpLookup["paclet:Q3/guide/Q3"], 
         "\"Quantum Information Systems\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/guide/QuantumInformationSystems"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"MoreAbout"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "87ce3d0a-4741-49a6-9397-64e2264bd4f3"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Tech Notes",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "e1881c7e-dd3b-4d20-b5bd-6d85b6dbdbfb"]
         }],ExpressionUUID->"98172f6b-8c96-492d-add7-63aaad81929c"],
         StripOnInput->False],{
        "\"Two-Qubit Gates\"" :> 
         Documentation`HelpLookup["paclet:Q3/tutorial/TwoQubitGates"], 
         "\"Quantum Computation: Overview\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuantumComputationOverview"], 
         "\"Multi-Control Unitary Gates\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/MultiControlUnitaryGates"], 
         "\"Quantum Information Systems with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuantumInformationSystems"], 
         "\"Quick Quantum Computing with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuickQuantumComputingWithQ3"], 
         "\"Q3: Quick Start\"" :> 
         Documentation`HelpLookup["paclet:Q3/tutorial/Q3QuickStart"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"Tutorials"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "50abc552-29c3-466e-8621-e68fa90cc1f3"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "URL",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "5125b55c-e746-4312-a9f4-a308e6c4e109"]
         }],ExpressionUUID->"7cd10709-0332-4d58-b44d-17bb26b603a2"],
         StripOnInput->False],{
        "\"Q3/ref/ControlledGate\"" :> None, 
         "\"Copy Wolfram Documentation Center URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{Cell["Q3/ref/ControlledGate"]}, Visible -> False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], Delimiter, 
         "\"Copy web URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{
               Cell[BoxData[
                 MakeBoxes[
                  Hyperlink[
                   "http://reference.wolfram.com/language/Q3/ref/\
ControlledGate.html"], StandardForm]], "Input", TextClipboardType -> 
                 "PlainText"]}, Visible -> False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], 
         "\"Go to web URL\"" :> 
         FrontEndExecute[{
           NotebookLocate[{
             URL[If[TrueQ[DocumentationBuild`Make`Private`wsmlinkQ$24814], 
                 "http://reference.wolfram.com/system-modeler/", 
                 "http://reference.wolfram.com/language/"] <> 
               "Q3/ref/ControlledGate" <> ".html"], None}]}]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"URLMenu"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "0e240d2f-e6b5-4404-a3ed-d12b547aa1c7"]
    }], "AnchorBar",
     CacheGraphics->False,ExpressionUUID->
     "12af6ff5-3f1a-4e7e-98e5-9d99f117d98a"]}
  }]], "AnchorBarGrid",
 CellID->1,ExpressionUUID->"2333d3ae-0909-4b7f-a9ad-4d904abd5e8a"],

Cell["Q3`", "ContextNameCell",ExpressionUUID->"d46ddba0-03a1-496c-bf41-69c8d911538c"],

Cell[CellGroupData[{

Cell[BoxData[GridBox[{
   {Cell[TextData[{
     Cell[
     "ControlledGate", "ObjectName",ExpressionUUID->
      "3921ad55-49b9-42ad-a4d1-d876daba0eb5"],
     Cell[BoxData[
      TemplateBox[{8},
       "Spacer1"]],ExpressionUUID->"53b350e7-98f3-4ada-b8e6-255d2b7966d8"],
     Cell[BoxData[
     ""], "ObjectNameTranslation",ExpressionUUID->
      "56b9897a-c8d9-42dc-8964-92e300726d5a"]
    }],ExpressionUUID->"f9e624ed-b07d-4a10-a19b-fbff44b650d5"], Cell[BoxData[
     StyleBox[
      GraphicsBox[InsetBox[
        StyleBox["\<\"UPDATED IN 13.3\"\>",
         StripOnInput->False,
         FontFamily->"Source Sans Pro",
         FontSize->17,
         FontWeight->"Bold",
         FontSlant->"Italic",
         FontColor->RGBColor[0.968627, 0.466667, 0]], {Right, Center}, {
        Right, Center}],
       AxesStyle->Large,
       FrameStyle->Large,
       ImageSize->{125, 24},
       PlotRangePadding->Scaled[0.025]], "NewInGraphic",
      StripOnInput->False]],
     Deployed->True,
     Magnification->1,ExpressionUUID->
     "a505a924-9dce-4074-8687-89c7febc087b"]}
  }]], "ObjectNameGrid",
 CacheGraphics->False,ExpressionUUID->"e2add42d-fcd6-4514-9c95-b563e1f1a03b"],

Cell[BoxData[GridBox[{
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["1", "TR"]], ",", 
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["2", "TR"]], ",", "\[Ellipsis]"}], "}"}], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "ed6091f2-789e-4e16-80b4-b4a6f3552fde"],
     "\[LineSeparator]represents a multi-control multi-target unitary gate \
with control qubits ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["2", "TR"]], ",", "\[Ellipsis]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "6cadba9d-edc5-4276-aee3-5fa04bf64cdf"],
     " and unitary operator ",
     Cell[BoxData[
      StyleBox["op", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "8ee3f6d6-8a73-48bf-8179-b53e054040de"],
     " acting on the target qubits."
    }],ExpressionUUID->"f7a35cc0-2e56-4749-9107-9055c282485e"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["c", "TI"], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "53adea69-f801-455e-abb8-16b32131ca7e"],
     "\[LineSeparator]is equivalent to ",
     Cell[BoxData[
      RowBox[{"ControlledGate", "[", 
       RowBox[{
        RowBox[{"{", 
         StyleBox["c", "TI"], "}"}], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "d357255c-2eeb-4377-931f-5f217e25facd"],
     "."
    }],ExpressionUUID->"73e39dfb-cccb-4012-b494-d4a74d0ff2c9"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], "\[Rule]", 
           SubscriptBox[
            StyleBox["v", "TI"], 
            StyleBox["1", "TR"]]}], ",", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], "\[Rule]", 
           SubscriptBox[
            StyleBox["v", "TI"], 
            StyleBox["2", "TR"]]}], ",", 
          StyleBox["\[Ellipsis]", "TR"]}], "}"}], ",", 
        StyleBox["op", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "b09b6a3f-d688-49b1-99a3-91ea7e1b46a5"],
     "\[LineSeparator]represents a variation of the controlled-unitary gate, \
where operator op operates when the control qubits ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["2", "TR"]], ",", 
       StyleBox["\[Ellipsis]", "TR"]}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "2310f164-a81a-4784-a6ab-2709653326a2"],
     " take the logical values ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["v", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["v", "TI"], 
        StyleBox["2", "TR"]], ",", 
       StyleBox["\[Ellipsis]", "TR"]}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "a6ffb301-0e2e-46e1-b197-503b6fa2af86"],
     ", respectively."
    }],ExpressionUUID->"02447b6f-b23f-4a63-9281-34216fb5f1cf"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         StyleBox["c", "TI"], "\[Rule]", 
         StyleBox["v", "TI"]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "d86cd33e-8306-4bf7-b19d-c997d3553c3d"],
     "\[LineSeparator]is automatically converted to ",
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          StyleBox["c", "TI"], "\[Rule]", 
          StyleBox["v", "TI"]}], "}"}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "9aec9511-350c-4a88-b422-e563486f8f23"],
     "."
    }],ExpressionUUID->"703eb7f6-10cb-4d07-a291-351e83416f7c"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], ",", 
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
         StyleBox["v", "TI"]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "9aab7ad2-9658-407d-b45f-4c5b991dbe5b"],
     "\[LineSeparator]is automatically converted to ",
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], "\[Rule]", 
           StyleBox["v", "TI"]}], ",", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], "\[Rule]", 
           StyleBox["v", "TI"]}], ",", 
          StyleBox["\[Ellipsis]", "TR"]}], "}"}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "34c56e45-5606-4801-b488-dee38d51c466"],
     "."
    }],ExpressionUUID->"292d8ee0-b94b-41fa-b0ae-acae161dec5c"]}
  }]], "Usage",ExpressionUUID->"d5ff7cc3-66ef-4e35-94b3-54814ac31901"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[Cell[BoxData[
 ButtonBox[Cell[TextData[{
   Cell[BoxData[
    DynamicBox[ToBoxes[
      If[
       MatchQ[
        CurrentValue[
         EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, 
         Closed], 
        Alternatives[Open, True]], 
       Style[
        Graphics[{
          Thickness[0.18], 
          RGBColor[0.8509803921568627, 0.396078431372549, 0], 
          Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
         PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
        0.68 Inherited], 
       Rotate[
        Style[
         Graphics[{
           Thickness[0.18], 
           RGBColor[0.8509803921568627, 0.396078431372549, 0], 
           Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
          PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
         0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
     ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
    ExpressionUUID->"e1ea5bed-fcad-4be5-bc58-0c5d6a8e2837"],
   Cell[BoxData[
    TemplateBox[{1},
     "Spacer1"]],ExpressionUUID->"2a21ab94-cf30-44cd-9169-ae61812d398c"],
   "Details and Options"
  }], "NotesFrameText",ExpressionUUID->"214ff0ca-f872-4938-b628-37f910c4294a"],
  Appearance->{Automatic, None, "Normal", Automatic},
  BaseStyle->None,
  ButtonFunction:>(FrontEndExecute[{
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], All, ButtonCell], 
     FrontEndToken["OpenCloseGroup"], 
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], After, CellContents]}]& ),
  Evaluator->None,
  Method->
   "Preemptive"]],ExpressionUUID->"78724ff7-e6de-408e-b724-c3289cd53dec"]], \
"NotesSection",
 WholeCellGroupOpener->True,
 CellGroupingRules->{"SectionGrouping", 50},
 CacheGraphics->False,
 CellID->1686950548,ExpressionUUID->"b13f736e-f804-4bcb-a6ca-9ae082aa8823"],

Cell[TextData[{
 "If ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "c98b9a46-feb6-4ba7-a8a8-ab3b872f97b7"],
 " is an operator of the form ",
 Cell[BoxData[
  RowBox[{"T", "[", 
   RowBox[{
    StyleBox["j", "TI"], ",", "\[Ellipsis]", ",", 
    StyleBox["k", "TI"]}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "05aae188-4af2-4990-a81d-c0b9e229e77e"],
 ", it is regarded to act on qubit ",
 Cell[BoxData[
  RowBox[{"T", "[", 
   RowBox[{
    StyleBox["j", "TI"], ",", "\[Ellipsis]", ",", 
    TemplateBox[{
      Cell[
       TextData["$"]], "paclet:ref/$"},
     "RefLink",
     BaseStyle->{"InlineFormula"}]}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "10b48ff7-db96-422b-8dcd-4c1bff11568c"],
 "."
}], "Notes",
 CellID->1702748548,ExpressionUUID->"6670571f-a860-473b-8687-f6f46ba1239e"],

Cell[TextData[{
 "Otherwise, ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "3a9f4e08-33fc-4faf-ab14-88e14b91ce7b"],
 " acts on the qubits involved in ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "a6b56d2a-22a7-4c38-b63b-3af38b9985c8"],
 "."
}], "Notes",
 CellID->491054349,ExpressionUUID->"b5b55ba7-a0fb-44e0-bb13-0b0996739ed8"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Elaborate"]], "paclet:Q3/ref/Elaborate", "Q3 Package Symbol"},
    
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", 
   RowBox[{"ControlledGate", "[", "\[Ellipsis]", "]"}], "]"}]], 
  "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "daa599c0-117e-4c49-95ee-304c285389f3"],
 " expands ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
     "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", "\[Ellipsis]", "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "828489bb-87fb-4442-b78a-4722537ee079"],
 " explicitly in terms of the Pauli operators."
}], "Notes",
 CellID->2019652723,ExpressionUUID->"c557efd5-d85f-4cc4-b770-219c017d4918"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Matrix"]], "paclet:Q3/ref/Matrix", "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", 
   RowBox[{"ControlledGate", "[", "\[Ellipsis]", "]"}], "]"}]], 
  "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "fdca150e-98f1-4441-b8af-786d8da3f8fa"],
 " gives the matrix representation of ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
     "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", "\[Ellipsis]", "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "04494634-1771-437a-b381-cc82717d4175"],
 "."
}], "Notes",
 CellID->384437925,ExpressionUUID->"50ad500f-0874-4a12-9f31-91f2c18b8ae0"],

Cell[TextData[{
 "[EXPERIMENTAL] ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Expand"]], "paclet:ref/Expand"},
    "RefLink",
    BaseStyle->{"InlineFormula"}], "[", 
   RowBox[{"ControlledGate", "[", 
    StyleBox["\[Ellipsis]", "TR"], "]"}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "d81cda39-ef0e-46b7-b738-97e7348d0bef"],
 " decomposes the controlled-unitary gate as a product of single-qubit \
rotations and ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "e516f1a5-2755-4871-a296-f1e0a4805be5"],
 " gates."
}], "Notes",
 CellID->1895961038,ExpressionUUID->"2682e52e-904d-4522-a9cf-bc88e79d7a8b"]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "PrimaryExamplesSection"}, Open], 
      Alternatives[True, Open]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "0fee220c-9ea4-4dd6-a684-5d35031a39a2"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"21852087-04f3-4305-923a-9d622cb10335"],
 "Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(9)", "ExampleCount",ExpressionUUID->
  "92eda4e6-feb2-4eec-8ddd-8cfeee30a8d7"]
}], "PrimaryExamplesSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellTags->"PrimaryExamplesSection",
 CellID->1498752542,ExpressionUUID->"5a65fdf2-c994-4029-8bb3-19214494c601"],

Cell[BoxData[
 RowBox[{"Needs", "[", "\"\<Q3`\>\"", "]"}]], "Input", "ExampleInitialization",
 CellLabel->"In[1]:=",
 CellID->851865642,ExpressionUUID->"c8cb564b-093f-410b-879f-6a85825f367e"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "c55053ea-68c5-4673-a819-273941f08ef9"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"95115949-cc68-4b03-bb6b-b63195b6bc55"],
 "Basic Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(4)", "ExampleCount",ExpressionUUID->
  "a394b9b8-f8cb-4f9e-b23e-511a4ef32719"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1698277731,ExpressionUUID->"6a800faf-9b5b-4da6-91a1-c8f5ceb9f07a"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1403695601,ExpressionUUID->"baec094e-fa94-458f-9046-ee0c3e6ee972"],

Cell["\<\
This is a controlled-U operator. Usually it remains unevaluated.\
\>", "ExampleText",
 CellID->493202586,ExpressionUUID->"9524945c-8d35-41be-8523-2f18acd83b35"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1804103712,ExpressionUUID->"4354d585-bd81-45a3-b780-b1a61094b1d1"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "1"},
        "RowWithSeparators"]],
      $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]]}], "]"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1341663885,ExpressionUUID->"8a793755-83c1-4041-828e-e90f8671a39c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "[", "op", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1699357571,ExpressionUUID->"5ba2af87-c4be-4b41-a5fd-b3b44b3ef910"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]]}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1174949083,ExpressionUUID->"9273bcc5-2a5e-46de-8351-ba21375aa1fe"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Matrix", "[", "op", "]"}], "//", "MatrixForm"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->388513540,ExpressionUUID->"b6408331-aaa1-473a-bccf-fc54a169fc74"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", "0"},
     {"0", "1", "0", "0"},
     {"0", "0", "0", "1"},
     {"0", "0", "1", "0"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {4, 4}, 0, {
     1, {{0, 2, 4, 6, 8}, {{1}, {2}, {2}, {1}, {3}, {4}, {4}, {3}}}, {1, 0, 1,
       0, 0, 1, 0, 1}}]]]]], "Output",
 CellLabel->"Out[4]//MatrixForm=",
 CellID->107098271,ExpressionUUID->"ba03480a-2de6-496a-8d17-2dfeed2012f8"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "**", 
  RowBox[{"S", "[", 
   RowBox[{"2", ",", "3"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->227378000,ExpressionUUID->"0abb59b9-83fe-458c-8b32-b579e5a49f9e"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 2]]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 2]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]]}]}]], "Output",
 CellLabel->"Out[5]=",
 CellID->2087976527,ExpressionUUID->"ea94ccef-ca81-433f-85e5-46ab925c6669"]
}, Open  ]],

Cell[TextData[{
 Cell[BoxData["ControlledGate"], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "a2935b62-0c3a-4394-9fb6-0c6d7abe5bc7"],
 " can be evaluated explicitly by means of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Elaborate"]], "paclet:Q3/ref/Elaborate", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "93377911-6925-4359-b76e-7afcc8f6f60b"],
 "."
}], "ExampleText",
 CellID->976135211,ExpressionUUID->"4d12dc5f-6f09-4488-9d46-16551fee856b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}], "//", "Elaborate"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->1713072528,ExpressionUUID->"1fd9e696-7166-4688-86e9-4504b2175f03"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]]}]}]], "Output",
 CellLabel->"Out[6]=",
 CellID->563310771,ExpressionUUID->"fd72e9ac-05a5-4053-af9d-bf50a0d03d04"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "4e19097e-8654-44c7-a522-4a8c7067f5c2"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1117862758,ExpressionUUID->"cd828da9-3fdc-4262-8d12-ecd6569ef8c5"],

Cell["\<\
In the quantum circuit model, a controlled-U gate is depicted by the \
following quantum circuit element.\
\>", "ExampleText",
 CellID->66695600,ExpressionUUID->"ca28bcd1-bf07-4451-9475-4dafb4cb4161"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"QuantumCircuit", "[", "op", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->287461810,ExpressionUUID->"c0c8bbd8-760d-45cd-bd92-82204740f18d"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1}, 
    $CellContext`S[2, 1]]]]], "Output",
 CellLabel->"Out[1]=",
 CellID->1702607669,ExpressionUUID->"37b04dc5-0939-4490-ae62-45613265ce47"]
}, Open  ]],

Cell[TextData[{
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "d1068799-8183-429f-8c97-8ddb6249fee9"],
 " is a special case of controlled-U gate."
}], "ExampleText",
 CellID->376653752,ExpressionUUID->"da43cfae-26c7-45ab-b5a8-64cd13062d7a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"x1", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", 
       RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{"x2", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"CNOT", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", "2", "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"x1", "-", "x2"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1100337461,ExpressionUUID->"b8e560b0-5ee7-46ff-986c-77f663066168"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], " ", 
  RowBox[{"(", 
   RowBox[{"1", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[2, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->218081797,ExpressionUUID->"e1715441-4d2d-4d0d-9dbb-56c704c72f4d"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], " ", 
  RowBox[{"(", 
   RowBox[{"1", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[2, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1693660397,ExpressionUUID->"cc44fc0d-a889-4c09-bc9a-82eb4851b095"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[2]=",
 CellID->454551394,ExpressionUUID->"5932b5dc-4bf4-4420-8d63-c58ae304b53f"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"x1", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"S", "[", "1", "]"}], ",", 
        RowBox[{"S", "[", "2", "]"}]}], "}"}], ",", 
      RowBox[{"S", "[", 
       RowBox[{"3", ",", "1"}], "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{"x2", "=", 
  RowBox[{
   RowBox[{"Elaborate", "[", 
    RowBox[{"Toffoli", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", "2", "]"}], ",", 
      RowBox[{"S", "[", "3", "]"}]}], "]"}], "]"}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"x1", "-", "x2"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1391490451,ExpressionUUID->"f4bac1ae-dcac-4fd1-9421-86d08672cdbe"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "4"], " ", 
  RowBox[{"(", 
   RowBox[{"3", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[3, 1]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[2, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[3, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->951830190,ExpressionUUID->"f150ecde-8785-4279-9d4b-70a926814642"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "4"], " ", 
  RowBox[{"(", 
   RowBox[{"3", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[3, 1]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
           "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowWithSeparators"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[2, 3]], "+", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[3, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->804316827,ExpressionUUID->"a14190a7-6bd7-4c4f-ae41-04eee2be24fa"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->1890837171,ExpressionUUID->"5ee92c72-6c5a-49f3-a380-25e35982f0b1"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "ea9c162d-d97e-4b64-bc87-5ed94ee673ca"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1893551625,ExpressionUUID->"bd94aa2c-2585-4944-b0bc-f60cbcf8b6f5"],

Cell["\<\
Here the controlled-unitary gate has the unitary operator acting on multiple \
qubits.\
\>", "ExampleText",
 CellID->1781572424,ExpressionUUID->"284f2e77-8cfb-496b-b8b1-736b5b941864"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"U", "=", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{"\[Phi]", ",", 
     RowBox[{"S", "[", 
      RowBox[{"2", ",", "1"}], "]"}]}], "]"}], "**", 
   RowBox[{"Rotation", "[", 
    RowBox[{"\[Theta]", ",", 
     RowBox[{"S", "[", 
      RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->907561411,ExpressionUUID->"583dcfd0-4cf8-46b6-8cbe-94a3e01d9163"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{"\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "-", 
  RowBox[{"\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[1]=",
 CellID->519994024,ExpressionUUID->"9f896618-8dac-432f-93d7-2e9638640990"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", "U", ",", 
     RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}], "]"}]}]], "Input",\

 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1556697824,ExpressionUUID->"46924dc0-913b-40f5-b5cd-df985efa14c8"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], NCache[{1, Rational[-5, 2]}, {1, -2.5}], NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1}, 
    Cos[Rational[1, 2] $CellContext`\[Theta]] 
     Cos[Rational[1, 2] $CellContext`\[Phi]] + 
    Complex[0, -1] 
     Cos[Rational[1, 2] $CellContext`\[Phi]] $CellContext`S[3, 2] 
     Sin[Rational[1, 2] $CellContext`\[Theta]] + 
    Complex[0, -1] 
     Cos[Rational[1, 2] $CellContext`\[Theta]] $CellContext`S[2, 1] 
     Sin[Rational[1, 2] $CellContext`\[Phi]] - Q3`Multiply[
      $CellContext`S[2, 1], 
      $CellContext`S[3, 2]] Sin[Rational[1, 2] $CellContext`\[Theta]] 
    Sin[Rational[1, 2] $CellContext`\[Phi]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1368628307,ExpressionUUID->"31000f4e-69d2-4631-b93c-5df9ccd15fa5"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "[", "qc", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1323430295,ExpressionUUID->"b2a0b1b0-c7e3-44dc-8231-b876c785a591"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "2"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "+", 
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["\[Theta]", "2"], "]"}], " ", 
      RowBox[{"Cos", "[", 
       FractionBox["\[Phi]", "2"], "]"}]}]}], ")"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["\[Theta]", "2"], "]"}], " ", 
      RowBox[{"Cos", "[", 
       FractionBox["\[Phi]", "2"], "]"}]}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"X\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->353227176,ExpressionUUID->"a85e542c-d092-4210-af3f-1aed52c70735"]
}, Open  ]],

Cell["It is more common to have multiple controlled qubits.", "ExampleText",
 CellID->796325451,ExpressionUUID->"0e0f5ac2-9b70-4103-b701-63939a8dcb99"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "@", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2"}], "}"}]}], ",", 
     RowBox[{"Rotation", "[", 
      RowBox[{"\[Phi]", ",", 
       RowBox[{"S", "[", 
        RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1688856124,ExpressionUUID->"abe1d9c9-0aa5-4e31-a4b2-f82660b96e38"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     DiskBox[{1, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"U\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1}, 
    Q3`Rotation[$CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`S[3, Q3`$]]]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->216072151,ExpressionUUID->"6246b5e6-906b-4f2e-abe0-4b874329c7f6"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "@", "qc"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->97902928,ExpressionUUID->"4a0cfe0c-14fc-46cd-b599-f70dc62d5171"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"3", "+", 
     RowBox[{"Cos", "[", 
      FractionBox["\[Phi]", "2"], "]"}]}], ")"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Y\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[5]=",
 CellID->2083005616,ExpressionUUID->"087bdd9a-ae01-4257-a10d-2d7ccea756b6"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "03b762e6-68a0-4bcc-a130-c9f96dae9999"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1616593910,ExpressionUUID->"c5d5c2aa-530a-42aa-8e24-c242c882ad43"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"S", "@", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}]}], "->", 
      RowBox[{"{", 
       RowBox[{"1", ",", "0"}], "}"}]}], ",", 
     RowBox[{"Rotation", "[", 
      RowBox[{"\[Phi]", ",", 
       RowBox[{"S", "[", 
        RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->423687378,ExpressionUUID->"a9a43fc4-d44f-4f85-8721-857e10ee0185"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[GrayLevel[0]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"U\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     0}, 
    Q3`Rotation[$CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`S[3, Q3`$]]]]]], "Output",
 CellLabel->"Out[1]=",
 CellID->614778052,ExpressionUUID->"7ce73d29-63b2-4d13-9672-309b6e1d950c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}], ",", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "@", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}]}], ",", 
      RowBox[{"Rotation", "[", 
       RowBox[{"\[Phi]", ",", 
        RowBox[{"S", "[", 
         RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->446009393,ExpressionUUID->"fa23c664-5d68-4e25-80d2-cdacb9156739"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {4, -1}}, {{0, -2}, {4, -2}}, {{0, -3}, {4, -3}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}}], 
     DiskBox[{2, -1}, 0.09], DiskBox[{2, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{1.6, -3.4}, {2.4, -2.6}]}, 
     LineBox[{{1.6, -3.4}, {2.4, -3.4}, {2.4, -2.6}, {1.6, -2.6}, {
      1.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"U\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {2, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -2.4}, {3.4, -1.6}]}, 
     LineBox[{{2.6, -2.4}, {3.4, -2.4}, {3.4, -1.6}, {2.6, -1.6}, {
      2.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {3, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->190.79999999999998`,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   $CellContext`S[2, 1], 
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1}, 
    Q3`Rotation[$CellContext`\[Phi], {0, 1, 0}, 
     $CellContext`S[3, Q3`$]]], 
   $CellContext`S[2, 1]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->828230572,ExpressionUUID->"7762a1f3-d73b-4a3d-a94b-81abedab39c0"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"new", "-", "qc"}], "//", "Elaborate"}], "//", 
  "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->2072193516,ExpressionUUID->"8a007ce5-4573-43b3-83ca-0d657091182b"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->1685217849,ExpressionUUID->"a45c3ad9-827c-4fc2-82a5-b3a9009ca80b"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"11cdb088-ddca-4ab8-9e5c-1c73d91c2592"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"786b9370-8ef5-4073-bd3d-784e6a42fb39"],
 "Scope",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "41a1ed4a-4a4c-48e1-8ae3-52cd3094ea05"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1293636265,ExpressionUUID->"c6a1ee95-4584-46fe-8ad7-afbb17347d6f"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "ExampleSubsection", "0"}, Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"0248fdd1-d0e4-4852-b265-8fc199ca3c5f"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"30e431a3-55a7-4c0b-9453-7ca178f4c79a"],
 "Expand",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "41f1e0ae-71d6-48ad-b685-69291a136450"]
}], "ExampleSubsection", "ExampleSubsection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1965812958,ExpressionUUID->"7043ef27-640d-4de7-b716-4c76bfd09208"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Expand"]], "paclet:ref/Expand"},
    "RefLink",
    BaseStyle->{"InlineFormula"}], "[", 
   RowBox[{
    TemplateBox[{
      Cell[
       TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
      "Q3 Package Symbol"},
     "PackageLink",
     BaseStyle->"InlineFormula"], "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        SubscriptBox[
         StyleBox["c", "TI"], 
         StyleBox["1", "TR"]], ",", 
        SubscriptBox[
         StyleBox["c", "TI"], 
         StyleBox["2", "TR"]], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        SubscriptBox[
         StyleBox["v", "TI"], 
         StyleBox["1", "TR"]], ",", 
        SubscriptBox[
         StyleBox["v", "TI"], 
         StyleBox["2", "TR"]], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "}"}]}], ",", " ", 
     StyleBox["op", "TI"]}], "]"}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "8725e564-d8fd-426e-a8f2-0cce9488b2cb"],
 " decomposes the controlled-unitary gate into a product of the CNOT and \
single-qubit rotations. Note that this ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "201ffca5-21c5-4ab4-be41-7225305cc75c"],
 " feature of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "ae898680-4e51-4cdf-9984-13eef18f7ed1"],
 " is still experimental (as of Q3 v2.11.2)."
}], "ExampleText",
 CellID->227879916,ExpressionUUID->"0c7aa4f3-37dd-4e0e-bd2e-59186a7adb07"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1801264145,ExpressionUUID->"71fb8275-6431-42f8-9f10-5c98244a4ac5"],

Cell["Consider a single-qubit unitary gate.", "ExampleText",
 CellID->1033495556,ExpressionUUID->"db782b97-aa82-4e66-be39-ffc32793b9ad"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{
   RowBox[{"Exp", "[", 
    RowBox[{
     RowBox[{"-", "I"}], "*", 
     RowBox[{"Pi", "/", "4"}]}], "]"}], "*", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Pi", "/", "3"}], ",", 
       RowBox[{"Pi", "/", "2"}], ",", 
       RowBox[{"Pi", "/", "6"}]}], "}"}], ",", 
     RowBox[{"S", "[", "2", "]"}]}], "]"}]}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1096870451,ExpressionUUID->"f44cb84c-1617-45fd-859e-accf2ebd223c"],

Cell[BoxData[
 RowBox[{
  SuperscriptBox["\[ExponentialE]", 
   RowBox[{"-", 
    FractionBox[
     RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]}]], " ", 
  RowBox[{"EulerRotation", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      FractionBox["\[Pi]", "3"], ",", 
      FractionBox["\[Pi]", "2"], ",", 
      FractionBox["\[Pi]", "6"]}], "}"}], ",", 
    InterpretationBox[
     SubscriptBox["S", 
      TemplateBox[{",", "\",\"", "2"},
       "RowWithSeparators"]],
     $CellContext`S[2, Q3`$]]}], "]"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->362970157,ExpressionUUID->"5c6da5c1-7e6e-4a4b-a4bc-2299566b9241"]
}, Open  ]],

Cell["Here is the matrix representation of the above gate.", "ExampleText",
 CellID->1955102746,ExpressionUUID->"76a7ca47-1fd7-419c-a51d-f57fe562138a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mat", "=", 
   RowBox[{
    RowBox[{"Matrix", "[", "op", "]"}], "//", "SimplifyThrough"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"mat", "//", "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->2059470547,ExpressionUUID->"c86952bf-725b-4ec0-9a9f-b5365bfb06f9"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"-", 
       FractionBox["\[ImaginaryI]", 
        SqrtBox["2"]]}], 
      FractionBox[
       RowBox[{"\[ImaginaryI]", " ", 
        RowBox[{"(", 
         RowBox[{"\[ImaginaryI]", "+", 
          SqrtBox["3"]}], ")"}]}], 
       RowBox[{"2", " ", 
        SqrtBox["2"]}]]},
     {
      FractionBox[
       RowBox[{
        RowBox[{"-", "\[ImaginaryI]"}], "+", 
        SqrtBox["3"]}], 
       RowBox[{"2", " ", 
        SqrtBox["2"]}]], 
      FractionBox["1", 
       SqrtBox["2"]]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {2, 2}, 0, {
     1, {{0, 2, 4}, {{1}, {2}, {2}, {1}}}, {
      Complex[0, -1] 2^Rational[-1, 2], Complex[0, Rational[1, 2]] 
       2^Rational[-1, 2] (Complex[0, 1] + 3^Rational[1, 2]), 2^
       Rational[-1, 2], Rational[1, 2] 
       2^Rational[-1, 2] (Complex[0, -1] + 3^Rational[1, 2])}}]]]]], "Output",\

 CellLabel->"Out[3]//MatrixForm=",
 CellID->163317930,ExpressionUUID->"6619d8f7-7b0c-4f30-83bb-b655575a4961"]
}, Open  ]],

Cell["\<\
Now, consider a controlled-unitary gate with the above gate acting on the \
target qubit.\
\>", "ExampleText",
 CellID->1600123813,ExpressionUUID->"789492ba-4f63-4904-8043-eee75f8aa180"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"cu", "=", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", "op", ",", 
     RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", "cu", "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->8884588,ExpressionUUID->"61eb7453-9767-442e-b8e4-fd7b76180024"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1}, E^(Complex[0, 
        Rational[-1, 4]] Pi) 
    Q3`EulerRotation[{
      Rational[1, 3] Pi, Rational[1, 2] Pi, Rational[1, 6] Pi}, 
      $CellContext`S[2, Q3`$]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->1841843936,ExpressionUUID->"60bc5d20-43b3-413d-991a-4547f1050634"]
}, Open  ]],

Cell["\<\
Decompose the controlled-unitary gate above into a product of single-qubit \
rotations and CNOT gate.\
\>", "ExampleText",
 CellID->777355164,ExpressionUUID->"bf3616c6-abdb-4186-be16-48d519cda364"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Expand", "[", "cu", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1865987295,ExpressionUUID->"7e24ce5d-ecc7-4235-9aea-c752d184cfad"],

Cell[BoxData[
 RowBox[{"Sequence", "[", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{
     RowBox[{"-", 
      FractionBox["\[Pi]", "12"]}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"C\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       InterpretationBox[
        SubscriptBox["S", 
         TemplateBox[{",", "\",\"", "1"},
          "RowWithSeparators"]],
        $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}], ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}]}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"B\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       InterpretationBox[
        SubscriptBox["S", 
         TemplateBox[{",", "\",\"", "1"},
          "RowWithSeparators"]],
        $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox["\[Pi]", "3"], ",", 
       FractionBox["\[Pi]", "4"], ",", "0"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"A\"\>"}]}], "]"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
           "Subsuperscript"],
          $CellContext`S[1, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         RowBox[{"-", 
          FractionBox["\[Pi]", "4"]}], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]}], "]"}]], "Output",
 CellLabel->"Out[5]=",
 CellID->1796926573,ExpressionUUID->"065cd094-b0b3-4b4e-a16a-27997bea903a"]
}, Open  ]],

Cell["Represent the decomposition in a quantum circuit.", "ExampleText",
 CellID->1490385628,ExpressionUUID->"c2eca4a6-5908-4d48-9fdb-eada5eb2ce3e"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "[", "cu", "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->984160605,ExpressionUUID->"9999c13b-9a3d-4b6e-877f-7602761e86eb"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {7, -1}}, {{0, -2}, {7, -2}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"C\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}}], 
     DiskBox[{2, -1}, 0.09], {CircleBox[{2, -2}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -2}, {2.2666666666666666`, -2}}, {{
         2, -2.2666666666666666`}, {2, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -2.4}, {3.4, -1.6}]}, 
     LineBox[{{2.6, -2.4}, {3.4, -2.4}, {3.4, -1.6}, {2.6, -1.6}, {
      2.6, -2.4}}], InsetBox[
      StyleBox["\<\"B\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {3, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{4, -1}, {4, -2}}], 
     DiskBox[{4, -1}, 0.09], {CircleBox[{4, -2}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -2}, {4.266666666666667, -2}}, {{
         4, -2.2666666666666666`}, {4, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{4.6, -2.4}, {5.4, -1.6}]}, 
     LineBox[{{4.6, -2.4}, {5.4, -2.4}, {5.4, -1.6}, {4.6, -1.6}, {
      4.6, -2.4}}], InsetBox[
      StyleBox["\<\"A\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {5, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -1.4}, {6.4, -0.6}]}, 
     LineBox[{{5.6, -1.4}, {6.4, -1.4}, {6.4, -0.6}, {5.6, -0.6}, {
      5.6, -1.4}}], InsetBox[
      StyleBox[
       TemplateBox[{"\"Z\"", 
         RowBox[{"-", 
           FractionBox["\[Pi]", "4"]}]},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {6, -1}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->298.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[Rational[-1, 12] Pi, {0, 0, 1}, 
    $CellContext`S[2, Q3`$], "Label" -> "C"], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{0, Rational[-1, 4] Pi, Rational[-1, 4] Pi}, 
    $CellContext`S[2, Q3`$], "Label" -> "B"], 
   Q3`CNOT[{$CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{Rational[1, 3] Pi, Rational[1, 4] Pi, 0}, 
    $CellContext`S[2, Q3`$], "Label" -> "A"], 
   Q3`Phase[Rational[-1, 4] Pi, 
    $CellContext`S[1, 3]]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->1269593865,ExpressionUUID->"4e402ee6-9e89-489f-b83a-bfac4e6f5921"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Elaborate", "[", "cu", "]"}], "-", 
   RowBox[{"Elaborate", "[", "new", "]"}]}], "//", "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->298820583,ExpressionUUID->"8e470220-2270-4db5-bc2f-98b5d8369bf7"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[7]=",
 CellID->196470098,ExpressionUUID->"dd8e7377-29ef-45fe-97e9-e80583f4fdd1"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "973e01be-e50a-4caa-9d7b-1da358e3d5e4"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1705608657,ExpressionUUID->"fdb16c1f-65f0-41d4-bd3a-8efdae87f25a"],

Cell[TextData[{
 "The ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "1340c724-9dbc-4c8b-9805-bd4cc504938c"],
 " feature of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "6b93201b-4825-4f95-bcff-472e135328da"],
 " is supposed to be used inside ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["QuantumCircuit"]], "paclet:Q3/ref/QuantumCircuit", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "4eb0932b-b6a9-4285-9e6e-9ec9dc0a223f"],
 ". If you want to analyse or check the decomposition, the following example \
may be useful."
}], "ExampleText",
 CellID->181077262,ExpressionUUID->"2d7e6b91-089e-46bf-872e-62fb7e3771f7"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"cmp", "=", 
  RowBox[{"{", 
   RowBox[{"Expand", "[", "cu", "]"}], "}"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"Notice", " ", 
    RowBox[{
     RowBox[{"{", "\[Ellipsis]", "}"}], "."}]}], " ", "*)"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1563352008,ExpressionUUID->"f6d84b02-f8d0-46e1-9c31-c4e075ddbf10"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{
     RowBox[{"-", 
      FractionBox["\[Pi]", "12"]}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"C\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       InterpretationBox[
        SubscriptBox["S", 
         TemplateBox[{",", "\",\"", "1"},
          "RowWithSeparators"]],
        $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}], ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}]}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"B\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       InterpretationBox[
        SubscriptBox["S", 
         TemplateBox[{",", "\",\"", "1"},
          "RowWithSeparators"]],
        $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox["\[Pi]", "3"], ",", 
       FractionBox["\[Pi]", "4"], ",", "0"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"A\"\>"}]}], "]"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
           "Subsuperscript"],
          $CellContext`S[1, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         RowBox[{"-", 
          FractionBox["\[Pi]", "4"]}], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]}], "}"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->1452639762,ExpressionUUID->"1a0ba537-8ad3-4dea-92cd-c8b9e5c1223a"]
}, Open  ]],

Cell["You can remove the labels.", "ExampleText",
 CellID->1652630181,ExpressionUUID->"4868bc9a-b530-45cd-ba8f-03165a086a0c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"more", "=", 
  RowBox[{"QuantumCircuitTrim", "[", "cmp", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->63469277,ExpressionUUID->"1a99cb39-aa0b-4cff-aebb-6a6dda19de11"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{
     RowBox[{"-", 
      FractionBox["\[Pi]", "12"]}], ",", 
     RowBox[{"{", 
      RowBox[{"0", ",", "0", ",", "1"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       InterpretationBox[
        SubscriptBox["S", 
         TemplateBox[{",", "\",\"", "1"},
          "RowWithSeparators"]],
        $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}], ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}]}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       InterpretationBox[
        SubscriptBox["S", 
         TemplateBox[{",", "\",\"", "1"},
          "RowWithSeparators"]],
        $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox["\[Pi]", "3"], ",", 
       FractionBox["\[Pi]", "4"], ",", "0"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "2"},
        "RowWithSeparators"]],
      $CellContext`S[2, Q3`$]]}], "]"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
           "Subsuperscript"],
          $CellContext`S[1, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         RowBox[{"-", 
          FractionBox["\[Pi]", "4"]}], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]}], "}"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->648436383,ExpressionUUID->"ace5e7cb-8d37-4133-b9ac-de80f357dacb"]
}, Open  ]],

Cell[TextData[{
 "You can directly multiply the components to check the equivalence. Here, \
notice ",
 StyleBox["Reverse[cmp]", "Input"],
 "."
}], "ExampleText",
 CellID->1753917898,ExpressionUUID->"496b1728-af9e-4ac7-b616-8e54245465fa"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Apply", "[", 
     RowBox[{"Multiply", ",", 
      RowBox[{"Reverse", "@", "cmp"}]}], "]"}], "-", "cu"}], "//", 
   "Elaborate"}], "//", "FullSimplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1043909238,ExpressionUUID->"5f5ee38e-11a3-414b-a7d1-fe8b6bec43a2"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->828054421,ExpressionUUID->"172460cb-e314-4e81-9463-a1a5755b145b"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "7f26634e-daa4-4185-b379-cdaec91cf4eb"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1600539001,ExpressionUUID->"31ae6430-8c7b-44cd-8300-670c45ce1b5f"],

Cell[TextData[{
 "The ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "b78d7b08-2be2-4ae1-b461-d0e33c31a1ca"],
 " feature also applies to multi-control unitary gates. For example, consider \
the above unitary gate controlled by two qubits ",
 StyleBox["S[0,$]", "Input"],
 " and ",
 StyleBox["S[1,$]", "Input"],
 "."
}], "ExampleText",
 CellID->595717937,ExpressionUUID->"79199969-d11b-4cb4-a2e6-7269e9019f29"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ccu", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"0", ",", "1"}], "}"}]}], ",", "op", ",", 
    RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1811053528,ExpressionUUID->"500055e9-8455-419c-9fdf-7e03c8b7ed13"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "0"},
         "RowWithSeparators"]],
       $CellContext`S[0, Q3`$]], "\[Rule]", "1"}], ",", 
     RowBox[{
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "1"},
         "RowWithSeparators"]],
       $CellContext`S[1, Q3`$]], "\[Rule]", "1"}]}], "}"}], ",", 
   RowBox[{
    SuperscriptBox["\[ExponentialE]", 
     RowBox[{"-", 
      FractionBox[
       RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]}]], " ", 
    RowBox[{"EulerRotation", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        FractionBox["\[Pi]", "3"], ",", 
        FractionBox["\[Pi]", "2"], ",", 
        FractionBox["\[Pi]", "6"]}], "}"}], ",", 
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]]}], "]"}]}], ",", 
   RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"U\"\>"}]}], "]"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->542256006,ExpressionUUID->"b5dff800-6ba0-4abf-89a7-e84fc3a9c059"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qcc", "=", 
  RowBox[{"QuantumCircuit", "[", "ccu", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1793861229,ExpressionUUID->"6e0e1754-9344-49b1-8f8a-89c82edae3b9"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     DiskBox[{1, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[0, Q3`$] -> 1, $CellContext`S[1, Q3`$] -> 
     1}, E^(Complex[0, 
        Rational[-1, 4]] Pi) 
    Q3`EulerRotation[{
      Rational[1, 3] Pi, Rational[1, 2] Pi, Rational[1, 6] Pi}, 
      $CellContext`S[2, Q3`$]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->615848182,ExpressionUUID->"389abbdc-0777-4795-91f3-d4eaddecf84a"]
}, Open  ]],

Cell[TextData[{
 "Decompose the quantum circuit above into a product of the multi-controlled \
NOT gate  and single-qubit rotations. (See also the ",
 ButtonBox["Generalization & Extensions",
  BaseStyle->"Link",
  ButtonData->"paclet:Q3/ref/ControlledGate#1020263627"],
 " section below.)"
}], "ExampleText",
 CellID->1051097161,ExpressionUUID->"caa8d7d5-c50e-46f8-aeb9-d2402a1df659"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "[", "ccu", "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1765521323,ExpressionUUID->"d1091702-79cb-4981-ba49-cb4d7dba0090"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {7, -1}}, {{0, -2}, {7, -2}}, {{0, -3}, {7, -3}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"C\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}}], 
     DiskBox[{2, -1}, 0.09], 
     DiskBox[{2, -2}, 0.09], {CircleBox[{2, -3}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -3}, {2.2666666666666666`, -3}}, {{
         2, -3.2666666666666666`}, {2, -2.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -3.4}, {3.4, -2.6}]}, 
     LineBox[{{2.6, -3.4}, {3.4, -3.4}, {3.4, -2.6}, {2.6, -2.6}, {
      2.6, -3.4}}], InsetBox[
      StyleBox["\<\"B\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {3, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}}], 
     DiskBox[{4, -1}, 0.09], 
     DiskBox[{4, -2}, 0.09], {CircleBox[{4, -3}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -3}, {4.266666666666667, -3}}, {{
         4, -3.2666666666666666`}, {4, -2.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{4.6, -3.4}, {5.4, -2.6}]}, 
     LineBox[{{4.6, -3.4}, {5.4, -3.4}, {5.4, -2.6}, {4.6, -2.6}, {
      4.6, -3.4}}], InsetBox[
      StyleBox["\<\"A\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {5, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{6, -1}, {6, -2}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -2.4}, {6.4, -1.6}]}, 
     LineBox[{{5.6, -2.4}, {6.4, -2.4}, {6.4, -1.6}, {5.6, -1.6}, {
      5.6, -2.4}}], InsetBox[
      StyleBox[
       TemplateBox[{"\"Z\"", 
         RowBox[{"-", 
           FractionBox["\[Pi]", "4"]}]},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {6, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->298.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[Rational[-1, 12] Pi, {0, 0, 1}, 
    $CellContext`S[2, Q3`$], "Label" -> "C"], 
   Q3`CNOT[{$CellContext`S[0, Q3`$] -> 1, $CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{0, Rational[-1, 4] Pi, Rational[-1, 4] Pi}, 
    $CellContext`S[2, Q3`$], "Label" -> "B"], 
   Q3`CNOT[{$CellContext`S[0, Q3`$] -> 1, $CellContext`S[1, Q3`$] -> 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{Rational[1, 3] Pi, Rational[1, 4] Pi, 0}, 
    $CellContext`S[2, Q3`$], "Label" -> "A"], 
   Q3`ControlledGate[{$CellContext`S[0, Q3`$] -> 1}, 
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]]]], "Output",
 CellLabel->"Out[3]=",
 CellID->462467201,ExpressionUUID->"8d42b1ba-d1c1-480a-b51a-803bfbdf2a64"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"EchoTiming", "[", 
  RowBox[{
   RowBox[{"qcc", "-", "new"}], "//", "Elaborate"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1192347325,ExpressionUUID->"b1b686f0-ef19-4317-8b2d-973c6b14e8e5"],

Cell[BoxData["0.460317`"], "EchoTiming",
 CellID->1246234138,ExpressionUUID->"e3c360b2-11df-4151-99bb-01ee8e55a980"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[4]=",
 CellID->1049148175,ExpressionUUID->"a9ceb8db-98dc-4ca8-a47c-2dbaddae3984"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "0"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"220db24a-343f-4bb8-a257-eb42d3586617"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"3bbadebd-b694-4aac-8f35-e409f56b88a7"],
 "Generalizations & Extensions",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(2)", "ExampleCount",ExpressionUUID->
  "5d1ee9a8-380a-4a7c-bc72-a14b6da8ab12"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1020263627,ExpressionUUID->"2a2b669f-040e-49c3-9f03-3731259755c8"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->54597739,ExpressionUUID->"d99a708d-487c-469f-b6d1-781a1847c020"],

Cell["\<\
When the unitary operator is a complex number of unit amplitude, then the \
controlled-U gate is equivalent to the phase gate on the controlled qubit.\
\>", "ExampleText",
 CellID->1658935743,ExpressionUUID->"ce1bb20e-d226-4061-b0c9-827052c6e4a2"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Let", "[", 
  RowBox[{"Real", ",", "\[Phi]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"z", "=", 
  RowBox[{"Exp", "[", 
   RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->450269680,ExpressionUUID->"07b011eb-009c-4d3c-8d88-f0caf64477f4"],

Cell[BoxData[
 SuperscriptBox["\[ExponentialE]", 
  RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]]], "Output",
 CellLabel->"Out[2]=",
 CellID->981427528,ExpressionUUID->"c907f9eb-ecf5-4449-b02f-192adf3010af"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"S", "[", "1", "]"}], ",", "z"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->113446564,ExpressionUUID->"5fe293ac-8bc2-45a2-b34d-2d32a7052650"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{"S", 
          TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       RowBox[{"arg", "(", 
        SuperscriptBox["\[ExponentialE]", 
         RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]], ")"}], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[
   Arg[E^(Complex[0, 1] $CellContext`\[Phi])], 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[3]=",
 CellID->1745505536,ExpressionUUID->"620c8392-c4fd-4cf3-8e08-b293fab40252"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", "z"}], "]"}], "/.", 
  RowBox[{"{", 
   RowBox[{"\[Phi]", "\[Rule]", 
    RowBox[{"Pi", "/", "3"}]}], "}"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1884776724,ExpressionUUID->"20541f68-d4d5-403a-9b7c-b35230ba90d8"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{"S", 
          TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       FractionBox["\[Pi]", "3"], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[Rational[1, 3] Pi, 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->649329666,ExpressionUUID->"5d409798-4635-4943-877d-e67a8b29a87c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", 
     RowBox[{
      RowBox[{"S", "[", 
       RowBox[{"2", ",", "0"}], "]"}], " ", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}], ",", 
     RowBox[{"\"\<Label\>\"", "\[Rule]", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1389124015,ExpressionUUID->"a9538de2-cc5f-4e43-a03c-e888e971dcf6"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1}, 
    E^(Complex[0, 1] $CellContext`\[Phi]) $CellContext`S[2, 0], "Label" -> 
    E^(Complex[0, 1] $CellContext`\[Phi])]]]], "Output",
 CellLabel->"Out[5]=",
 CellID->697044296,ExpressionUUID->"d4e16d3a-3028-4a28-843a-66e599e2a779"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc1", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", " ", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}], ",", 
      RowBox[{"\"\<Label\>\"", "\[Rule]", 
       RowBox[{"Exp", "[", 
        RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<Visible\>\"", "\[Rule]", 
     RowBox[{"S", "[", "2", "]"}]}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->125637926,ExpressionUUID->"65b1bae5-0660-4eef-b5a3-603d47994957"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
     LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
      0.6, -1.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -1}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Phase[
    Arg[E^(Complex[0, 1] $CellContext`\[Phi])], 
    $CellContext`S[1, 3], "Label" -> E^(Complex[0, 1] $CellContext`\[Phi])], 
   "Visible" -> $CellContext`S[2]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->2005385419,ExpressionUUID->"28db1e5c-609d-4e07-bd79-ca303984509e"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc1"}], "]"}], "//", "FullSimplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->1909614846,ExpressionUUID->"9dd3297d-b0d9-4eb7-b005-025ea5b87a1c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[7]=",
 CellID->1347063767,ExpressionUUID->"4a014640-39fe-4fa9-a292-3e4db57094f3"]
}, Open  ]],

Cell["\<\
When the number is not of unit magnitude, it gives a warning message.\
\>", "ExampleText",
 CellID->511713125,ExpressionUUID->"15d62ffe-8c12-4b2b-b186-afd2fe6eadb1"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"S", "[", "1", "]"}], ",", 
   RowBox[{"1", "+", "I"}]}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->375479679,ExpressionUUID->"30d874de-864b-4b1c-9e38-02f2d12a42e8"],

Cell[BoxData[
 TemplateBox[{
  "ControlledGate", "nonuni", 
   "\"The operator \\!\\(\\*RowBox[{\\\"1\\\", \\\"+\\\", \\\"\[ImaginaryI]\\\
\"}]\\) is not unitary.\"", 2, 537, 5, 18472843316783986475, "Local", 
   "Q3`ControlledGate"},
  "MessageTemplate2"]], "Message", "MSG",
 CellLabel->"During evaluation of In[8]:=",
 CellID->764133916,ExpressionUUID->"4c6be322-9754-4860-bf55-18f2a487790d"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{"S", 
          TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
          TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       FractionBox["\[Pi]", "4"], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[Rational[1, 4] Pi, 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[8]=",
 CellID->846517152,ExpressionUUID->"67265aa3-8b56-4603-bfca-c882ccacfb72"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "1a5bc3c4-ecf0-492e-8d57-7143fa8e45a7"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->174573991,ExpressionUUID->"b102b10c-2e0c-4f52-af7d-4f35c16a731a"],

Cell[TextData[{
 "When there are more than one control qubits, then the controlled-U gate \
induces a relative phase shift on the state ",
 Cell[BoxData[
  TemplateBox[{
    RowBox[{"11", "\[Ellipsis]1"}]},
   "Ket"]],ExpressionUUID->"9d2f3b7b-542e-481d-b1b0-3436ac17c901"],
 "."
}], "ExampleText",
 CellID->1484041902,ExpressionUUID->"14c34e30-a4de-4b49-ac74-cd06839bb1cd"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2"}], "}"}]}], ",", 
    RowBox[{"Exp", "[", 
     RowBox[{"I", " ", 
      RowBox[{"\[Pi]", "/", "4"}]}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1674411155,ExpressionUUID->"dc19ad6b-fe7c-4749-b923-c11da779a41e"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     InterpretationBox[
      SubscriptBox["S", 
       TemplateBox[{",", "\",\"", "1"},
        "RowWithSeparators"]],
      $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], "}"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{"S", 
            TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
            TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
           "Subsuperscript"],
          $CellContext`S[2, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         FractionBox["\[Pi]", "4"], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[1, 4] Pi, 
     $CellContext`S[2, 3]]]}], "]"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->84084447,ExpressionUUID->"adc0fb7c-fc03-4254-b777-4e18b375e2dc"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "@", "op"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1750426850,ExpressionUUID->"dacf46e0-996f-4937-91d7-16d92e1787ca"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"3", "+", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"-", "1"}], "+", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"\[VeryThinSpace]", "\"\[VeryThinSpace]\"", 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{"S", 
           TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
           TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]}, 
          "Subsuperscript", SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowWithSeparators"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "1"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{"S", 
      TemplateBox[{",", "\",\"", "2"}, "RowWithSeparators"], 
      TemplateBox[{",", "\",\"", "\"Z\""}, "RowWithSeparators"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]]}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1361202067,ExpressionUUID->"b326a8f9-7ee1-4de1-a2b8-9d5a3f6eb7e1"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Matrix", "[", "op", "]"}], "//", "Simplify"}], "//", 
  "MatrixForm"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->295000539,ExpressionUUID->"97d44f6c-079f-45b1-a0a3-67e5bde7554e"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", "0"},
     {"0", "1", "0", "0"},
     {"0", "0", "1", "0"},
     {"0", "0", "0", 
      FractionBox[
       RowBox[{"1", "+", "\[ImaginaryI]"}], 
       SqrtBox["2"]]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {4, 4}, 0, {
     1, {{0, 1, 2, 3, 4}, {{1}, {2}, {3}, {4}}}, {
      1, 1, 1, Complex[1, 1] 2^Rational[-1, 2]}}]]]]], "Output",
 CellLabel->"Out[3]//MatrixForm=",
 CellID->1707946302,ExpressionUUID->"bd73753d-e2fd-49bd-8bcd-284948fb6907"]
}, Open  ]],

Cell["\<\
This expression is equivalent to the above one, but does not expand.\
\>", "ExampleText",
 CellID->2142135012,ExpressionUUID->"e8e32497-7873-4774-8f47-101658e21881"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2"}], "}"}]}], ",", 
    RowBox[{
     RowBox[{"Exp", "[", 
      RowBox[{"I", " ", 
       RowBox[{"\[Pi]", "/", "4"}]}], "]"}], " ", 
     RowBox[{"S", "[", 
      RowBox[{"3", ",", "0"}], "]"}]}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1434563406,ExpressionUUID->"73da201d-7fa1-4349-aff3-8e4546d704a8"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "1"},
         "RowWithSeparators"]],
       $CellContext`S[1, Q3`$]], "\[Rule]", "1"}], ",", 
     RowBox[{
      InterpretationBox[
       SubscriptBox["S", 
        TemplateBox[{",", "\",\"", "2"},
         "RowWithSeparators"]],
       $CellContext`S[2, Q3`$]], "\[Rule]", "1"}]}], "}"}], ",", 
   RowBox[{
    SuperscriptBox["\[ExponentialE]", 
     FractionBox[
      RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]], " ", 
    InterpretationBox[
     TemplateBox[{"S", 
       TemplateBox[{",", "\",\"", "3"}, "RowWithSeparators"], 
       TemplateBox[{",", "\",\"", "0"}, "RowWithSeparators"]},
      "Subsuperscript"],
     $CellContext`S[3, 0]]}]}], "]"}]], "Output",
 CellLabel->"Out[4]=",
 CellID->666864498,ExpressionUUID->"56b4a19c-12f8-4f9f-9025-52a097dfa310"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Elaborate", "[", "op", "]"}], "-", 
   RowBox[{"Elaborate", "[", "new", "]"}]}], "//", "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1544994010,ExpressionUUID->"e3064ca8-e8d2-4efc-b849-3137a78ebf7c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[5]=",
 CellID->703758408,ExpressionUUID->"534d69b3-07c9-4b31-9cce-e59dbce009a8"]
}, Open  ]],

Cell["\<\
The equivalence can also be examined in quantum circuit model. The \
controlled-unitary gate with the unitary gate given by the global phase shift \
is represented by the following quantum circuit model.\
\>", "ExampleText",
 CellID->382850454,ExpressionUUID->"65be8571-3cf9-4553-85a7-395894e269f2"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "@", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], ",", 
     RowBox[{
      RowBox[{"S", "[", 
       RowBox[{"4", ",", "0"}], "]"}], 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}], ",", 
     RowBox[{"\"\<Label\>\"", "\[Rule]", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->1698297027,ExpressionUUID->"1793343c-9063-4915-a491-af9497437511"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}, {{
     0, -4}, {2, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     DiskBox[{1, -1}, 0.09], DiskBox[{1, -2}, 0.09], DiskBox[{1, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, 
     LineBox[{{0.6, -4.4}, {1.4, -4.4}, {1.4, -3.6}, {0.6, -3.6}, {
      0.6, -4.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -4}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-9, 2], 
       Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 1, $CellContext`S[2, Q3`$] -> 
     1, $CellContext`S[3, Q3`$] -> 1}, 
    E^(Complex[0, 1] $CellContext`\[Phi]) $CellContext`S[4, 0], "Label" -> 
    E^(Complex[0, 1] $CellContext`\[Phi])]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->1114449803,ExpressionUUID->"78331e71-ee16-4744-85ea-86847a954482"]
}, Open  ]],

Cell["\<\
It is equivalent to the following three quantum circuit models involving \
(relative) phase-shift gate, and leaving the forth qubit intact.\
\>", "ExampleText",
 CellID->42562061,ExpressionUUID->"6e2d2745-0a7b-4b9e-bfbd-a37e9cfb24ba"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"qc1", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"1", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qc2", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "3"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"2", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qc3", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"3", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"GraphicsRow", "@", 
  RowBox[{"{", 
   RowBox[{"qc1", ",", "qc2", ",", "qc3"}], "}"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->385898355,ExpressionUUID->"d7f533b5-da8d-4744-af3a-cc59bfb42591"],

Cell[BoxData[
 GraphicsBox[{{}, {InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -1}}], 
           DiskBox[{1, -1}, 0.09], DiskBox[{1, -2}, 0.09], 
           DiskBox[{1, -3}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
           LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
            0.6, -1.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -1}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 
           1, $CellContext`S[2, Q3`$] -> 1, $CellContext`S[3, Q3`$] -> 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[1, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {63.9625, -76.65}, {Center, Center}, {118.99999999999999, 146.},
     
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}], 
    InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -3}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
           DiskBox[{1, -3}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
           LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
            0.6, -2.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -2}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 
           1, $CellContext`S[3, Q3`$] -> 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[2, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {191.8875, -76.65}, {Center, Center}, {119., 146.},
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}], 
    InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
           DiskBox[{1, -2}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
           LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
            0.6, -3.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -3}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{$CellContext`S[1, Q3`$] -> 
           1, $CellContext`S[2, Q3`$] -> 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[3, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {319.8125, -76.65}, {Center, Center}, {119., 146.},
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}]}, {}},
  AxesStyle->Large,
  FrameStyle->Large,
  ImageSize->{
    UpTo[600], Automatic},
  PlotRange->{{0, 383.775}, {-153.3, 0}},
  PlotRangePadding->{6, 5}]], "Output",
 CellLabel->"Out[7]=",
 CellID->1521845662,ExpressionUUID->"64d7b564-06b1-4449-bddd-374c16a80102"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc1"}], "]"}], "//", 
  "Simplify"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc2"}], "]"}], "//", 
  "Simplify"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc3"}], "]"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->286463219,ExpressionUUID->"f0f0bd4c-571c-4294-80bb-fccbbc5be354"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->239302337,ExpressionUUID->"c7fdecb9-3a30-4721-933a-ff6e4f53c43c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->1864990775,ExpressionUUID->"de5a6b0e-2860-4cb2-a200-f2e65b81c141"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->228643813,ExpressionUUID->"00046a3c-bfb3-4bff-beac-7d8b66f433b2"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, 
  Closed]]]],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedFunction.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"See", " ", "Also"}], "SeeAlsoSection"]},
      {Cell[TextData[{
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["QuantumCircuit"]], "paclet:Q3/ref/QuantumCircuit", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "6b6e3582-36df-4cdf-9747-f3ef5c15f490"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "9ddcdd82-1891-4116-a229-bf864d2c6bac"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["CZ"]], "paclet:Q3/ref/CZ", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "07864278-d9ac-49c0-a955-ad95a0778cc7"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["ControlledPower"]], "paclet:Q3/ref/ControlledPower", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "70e46ca8-18c1-4a1a-a405-368bd1d373fe"]
       }], "SeeAlso",ExpressionUUID->"2069cc9a-73bc-4a71-9a7f-600230bac6a8"]}
     }]}
  }]], "SeeAlsoSection",ExpressionUUID->"1ca7a8d3-d3b5-4c74-8e20-\
d900e30863a5"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedTutorial.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox["Tutorials", "TutorialsSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Two-Qubit Gates"]], "paclet:Q3/tutorial/TwoQubitGates"},
          
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "d41cafb1-73ed-4f4d-8e4d-0b2e250af6b7"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Computation: Overview"]], 
           "paclet:Q3/tutorial/QuantumComputationOverview"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "dcfb9f66-bfbf-442b-a31e-e503a9f8b1f0"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Multi-Control Unitary Gates"]], 
           "paclet:Q3/tutorial/MultiControlUnitaryGates"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "1cb46c29-e557-4290-a1ed-3751c39250dc"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Information Systems with Q3"]], 
           "paclet:Q3/tutorial/QuantumInformationSystems"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "10b76f39-0fc2-40bd-a81a-4686f53984c3"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quick Quantum Computing with Q3"]], 
           "paclet:Q3/tutorial/QuickQuantumComputingWithQ3"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "ba3d675f-5ca2-4699-8005-fddd5bf2ca56"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3: Quick Start"]], "paclet:Q3/tutorial/Q3QuickStart"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "18eb3008-3e75-4e86-bb30-d7e680083ff3"]}]}
     }]}
  }]], "TutorialsSection",ExpressionUUID->"731bcfd4-5761-4b58-9258-\
3edb15474f34"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, "RelatedGuide.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Related", " ", "Guides"}], "MoreAboutSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3: Symbolic Quantum Simulation"]], 
           "paclet:Q3/guide/Q3"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "66bc6b54-cd4a-4d03-a851-6c0e7df22f4e"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Information Systems"]], 
           "paclet:Q3/guide/QuantumInformationSystems"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "bebcb5b4-972b-43c7-9303-22fd607a9c0e"]}]}
     }]}
  }]], "MoreAboutSection",ExpressionUUID->"9f281afb-d0a3-422a-a2f8-\
0f59685655fd"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{29},
     "Spacer1"], GridBox[{
      {
       RowBox[{
        TemplateBox[{17},
         "Spacer1"], 
        StyleBox[
         RowBox[{"Related", " ", "Links"}], "RelatedLinksSection"]}]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "M. Nielsen and I. L. Chuang (2022)"}]]]], 
             "https://doi.org/10.1017/CBO9780511976667"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "ca80f13a-6a30-4833-a541-607652148d53"]}]],ExpressionUUID->
         "c2f0f4e8-0311-4f7e-bf11-18cfd37b9973"],
        StyleBox[
        ", Quantum Computation and Quantum Information (Cambridge University \
Press, 2011).",
         FontSlant->"Plain"]
       }], "RelatedLinks",ExpressionUUID->
        "a40c8c48-8649-4007-a575-9a4705f7e194"]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "Mahn-Soo Choi (2022)"}]]]], 
             "https://doi.org/10.1007/978-3-030-91214-7"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "a399161c-ca88-4b16-8be2-aeef4aa77bd6"]}]],ExpressionUUID->
         "a423e75d-3c28-4ffb-ba30-c95e2d6e845e"],
        ", A Quantum Computation Workbook (Springer, 2022)."
       }], "RelatedLinks",ExpressionUUID->
        "d3b67a3d-e9bf-456f-8b4c-1b9fb674ad64"]}
     }]}
  }]], "RelatedLinksSection",ExpressionUUID->"61ec8fae-ceeb-4b3b-9784-\
176cfa751588"],

Cell[" ", "FooterCell",ExpressionUUID->"44ac70c7-f061-4ef0-8468-7efd48a32f29"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{900, 830},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"ControlledGate",
TaggingRules->{
 "ModificationHighlight" -> False, "ColorType" -> "", "LinkTrails" -> "", 
  "HasOptions" -> True, "ExampleCounter" -> 1, 
  "Openers" -> {
   "PrimaryExamplesSection" -> Open, 
    "ExampleSection" -> {"0" -> Open, "1" -> Closed, "2" -> Closed}, 
    "NotesSection" -> Closed, "ExampleSubsection" -> {"0" -> Closed}}, 
  "NewStyles" -> True, "CitationPopupData" -> $Failed, "ShowCitation" -> 
  False, "RootCaptions" -> "", 
  "Metadata" -> {
   "built" -> "{2023, 7, 20, 9, 20, 21.654350}", 
    "history" -> {"12", "13.3", "", ""}, "context" -> "Q3`", "keywords" -> {},
     "specialkeywords" -> {}, "tutorialcollectionlinks" -> {}, "index" -> 
    True, "label" -> "Q3 Symbol", "language" -> "en", "paclet" -> "Q3", 
    "status" -> "None", "summary" -> 
    "ControlledGate[{c1, c2, ...}, op] represents a multi-control \
multi-target unitary gate with control qubits c1, c2, ... and unitary \
operator op acting on the target qubits. ControlledGate[c, op] is equivalent \
to ControlledGate[{c}, op]. ControlledGate[{c1 -> v1, c2 -> v2, ...}, op] \
represents a variation of the controlled-unitary gate, where operator op \
operates when the control qubits c1, c2, ... take the logical values v1, v2, \
..., respectively. ControlledGate[c -> v, ...] is automatically converted to \
ControlledGate[{c -> v}, ...]. ControlledGate[{c1, c2, ...} -> v, ...] is \
automatically converted to ControlledGate[{c1 -> v, c2 -> v, ...}, ...].", 
    "synonyms" -> {}, "tabletags" -> {}, "title" -> "ControlledGate", 
    "titlemodifier" -> "", "metadescription" -> "", "windowtitle" -> 
    "ControlledGate", "type" -> "Symbol", "uri" -> "Q3/ref/ControlledGate"}},
CellContext->"Global`",
FrontEndVersion->"13.3 for Mac OS X ARM (64-bit) (June 3, 2023)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> FrontEnd`FileName[{"Wolfram"}, "Reference.nb"]]], 
   Cell[
    StyleData["Input"], CellContext -> "Global`"], 
   Cell[
    StyleData["Output"], CellContext -> "Global`"]}, Visible -> False, 
  FrontEndVersion -> "13.3 for Mac OS X ARM (64-bit) (June 3, 2023)", 
  StyleDefinitions -> "Default.nb"],
ExpressionUUID->"c8104229-ae27-4988-ab13-dd7d93e19dcf"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "PrimaryExamplesSection"->{
  Cell[22900, 640, 1390, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"5a65fdf2-c994-4029-8bb3-19214494c601",
   CellTags->"PrimaryExamplesSection",
   CellID->1498752542]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"PrimaryExamplesSection", 152775, 4354}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[586, 21, 7615, 185, 57, "AnchorBarGrid",ExpressionUUID->"2333d3ae-0909-4b7f-a9ad-4d904abd5e8a",
 CellID->1],
Cell[8204, 208, 85, 0, 23, "ContextNameCell",ExpressionUUID->"d46ddba0-03a1-496c-bf41-69c8d911538c"],
Cell[CellGroupData[{
Cell[8314, 212, 1177, 31, 60, "ObjectNameGrid",ExpressionUUID->"e2add42d-fcd6-4514-9c95-b563e1f1a03b"],
Cell[9494, 245, 7378, 210, 452, "Usage",ExpressionUUID->"d5ff7cc3-66ef-4e35-94b3-54814ac31901"]
}, Open  ]],
Cell[CellGroupData[{
Cell[16909, 460, 1899, 47, 37, "NotesSection",ExpressionUUID->"b13f736e-f804-4bcb-a6ca-9ae082aa8823",
 CellGroupingRules->{"SectionGrouping", 50},
 CellID->1686950548],
Cell[18811, 509, 920, 28, 70, "Notes",ExpressionUUID->"6670571f-a860-473b-8687-f6f46ba1239e",
 CellID->1702748548],
Cell[19734, 539, 459, 13, 70, "Notes",ExpressionUUID->"b5b55ba7-a0fb-44e0-bb13-0b0996739ed8",
 CellID->491054349],
Cell[20196, 554, 876, 26, 70, "Notes",ExpressionUUID->"c557efd5-d85f-4cc4-b770-219c017d4918",
 CellID->2019652723],
Cell[21075, 582, 848, 25, 70, "Notes",ExpressionUUID->"50ad500f-0874-4a12-9f31-91f2c18b8ae0",
 CellID->384437925],
Cell[21926, 609, 847, 25, 70, "Notes",ExpressionUUID->"2682e52e-904d-4522-a9cf-bc88e79d7a8b",
 CellID->1895961038]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],
Cell[CellGroupData[{
Cell[22900, 640, 1390, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"5a65fdf2-c994-4029-8bb3-19214494c601",
 CellTags->"PrimaryExamplesSection",
 CellID->1498752542],
Cell[24293, 679, 191, 3, 31, "Input",ExpressionUUID->"c8cb564b-093f-410b-879f-6a85825f367e",
 CellID->851865642],
Cell[CellGroupData[{
Cell[24509, 686, 1368, 36, 31, "ExampleSection",ExpressionUUID->"6a800faf-9b5b-4da6-91a1-c8f5ceb9f07a",
 CellID->1698277731],
Cell[25880, 724, 209, 5, 29, "Input",ExpressionUUID->"baec094e-fa94-458f-9046-ee0c3e6ee972",
 CellID->1403695601],
Cell[26092, 731, 170, 3, 38, "ExampleText",ExpressionUUID->"9524945c-8d35-41be-8523-2f18acd83b35",
 CellID->493202586],
Cell[CellGroupData[{
Cell[26287, 738, 327, 9, 29, "Input",ExpressionUUID->"4354d585-bd81-45a3-b780-b1a61094b1d1",
 CellID->1804103712],
Cell[26617, 749, 613, 17, 40, "Output",ExpressionUUID->"8a793755-83c1-4041-828e-e90f8671a39c",
 CellID->1341663885]
}, Open  ]],
Cell[CellGroupData[{
Cell[27267, 771, 189, 4, 29, "Input",ExpressionUUID->"5ba2af87-c4be-4b41-a5fd-b3b44b3ef910",
 CellID->1699357571],
Cell[27459, 777, 1562, 41, 52, "Output",ExpressionUUID->"9273bcc5-2a5e-46de-8351-ba21375aa1fe",
 CellID->1174949083]
}, Open  ]],
Cell[CellGroupData[{
Cell[29058, 823, 218, 5, 70, "Input",ExpressionUUID->"b6408331-aaa1-473a-bccf-fc54a169fc74",
 CellID->388513540],
Cell[29279, 830, 803, 23, 100, "Output",ExpressionUUID->"ba03480a-2de6-496a-8d17-2dfeed2012f8",
 CellID->107098271]
}, Open  ]],
Cell[CellGroupData[{
Cell[30119, 858, 228, 6, 70, "Input",ExpressionUUID->"0abb59b9-83fe-458c-8b32-b579e5a49f9e",
 CellID->227378000],
Cell[30350, 866, 2427, 61, 52, "Output",ExpressionUUID->"ea94ccef-ca81-433f-85e5-46ab925c6669",
 CellID->2087976527]
}, Open  ]],
Cell[32792, 930, 581, 15, 70, "ExampleText",ExpressionUUID->"4d12dc5f-6f09-4488-9d46-16551fee856b",
 CellID->976135211],
Cell[CellGroupData[{
Cell[33398, 949, 335, 9, 70, "Input",ExpressionUUID->"1fd9e696-7166-4688-86e9-4504b2175f03",
 CellID->1713072528],
Cell[33736, 960, 1561, 41, 52, "Output",ExpressionUUID->"fd72e9ac-05a5-4053-af9d-bf50a0d03d04",
 CellID->563310771]
}, Open  ]],
Cell[CellGroupData[{
Cell[35334, 1006, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"cd828da9-3fdc-4262-8d12-ecd6569ef8c5",
 CellID->1117862758],
Cell[35580, 1013, 210, 4, 70, "ExampleText",ExpressionUUID->"ca28bcd1-bf07-4451-9475-4dafb4cb4161",
 CellID->66695600],
Cell[CellGroupData[{
Cell[35815, 1021, 193, 4, 70, "Input",ExpressionUUID->"c0c8bbd8-760d-45cd-bd92-82204740f18d",
 CellID->287461810],
Cell[36011, 1027, 1124, 28, 95, "Output",ExpressionUUID->"37b04dc5-0939-4490-ae62-45613265ce47",
 CellID->1702607669]
}, Open  ]],
Cell[37150, 1058, 422, 11, 70, "ExampleText",ExpressionUUID->"da43cfae-26c7-45ab-b5a8-64cd13062d7a",
 CellID->376653752],
Cell[CellGroupData[{
Cell[37597, 1073, 730, 22, 70, "Input",ExpressionUUID->"b8e560b0-5ee7-46ff-986c-77f663066168",
 CellID->1100337461],
Cell[38330, 1097, 1504, 37, 52, "Output",ExpressionUUID->"e1715441-4d2d-4d0d-9dbb-56c704c72f4d",
 CellID->218081797],
Cell[39837, 1136, 1505, 37, 52, "Output",ExpressionUUID->"cc44fc0d-a889-4c09-bc9a-82eb4851b095",
 CellID->1693660397],
Cell[41345, 1175, 126, 2, 37, "Output",ExpressionUUID->"5932b5dc-4bf4-4420-8d63-c58ae304b53f",
 CellID->454551394]
}, Open  ]],
Cell[CellGroupData[{
Cell[41508, 1182, 871, 26, 70, "Input",ExpressionUUID->"f4bac1ae-dcac-4fd1-9421-86d08672cdbe",
 CellID->1391490451],
Cell[42382, 1210, 4543, 107, 52, "Output",ExpressionUUID->"f150ecde-8785-4279-9d4b-70a926814642",
 CellID->951830190],
Cell[46928, 1319, 4543, 107, 52, "Output",ExpressionUUID->"a14190a7-6bd7-4c4f-ae41-04eee2be24fa",
 CellID->804316827],
Cell[51474, 1428, 127, 2, 37, "Output",ExpressionUUID->"5ee92c72-6c5a-49f3-a380-25e35982f0b1",
 CellID->1890837171]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[51650, 1436, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"bd94aa2c-2585-4944-b0bc-f60cbcf8b6f5",
 CellID->1893551625],
Cell[51896, 1443, 193, 4, 70, "ExampleText",ExpressionUUID->"284f2e77-8cfb-496b-b8b1-736b5b941864",
 CellID->1781572424],
Cell[CellGroupData[{
Cell[52114, 1451, 448, 13, 70, "Input",ExpressionUUID->"583dcfd0-4cf8-46b6-8cbe-94a3e01d9163",
 CellID->907561411],
Cell[52565, 1466, 2051, 54, 52, "Output",ExpressionUUID->"9f896618-8dac-432f-93d7-2e9638640990",
 CellID->519994024]
}, Open  ]],
Cell[CellGroupData[{
Cell[54653, 1525, 374, 10, 70, "Input",ExpressionUUID->"46924dc0-913b-40f5-b5cd-df985efa14c8",
 CellID->1556697824],
Cell[55030, 1537, 1701, 38, 131, "Output",ExpressionUUID->"31000f4e-69d2-4631-b93c-5df9ccd15fa5",
 CellID->1368628307]
}, Open  ]],
Cell[CellGroupData[{
Cell[56768, 1580, 189, 4, 70, "Input",ExpressionUUID->"b2a0b1b0-c7e3-44dc-8231-b876c785a591",
 CellID->1323430295],
Cell[56960, 1586, 6086, 158, 84, "Output",ExpressionUUID->"a85e542c-d092-4210-af3f-1aed52c70735",
 CellID->353227176]
}, Open  ]],
Cell[63061, 1747, 151, 1, 70, "ExampleText",ExpressionUUID->"0e0f5ac2-9b70-4103-b701-63939a8dcb99",
 CellID->796325451],
Cell[CellGroupData[{
Cell[63237, 1752, 497, 14, 70, "Input",ExpressionUUID->"abe1d9c9-0aa5-4e31-a4b2-f82660b96e38",
 CellID->1688856124],
Cell[63737, 1768, 1307, 32, 131, "Output",ExpressionUUID->"6246b5e6-906b-4f2e-abe0-4b874329c7f6",
 CellID->216072151]
}, Open  ]],
Cell[CellGroupData[{
Cell[65081, 1805, 182, 4, 70, "Input",ExpressionUUID->"4a0cfe0c-14fc-46cd-b599-f70dc62d5171",
 CellID->97902928],
Cell[65266, 1811, 5499, 141, 84, "Output",ExpressionUUID->"087bdd9a-ae01-4257-a10d-2d7ccea756b6",
 CellID->2083005616]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[70814, 1958, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"c5d5c2aa-530a-42aa-8e24-c242c882ad43",
 CellID->1616593910],
Cell[CellGroupData[{
Cell[71082, 1967, 581, 17, 70, "Input",ExpressionUUID->"a9a43fc4-d44f-4f85-8721-857e10ee0185",
 CellID->423687378],
Cell[71666, 1986, 1347, 32, 131, "Output",ExpressionUUID->"7ce73d29-63b2-4d13-9672-309b6e1d950c",
 CellID->614778052]
}, Open  ]],
Cell[CellGroupData[{
Cell[73050, 2023, 652, 19, 70, "Input",ExpressionUUID->"fa23c664-5d68-4e25-80d2-cdacb9156739",
 CellID->446009393],
Cell[73705, 2044, 2217, 53, 131, "Output",ExpressionUUID->"7762a1f3-d73b-4a3d-a94b-81abedab39c0",
 CellID->828230572]
}, Open  ]],
Cell[CellGroupData[{
Cell[75959, 2102, 245, 7, 70, "Input",ExpressionUUID->"8a007ce5-4573-43b3-83ca-0d657091182b",
 CellID->2072193516],
Cell[76207, 2111, 127, 2, 37, "Output",ExpressionUUID->"a45c3ad9-827c-4fc2-82a5-b3a9009ca80b",
 CellID->1685217849]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, Closed]]]],
Cell[CellGroupData[{
Cell[76495, 2122, 1394, 36, 70, "ExampleSection",ExpressionUUID->"c6a1ee95-4584-46fe-8ad7-afbb17347d6f",
 CellID->1293636265],
Cell[CellGroupData[{
Cell[77914, 2162, 1404, 36, 70, "ExampleSubsection",ExpressionUUID->"7043ef27-640d-4de7-b716-4c76bfd09208",
 CellID->1965812958],
Cell[79321, 2200, 1921, 60, 70, "ExampleText",ExpressionUUID->"0c7aa4f3-37dd-4e0e-bd2e-59186a7adb07",
 CellID->227879916],
Cell[81245, 2262, 209, 5, 70, "Input",ExpressionUUID->"71fb8275-6431-42f8-9f10-5c98244a4ac5",
 CellID->1801264145],
Cell[81457, 2269, 136, 1, 70, "ExampleText",ExpressionUUID->"db782b97-aa82-4e66-be39-ffc32793b9ad",
 CellID->1033495556],
Cell[CellGroupData[{
Cell[81618, 2274, 550, 17, 70, "Input",ExpressionUUID->"f44cb84c-1617-45fd-859e-accf2ebd223c",
 CellID->1096870451],
Cell[82171, 2293, 625, 19, 53, "Output",ExpressionUUID->"5c6da5c1-7e6e-4a4b-a4bc-2299566b9241",
 CellID->362970157]
}, Open  ]],
Cell[82811, 2315, 151, 1, 70, "ExampleText",ExpressionUUID->"76a7ca47-1fd7-419c-a51d-f57fe562138a",
 CellID->1955102746],
Cell[CellGroupData[{
Cell[82987, 2320, 337, 9, 70, "Input",ExpressionUUID->"c86952bf-725b-4ec0-9a9f-b5365bfb06f9",
 CellID->2059470547],
Cell[83327, 2331, 1384, 43, 92, "Output",ExpressionUUID->"6619d8f7-7b0c-4f30-83bb-b655575a4961",
 CellID->163317930]
}, Open  ]],
Cell[84726, 2377, 196, 4, 70, "ExampleText",ExpressionUUID->"789492ba-4f63-4904-8043-eee75f8aa180",
 CellID->1600123813],
Cell[CellGroupData[{
Cell[84947, 2385, 445, 12, 70, "Input",ExpressionUUID->"61eb7453-9767-442e-b8e4-fd7b76180024",
 CellID->8884588],
Cell[85395, 2399, 1278, 31, 95, "Output",ExpressionUUID->"60bc5d20-43b3-413d-991a-4547f1050634",
 CellID->1841843936]
}, Open  ]],
Cell[86688, 2433, 207, 4, 70, "ExampleText",ExpressionUUID->"bf3616c6-abdb-4186-be16-48d519cda364",
 CellID->777355164],
Cell[CellGroupData[{
Cell[86920, 2441, 186, 4, 70, "Input",ExpressionUUID->"7e24ce5d-ecc7-4235-9aea-c752d184cfad",
 CellID->1865987295],
Cell[87109, 2447, 3019, 94, 107, "Output",ExpressionUUID->"065cd094-b0b3-4b4e-a16a-27997bea903a",
 CellID->1796926573]
}, Open  ]],
Cell[90143, 2544, 148, 1, 70, "ExampleText",ExpressionUUID->"c2eca4a6-5908-4d48-9fdb-eada5eb2ce3e",
 CellID->1490385628],
Cell[CellGroupData[{
Cell[90316, 2549, 252, 6, 70, "Input",ExpressionUUID->"9999c13b-9a3d-4b6e-877f-7602761e86eb",
 CellID->984160605],
Cell[90571, 2557, 3450, 77, 95, "Output",ExpressionUUID->"4e402ee6-9e89-489f-b83a-bfac4e6f5921",
 CellID->1269593865]
}, Open  ]],
Cell[CellGroupData[{
Cell[94058, 2639, 282, 7, 70, "Input",ExpressionUUID->"8e470220-2270-4db5-bc2f-98b5d8369bf7",
 CellID->298820583],
Cell[94343, 2648, 126, 2, 37, "Output",ExpressionUUID->"dd8e7377-29ef-45fe-97e9-e80583f4fdd1",
 CellID->196470098]
}, Open  ]],
Cell[CellGroupData[{
Cell[94506, 2655, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"fdb16c1f-65f0-41d4-bd3a-8efdae87f25a",
 CellID->1705608657],
Cell[94752, 2662, 1101, 33, 70, "ExampleText",ExpressionUUID->"2d7e6b91-089e-46bf-872e-62fb7e3771f7",
 CellID->181077262],
Cell[CellGroupData[{
Cell[95878, 2699, 365, 10, 70, "Input",ExpressionUUID->"f6d84b02-f8d0-46e1-9c31-c4e075ddbf10",
 CellID->1563352008],
Cell[96246, 2711, 3007, 94, 78, "Output",ExpressionUUID->"1a0ba537-8ad3-4dea-92cd-c8b9e5c1223a",
 CellID->1452639762]
}, Open  ]],
Cell[99268, 2808, 125, 1, 70, "ExampleText",ExpressionUUID->"4868bc9a-b530-45cd-ba8f-03165a086a0c",
 CellID->1652630181],
Cell[CellGroupData[{
Cell[99418, 2813, 223, 5, 70, "Input",ExpressionUUID->"1a99cb39-aa0b-4cff-aebb-6a6dda19de11",
 CellID->63469277],
Cell[99644, 2820, 2820, 91, 78, "Output",ExpressionUUID->"ace5e7cb-8d37-4133-b9ac-de80f357dacb",
 CellID->648436383]
}, Open  ]],
Cell[102479, 2914, 238, 6, 70, "ExampleText",ExpressionUUID->"496b1728-af9e-4ac7-b616-8e54245465fa",
 CellID->1753917898],
Cell[CellGroupData[{
Cell[102742, 2924, 350, 10, 70, "Input",ExpressionUUID->"5f5ee38e-11a3-414b-a7d1-fe8b6bec43a2",
 CellID->1043909238],
Cell[103095, 2936, 126, 2, 37, "Output",ExpressionUUID->"172460cb-e314-4e81-9463-a1a5755b145b",
 CellID->828054421]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[103270, 2944, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"31ae6430-8c7b-44cd-8300-670c45ce1b5f",
 CellID->1600539001],
Cell[103516, 2951, 571, 17, 70, "ExampleText",ExpressionUUID->"79199969-d11b-4cb4-a2e6-7269e9019f29",
 CellID->595717937],
Cell[CellGroupData[{
Cell[104112, 2972, 377, 10, 70, "Input",ExpressionUUID->"500055e9-8455-419c-9fdf-7e03c8b7ed13",
 CellID->1811053528],
Cell[104492, 2984, 1201, 36, 53, "Output",ExpressionUUID->"b5dff800-6ba0-4abf-89a7-e84fc3a9c059",
 CellID->542256006]
}, Open  ]],
Cell[CellGroupData[{
Cell[105730, 3025, 220, 5, 70, "Input",ExpressionUUID->"6e0e1754-9344-49b1-8f8a-89c82edae3b9",
 CellID->1793861229],
Cell[105953, 3032, 1372, 33, 131, "Output",ExpressionUUID->"389abbdc-0777-4795-91f3-d4eaddecf84a",
 CellID->615848182]
}, Open  ]],
Cell[107340, 3068, 385, 8, 70, "ExampleText",ExpressionUUID->"caa8d7d5-c50e-46f8-aeb9-d2402a1df659",
 CellID->1051097161],
Cell[CellGroupData[{
Cell[107750, 3080, 254, 6, 70, "Input",ExpressionUUID->"d1091702-79cb-4981-ba49-cb4d7dba0090",
 CellID->1765521323],
Cell[108007, 3088, 3723, 81, 131, "Output",ExpressionUUID->"8d42b1ba-d1c1-480a-b51a-803bfbdf2a64",
 CellID->462467201]
}, Open  ]],
Cell[CellGroupData[{
Cell[111767, 3174, 249, 6, 70, "Input",ExpressionUUID->"b1b686f0-ef19-4317-8b2d-973c6b14e8e5",
 CellID->1192347325],
Cell[112019, 3182, 116, 1, 70, "EchoTiming",ExpressionUUID->"e3c360b2-11df-4151-99bb-01ee8e55a980",
 CellID->1246234138],
Cell[112138, 3185, 127, 2, 37, "Output",ExpressionUUID->"a9ceb8db-98dc-4ca8-a47c-2dbaddae3984",
 CellID->1049148175]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "0"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, Closed]]]],
Cell[CellGroupData[{
Cell[112541, 3199, 1417, 36, 70, "ExampleSection",ExpressionUUID->"2a2b669f-040e-49c3-9f03-3731259755c8",
 CellID->1020263627],
Cell[113961, 3237, 207, 5, 70, "Input",ExpressionUUID->"d99a708d-487c-469f-b6d1-781a1847c020",
 CellID->54597739],
Cell[114171, 3244, 257, 4, 70, "ExampleText",ExpressionUUID->"ce1bb20e-d226-4061-b0c9-827052c6e4a2",
 CellID->1658935743],
Cell[CellGroupData[{
Cell[114453, 3252, 323, 8, 70, "Input",ExpressionUUID->"07b011eb-009c-4d3c-8d88-f0caf64477f4",
 CellID->450269680],
Cell[114779, 3262, 203, 4, 38, "Output",ExpressionUUID->"c907f9eb-ecf5-4449-b02f-192adf3010af",
 CellID->981427528]
}, Open  ]],
Cell[CellGroupData[{
Cell[115019, 3271, 244, 6, 70, "Input",ExpressionUUID->"5fe293ac-8bc2-45a2-b34d-2d32a7052650",
 CellID->113446564],
Cell[115266, 3279, 831, 26, 40, "Output",ExpressionUUID->"620c8392-c4fd-4cf3-8e08-b293fab40252",
 CellID->1745505536]
}, Open  ]],
Cell[CellGroupData[{
Cell[116134, 3310, 355, 10, 70, "Input",ExpressionUUID->"20541f68-d4d5-403a-9b7c-b35230ba90d8",
 CellID->1884776724],
Cell[116492, 3322, 705, 23, 50, "Output",ExpressionUUID->"5d409798-4635-4943-877d-e67a8b29a87c",
 CellID->649329666]
}, Open  ]],
Cell[CellGroupData[{
Cell[117234, 3350, 589, 16, 70, "Input",ExpressionUUID->"a9538de2-cc5f-4e43-a03c-e888e971dcf6",
 CellID->1389124015],
Cell[117826, 3368, 1297, 31, 95, "Output",ExpressionUUID->"d4e16d3a-3028-4a28-843a-66e599e2a779",
 CellID->697044296]
}, Open  ]],
Cell[CellGroupData[{
Cell[119160, 3404, 642, 17, 70, "Input",ExpressionUUID->"65b1bae5-0660-4eef-b5a3-603d47994957",
 CellID->125637926],
Cell[119805, 3423, 1240, 31, 95, "Output",ExpressionUUID->"28db1e5c-609d-4e07-bd79-ca303984509e",
 CellID->2005385419]
}, Open  ]],
Cell[CellGroupData[{
Cell[121082, 3459, 250, 6, 70, "Input",ExpressionUUID->"9dd3297d-b0d9-4eb7-b005-025ea5b87a1c",
 CellID->1909614846],
Cell[121335, 3467, 127, 2, 37, "Output",ExpressionUUID->"4a014640-39fe-4fa9-a292-3e4db57094f3",
 CellID->1347063767]
}, Open  ]],
Cell[121477, 3472, 175, 3, 70, "ExampleText",ExpressionUUID->"15d62ffe-8c12-4b2b-b186-afd2fe6eadb1",
 CellID->511713125],
Cell[CellGroupData[{
Cell[121677, 3479, 268, 7, 70, "Input",ExpressionUUID->"30d874de-864b-4b1c-9e38-02f2d12a42e8",
 CellID->375479679],
Cell[121948, 3488, 395, 8, 70, "Message",ExpressionUUID->"4c6be322-9754-4860-bf55-18f2a487790d",
 CellID->764133916],
Cell[122346, 3498, 705, 23, 50, "Output",ExpressionUUID->"67265aa3-8b56-4603-bfca-c882ccacfb72",
 CellID->846517152]
}, Open  ]],
Cell[CellGroupData[{
Cell[123088, 3526, 242, 5, 70, "ExampleDelimiter",ExpressionUUID->"b102b10c-2e0c-4f52-af7d-4f35c16a731a",
 CellID->174573991],
Cell[123333, 3533, 374, 9, 70, "ExampleText",ExpressionUUID->"14c34e30-a4de-4b49-ac74-cd06839bb1cd",
 CellID->1484041902],
Cell[CellGroupData[{
Cell[123732, 3546, 408, 12, 70, "Input",ExpressionUUID->"dc19ad6b-fe7c-4749-b923-c11da779a41e",
 CellID->1674411155],
Cell[124143, 3560, 1012, 32, 50, "Output",ExpressionUUID->"adc0fb7c-fc03-4254-b777-4e18b375e2dc",
 CellID->84084447]
}, Open  ]],
Cell[CellGroupData[{
Cell[125192, 3597, 184, 4, 70, "Input",ExpressionUUID->"dacf46e0-996f-4937-91d7-16d92e1787ca",
 CellID->1750426850],
Cell[125379, 3603, 2249, 67, 52, "Output",ExpressionUUID->"b326a8f9-7ee1-4de1-a2b8-9d5a3f6eb7e1",
 CellID->1361202067]
}, Open  ]],
Cell[CellGroupData[{
Cell[127665, 3675, 253, 7, 70, "Input",ExpressionUUID->"97d44f6c-079f-45b1-a0a3-67e5bde7554e",
 CellID->295000539],
Cell[127921, 3684, 884, 26, 110, "Output",ExpressionUUID->"bd73753d-e2fd-49bd-8bcd-284948fb6907",
 CellID->1707946302]
}, Open  ]],
Cell[128820, 3713, 175, 3, 70, "ExampleText",ExpressionUUID->"e8e32497-7873-4774-8f47-101658e21881",
 CellID->2142135012],
Cell[CellGroupData[{
Cell[129020, 3720, 495, 15, 70, "Input",ExpressionUUID->"73da201d-7fa1-4349-aff3-8e4546d704a8",
 CellID->1434563406],
Cell[129518, 3737, 961, 28, 50, "Output",ExpressionUUID->"56b4a19c-12f8-4f9f-9025-52a097dfa310",
 CellID->666864498]
}, Open  ]],
Cell[CellGroupData[{
Cell[130516, 3770, 283, 7, 70, "Input",ExpressionUUID->"e3064ca8-e8d2-4efc-b849-3137a78ebf7c",
 CellID->1544994010],
Cell[130802, 3779, 126, 2, 37, "Output",ExpressionUUID->"534d69b3-07c9-4b31-9cce-e59dbce009a8",
 CellID->703758408]
}, Open  ]],
Cell[130943, 3784, 309, 5, 70, "ExampleText",ExpressionUUID->"65be8571-3cf9-4553-85a7-395894e269f2",
 CellID->382850454],
Cell[CellGroupData[{
Cell[131277, 3793, 644, 18, 70, "Input",ExpressionUUID->"1793343c-9063-4915-a491-af9497437511",
 CellID->1698297027],
Cell[131924, 3813, 1476, 33, 167, "Output",ExpressionUUID->"78331e71-ee16-4744-85ea-86847a954482",
 CellID->1114449803]
}, Open  ]],
Cell[133415, 3849, 244, 4, 70, "ExampleText",ExpressionUUID->"6e2d2745-0a7b-4b9e-bfbd-a37e9cfb24ba",
 CellID->42562061],
Cell[CellGroupData[{
Cell[133684, 3857, 1945, 54, 70, "Input",ExpressionUUID->"d7f533b5-da8d-4744-af3a-cc59bfb42591",
 CellID->385898355],
Cell[135632, 3913, 5383, 127, 261, "Output",ExpressionUUID->"64d7b564-06b1-4449-bddd-374c16a80102",
 CellID->1521845662]
}, Open  ]],
Cell[CellGroupData[{
Cell[141052, 4045, 495, 14, 70, "Input",ExpressionUUID->"f0f0bd4c-571c-4294-80bb-fccbbc5be354",
 CellID->286463219],
Cell[141550, 4061, 126, 2, 37, "Output",ExpressionUUID->"c7fdecb9-3a30-4721-933a-ff6e4f53c43c",
 CellID->239302337],
Cell[141679, 4065, 127, 2, 37, "Output",ExpressionUUID->"de5a6b0e-2860-4cb2-a200-f2e65b81c141",
 CellID->1864990775],
Cell[141809, 4069, 126, 2, 37, "Output",ExpressionUUID->"00046a3c-bfb3-4bff-beac-7d8b66f433b2",
 CellID->228643813]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, Closed]]]],
Cell[142189, 4081, 2311, 62, 70, "SeeAlsoSection",ExpressionUUID->"1ca7a8d3-d3b5-4c74-8e20-d900e30863a5"],
Cell[144503, 4145, 2508, 63, 70, "TutorialsSection",ExpressionUUID->"731bcfd4-5761-4b58-9258-3edb15474f34"],
Cell[147014, 4210, 1086, 28, 70, "MoreAboutSection",ExpressionUUID->"9f281afb-d0a3-422a-a2f8-0f59685655fd"],
Cell[148103, 4240, 2106, 59, 70, "RelatedLinksSection",ExpressionUUID->"61ec8fae-ceeb-4b3b-9784-176cfa751588"],
Cell[150212, 4301, 78, 0, 70, "FooterCell",ExpressionUUID->"44ac70c7-f061-4ef0-8468-7efd48a32f29"]
}
]
*)

(* End of internal cache information *)

