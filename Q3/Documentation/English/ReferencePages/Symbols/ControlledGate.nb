(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    172361,       4923]
NotebookOptionsPosition[    149689,       4459]
NotebookOutlinePosition[    152475,       4522]
CellTagsIndexPosition[    152388,       4517]
WindowTitle->ControlledGate
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[GridBox[{
   {GridBox[{
      {
       ItemBox[Cell[BoxData[
         RowBox[{
          TemplateBox[{12},
           "Spacer1"], Cell["Q3 SYMBOL", "PacletNameCell",
           TextAlignment->Center,ExpressionUUID->
           "8ff44612-1c9f-4586-ba79-415ff742f5f4"], 
          TemplateBox[{8},
           "Spacer1"]}]],
         TextAlignment->Center,ExpressionUUID->
         "c59adb89-7704-4790-8980-a214515aef11"],
        Background->RGBColor[0.490196, 0.576471, 0.690196],
        ItemSize->Full], ""}
     },
     GridBoxAlignment->{"Rows" -> {{Center}}},
     GridBoxItemSize->{"Columns" -> {Full, 
         Scaled[0.02]}, "Rows" -> {{2.5}}}], Cell[TextData[{
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "See Also",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "51dea57b-88c2-45d8-bfc4-f415af90410b"]
         }],ExpressionUUID->"b2c79d1a-bdb1-4a41-9e8d-da95d015ef01"],
         StripOnInput->False], {"\<\"QuantumCircuit\"\>":>
        Documentation`HelpLookup[
        "paclet:Q3/ref/QuantumCircuit"], "\<\"CNOT\"\>":>
        Documentation`HelpLookup["paclet:Q3/ref/CNOT"], "\<\"CZ\"\>":>
        Documentation`HelpLookup[
        "paclet:Q3/ref/CZ"], "\<\"ControlledPower\"\>":>
        Documentation`HelpLookup["paclet:Q3/ref/ControlledPower"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"SeeAlso"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "a14b8d0b-afda-4a4b-a071-8c2ac6f7c2a6"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Related Guides",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "67b760a1-d3da-4fbc-b81c-0ed0b5d0e873"]
         }],ExpressionUUID->"c0a1afe0-6f67-40db-84f8-ff060ec11c1b"],
         StripOnInput->False], {"\<\"Q3 Application\"\>":>
        Documentation`HelpLookup[
        "paclet:Q3/guide/Q3"], "\<\"Quantum Information Systems\"\>":>
        Documentation`HelpLookup["paclet:Q3/guide/QuantumInformationSystems"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"MoreAbout"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "fca89b8b-320c-4192-9647-6c6bf57edb92"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Tech Notes",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "52308c33-f1af-4cc3-a69f-3059b1889eb4"]
         }],ExpressionUUID->"d42915dc-1afc-49d0-9e6c-e5aa4db0dbd7"],
         StripOnInput->False], {"\<\"Two-Qubit Gates\"\>":>
        Documentation`HelpLookup[
        "paclet:Q3/tutorial/TwoQubitGates"], "\<\"Quantum Computation: \
Overview\"\>":>Documentation`HelpLookup[
        "paclet:Q3/tutorial/QuantumComputationOverview"], "\<\"Multi-Control \
Unitary Gates\"\>":>Documentation`HelpLookup[
        "paclet:Q3/tutorial/MultiControlUnitaryGates"], "\<\"Quantum \
Information Systems with Q3\"\>":>Documentation`HelpLookup[
        "paclet:Q3/tutorial/QuantumInformationSystems"], "\<\"Quick Quantum \
Computing with Q3\"\>":>Documentation`HelpLookup[
        "paclet:Q3/tutorial/QuickQuantumComputingWithQ3"], "\<\"Q3: Quick \
Start\"\>":>Documentation`HelpLookup["paclet:Q3/tutorial/Q3QuickStart"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"Tutorials"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "4e7274c0-4255-4ae6-96ee-d9b328edca1e"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "URL",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "d9bd1531-ed46-4406-bc82-29d2e9a7d48d"]
         }],ExpressionUUID->"ed3e650b-7e3d-4d8a-bd9e-d8ff3cd9d020"],
         StripOnInput->False], {"\<\"Q3/ref/ControlledGate\"\>":>
        None, "\<\"Copy Wolfram Documentation Center URL\"\>":>
        Module[{DocumentationSearch`Private`nb$}, 
         DocumentationSearch`Private`nb$ = NotebookPut[
            Notebook[{
              Cell["Q3/ref/ControlledGate"]}, Visible -> False]]; 
         SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
         FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
         NotebookClose[DocumentationSearch`Private`nb$]; Null], 
        Delimiter, "\<\"Copy web URL\"\>":>
        Module[{DocumentationSearch`Private`nb$}, 
         DocumentationSearch`Private`nb$ = NotebookPut[
            Notebook[{
              Cell[
               BoxData[
                MakeBoxes[
                 Hyperlink[
                 "http://reference.wolfram.com/language/Q3/ref/ControlledGate.\
html"], StandardForm]], "Input", TextClipboardType -> "PlainText"]}, Visible -> 
             False]]; SelectionMove[
          DocumentationSearch`Private`nb$, All, Notebook]; 
         FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
         NotebookClose[DocumentationSearch`Private`nb$]; 
         Null], "\<\"Go to web URL\"\>":>FrontEndExecute[{
          NotebookLocate[{
            URL[If[
               TrueQ[DocumentationBuild`Make`Private`wsmlinkQ$26338], 
               "http://reference.wolfram.com/system-modeler/", 
               "http://reference.wolfram.com/language/"] <> 
             "Q3/ref/ControlledGate" <> ".html"], None}]}]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"URLMenu"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "284b3e69-a596-4b81-8ecd-2a7c098d698e"]
    }], "AnchorBar",
     CacheGraphics->False,ExpressionUUID->
     "cd725447-d8e2-4474-8044-98dc16037354"]}
  }]], "AnchorBarGrid",
 CellID->1,ExpressionUUID->"8edd7d04-f324-435e-8bf0-0d479df83399"],

Cell["Q3`", "ContextNameCell",ExpressionUUID->"d901fac1-f455-494d-ad30-01752b27f3a1"],

Cell[CellGroupData[{

Cell[BoxData[GridBox[{
   {Cell[TextData[{
     Cell[
     "ControlledGate", "ObjectName",ExpressionUUID->
      "b5b7a466-1b9c-4cde-9c56-500ae7a3a718"],
     Cell[BoxData[
      TemplateBox[{8},
       "Spacer1"]],ExpressionUUID->"7207a468-3a13-45e4-88f4-1e03fbe2f03d"],
     Cell[BoxData[
     ""], "ObjectNameTranslation",ExpressionUUID->
      "befa19c1-ab80-40de-ada1-f98fe9e49521"]
    }],ExpressionUUID->"367b49d8-2205-4d67-b51f-312dc5b2529e"], Cell[BoxData[
     StyleBox[
      GraphicsBox[InsetBox[
        StyleBox["\<\"UPDATED IN 13.2\"\>",
         StripOnInput->False,
         FontFamily->"Source Sans Pro",
         FontSize->17,
         FontWeight->"Bold",
         FontSlant->"Italic",
         FontColor->RGBColor[0.968627, 0.466667, 0]], {Right, Center}, {
        Right, Center}],
       AxesStyle->Large,
       FrameStyle->Large,
       ImageSize->{125, 24},
       PlotRangePadding->Scaled[0.025]], "NewInGraphic",
      StripOnInput->False]],
     Deployed->True,
     Magnification->1,ExpressionUUID->
     "6e3a5afd-506f-4c7d-b008-bf5861907141"]}
  }]], "ObjectNameGrid",
 CacheGraphics->False,ExpressionUUID->"f615816c-f541-411c-8cfa-695bf22f9611"],

Cell[BoxData[GridBox[{
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["1", "TR"]], ",", 
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["2", "TR"]], ",", "\[Ellipsis]"}], "}"}], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "ed6091f2-789e-4e16-80b4-b4a6f3552fde"],
     "\[LineSeparator]represents a multi-control multi-target unitary gate \
with control qubits ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["2", "TR"]], ",", "\[Ellipsis]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "6cadba9d-edc5-4276-aee3-5fa04bf64cdf"],
     " and unitary operator ",
     Cell[BoxData[
      StyleBox["op", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "8ee3f6d6-8a73-48bf-8179-b53e054040de"],
     " acting on the target qubits."
    }],ExpressionUUID->"257c515e-e852-48b0-b330-8a5b065918f9"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["c", "TI"], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "53adea69-f801-455e-abb8-16b32131ca7e"],
     "\[LineSeparator]is equivalent to ",
     Cell[BoxData[
      RowBox[{"ControlledGate", "[", 
       RowBox[{
        RowBox[{"{", 
         StyleBox["c", "TI"], "}"}], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "d357255c-2eeb-4377-931f-5f217e25facd"],
     "."
    }],ExpressionUUID->"e0f6ff5d-7cea-459f-a9c0-4c89d28c6a2a"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], ",", 
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
         RowBox[{"{", 
          RowBox[{
           SubscriptBox[
            StyleBox["v", "TI"], 
            StyleBox["1", "TR"]], ",", 
           SubscriptBox[
            StyleBox["v", "TI"], 
            StyleBox["2", "TR"]], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}]}], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "b09b6a3f-d688-49b1-99a3-91ea7e1b46a5"],
     "\[LineSeparator]represents a variation of the controlled-unitary gate, \
where operator op operates when the control qubits ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["2", "TR"]], ",", 
       StyleBox["\[Ellipsis]", "TR"]}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "2310f164-a81a-4784-a6ab-2709653326a2"],
     " take the logical values ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["v", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["v", "TI"], 
        StyleBox["2", "TR"]], ",", 
       StyleBox["\[Ellipsis]", "TR"]}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "a6ffb301-0e2e-46e1-b197-503b6fa2af86"],
     ", respectively."
    }],ExpressionUUID->"48126b78-919f-4319-91d4-f9c8e25de337"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         StyleBox["c", "TI"], "\[Rule]", 
         StyleBox["v", "TI"]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "d86cd33e-8306-4bf7-b19d-c997d3553c3d"],
     "\[LineSeparator]is automatically converted to ",
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          StyleBox["c", "TI"], "}"}], "\[Rule]", 
         RowBox[{"{", 
          StyleBox["v", "TI"], "}"}]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "9aec9511-350c-4a88-b422-e563486f8f23"],
     "."
    }],ExpressionUUID->"2fecb039-2a37-4030-b075-5c75c7f17944"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], ",", 
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
         StyleBox["v", "TI"]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "9aab7ad2-9658-407d-b45f-4c5b991dbe5b"],
     "\[LineSeparator]is automatically converted to ",
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], ",", 
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
         RowBox[{"{", 
          RowBox[{
           StyleBox["v", "TI"], ",", 
           StyleBox["v", "TI"], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "34c56e45-5606-4801-b488-dee38d51c466"],
     "."
    }],ExpressionUUID->"dba651a4-da84-4859-9a5b-90e2b9a4c4b0"]}
  }]], "Usage",ExpressionUUID->"d5ff7cc3-66ef-4e35-94b3-54814ac31901"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[Cell[BoxData[
 ButtonBox[Cell[TextData[{
   Cell[BoxData[
    DynamicBox[ToBoxes[
      If[
       MatchQ[
        CurrentValue[
         EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, 
         Closed], 
        Alternatives[Open, True]], 
       Style[
        Graphics[{
          Thickness[0.18], 
          RGBColor[0.8509803921568627, 0.396078431372549, 0], 
          Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
         PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
        0.68 Inherited], 
       Rotate[
        Style[
         Graphics[{
           Thickness[0.18], 
           RGBColor[0.8509803921568627, 0.396078431372549, 0], 
           Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
          PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
         0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
     ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
    ExpressionUUID->"0381e56a-719f-4b8d-8fa2-946daf5827a1"],
   Cell[BoxData[
    TemplateBox[{1},
     "Spacer1"]],ExpressionUUID->"bde18d58-52b3-437b-958c-849397f04e6d"],
   "Details and Options"
  }], "NotesFrameText",ExpressionUUID->"4ac62c39-535e-47a0-a051-af1196b77b9c"],
  Appearance->{Automatic, None, "Normal", Automatic},
  BaseStyle->None,
  ButtonFunction:>(FrontEndExecute[{
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], All, ButtonCell], 
     FrontEndToken["OpenCloseGroup"], 
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], After, CellContents]}]& ),
  Evaluator->None,
  Method->
   "Preemptive"]],ExpressionUUID->"c8a58612-b2a9-4f9b-96a4-6e9ffbd9e7c0"]], \
"NotesSection",
 WholeCellGroupOpener->True,
 CellGroupingRules->{"SectionGrouping", 50},
 CacheGraphics->False,
 CellID->1670756317,ExpressionUUID->"696903da-ff0a-4786-a76f-2082ba5ede54"],

Cell[TextData[{
 "If ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "c98b9a46-feb6-4ba7-a8a8-ab3b872f97b7"],
 " is an operator of the form ",
 Cell[BoxData[
  RowBox[{"T", "[", 
   RowBox[{
    StyleBox["j", "TI"], ",", "\[Ellipsis]", ",", 
    StyleBox["k", "TI"]}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "05aae188-4af2-4990-a81d-c0b9e229e77e"],
 ", it is regarded to act on qubit ",
 Cell[BoxData[
  RowBox[{"T", "[", 
   RowBox[{
    StyleBox["j", "TI"], ",", "\[Ellipsis]", ",", 
    TemplateBox[{
      Cell[
       TextData["$"]], "paclet:ref/$"},
     "RefLink",
     BaseStyle->{"InlineFormula"}]}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "10b48ff7-db96-422b-8dcd-4c1bff11568c"],
 "."
}], "Notes",
 CellID->1702748548,ExpressionUUID->"6670571f-a860-473b-8687-f6f46ba1239e"],

Cell[TextData[{
 "Otherwise, ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "3a9f4e08-33fc-4faf-ab14-88e14b91ce7b"],
 " acts on the qubits involved in ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "a6b56d2a-22a7-4c38-b63b-3af38b9985c8"],
 "."
}], "Notes",
 CellID->491054349,ExpressionUUID->"b5b55ba7-a0fb-44e0-bb13-0b0996739ed8"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Elaborate"]], "paclet:Q3/ref/Elaborate", "Q3 Package Symbol"},
    
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", 
   RowBox[{"ControlledGate", "[", "\[Ellipsis]", "]"}], "]"}]], 
  "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "daa599c0-117e-4c49-95ee-304c285389f3"],
 " expands ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
     "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", "\[Ellipsis]", "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "828489bb-87fb-4442-b78a-4722537ee079"],
 " explicitly in terms of the Pauli operators."
}], "Notes",
 CellID->2019652723,ExpressionUUID->"c557efd5-d85f-4cc4-b770-219c017d4918"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Matrix"]], "paclet:Q3/ref/Matrix", "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", 
   RowBox[{"ControlledGate", "[", "\[Ellipsis]", "]"}], "]"}]], 
  "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "fdca150e-98f1-4441-b8af-786d8da3f8fa"],
 " gives the matrix representation of ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
     "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", "\[Ellipsis]", "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "04494634-1771-437a-b381-cc82717d4175"],
 "."
}], "Notes",
 CellID->384437925,ExpressionUUID->"50ad500f-0874-4a12-9f31-91f2c18b8ae0"],

Cell[TextData[{
 "[EXPERIMENTAL] ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Expand"]], "paclet:ref/Expand"},
    "RefLink",
    BaseStyle->{"InlineFormula"}], "[", 
   RowBox[{"ControlledGate", "[", 
    StyleBox["\[Ellipsis]", "TR"], "]"}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "d81cda39-ef0e-46b7-b738-97e7348d0bef"],
 " decomposes the controlled-unitary gate as a product of single-qubit \
rotations and ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "e516f1a5-2755-4871-a296-f1e0a4805be5"],
 " gates."
}], "Notes",
 CellID->1895961038,ExpressionUUID->"2682e52e-904d-4522-a9cf-bc88e79d7a8b"]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "PrimaryExamplesSection"}, Open], 
      Alternatives[True, Open]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "d5ae529d-ecf8-4972-a931-c1942b5add50"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"9b2a6ee5-f69a-43dc-8e01-c5197acacd4f"],
 "Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(9)", "ExampleCount",ExpressionUUID->
  "6b3c412b-f5cd-4b8c-a565-9ce738507dbc"]
}], "PrimaryExamplesSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellTags->"PrimaryExamplesSection",
 CellID->2052735294,ExpressionUUID->"199cd319-2a7c-4ea5-a9f6-e3b3c15c3619"],

Cell[BoxData[
 RowBox[{"Needs", "[", "\"\<Q3`\>\"", "]"}]], "Input", "ExampleInitialization",
 CellLabel->"In[1]:=",
 CellID->851865642,ExpressionUUID->"c8cb564b-093f-410b-879f-6a85825f367e"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "65083dbf-26d9-4901-8024-f3ca8d46b92a"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"87133fe3-2018-4843-a47c-b88fd159307f"],
 "Basic Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(4)", "ExampleCount",ExpressionUUID->
  "725f8835-e260-4cc8-b2e0-9ff9ad687124"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->997297203,ExpressionUUID->"b1320d32-d065-4290-877a-e0f7a9f33de1"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1403695601,ExpressionUUID->"baec094e-fa94-458f-9046-ee0c3e6ee972"],

Cell["\<\
This is a controlled-U operator. Usually it remains unevaluated.\
\>", "ExampleText",
 CellID->493202586,ExpressionUUID->"9524945c-8d35-41be-8523-2f18acd83b35"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1804103712,ExpressionUUID->"4354d585-bd81-45a3-b780-b1a61094b1d1"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"1"},
        "RowDefault"]],
      $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
    RowBox[{"{", "1", "}"}]}], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"x\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]]}], "]"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1824676489,ExpressionUUID->"13811540-9202-4ddb-9a48-a962b77144db"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "[", "op", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1699357571,ExpressionUUID->"5ba2af87-c4be-4b41-a5fd-b3b44b3ef910"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]]}], "+", 
  FractionBox[
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"1"}, "RowDefault"], 
      TemplateBox[{"\"z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]], "2"], "+", 
  FractionBox[
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"x\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], "2"]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->462710526,ExpressionUUID->"21de137b-2cf4-4238-a67b-103427b235a1"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Matrix", "[", "op", "]"}], "//", "MatrixForm"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->388513540,ExpressionUUID->"b6408331-aaa1-473a-bccf-fc54a169fc74"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", "0"},
     {"0", "1", "0", "0"},
     {"0", "0", "0", "1"},
     {"0", "0", "1", "0"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {4, 4}, 0, {
     1, {{0, 2, 4, 6, 8}, {{1}, {2}, {2}, {1}, {3}, {4}, {4}, {3}}}, {1, 0, 1,
       0, 0, 1, 0, 1}}]]]]], "Output",
 CellLabel->"Out[4]//MatrixForm=",
 CellID->1414229004,ExpressionUUID->"8202b011-8ed5-4d75-b91f-8620ca057b16"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "**", 
  RowBox[{"S", "[", 
   RowBox[{"2", ",", "3"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->227378000,ExpressionUUID->"0abb59b9-83fe-458c-8b32-b579e5a49f9e"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 2]]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]]}], "-", 
  FractionBox[
   RowBox[{"\[ImaginaryI]", " ", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"2"}, "RowDefault"], 
       TemplateBox[{"\"y\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[2, 2]]}], "2"], "+", 
  FractionBox[
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]], "2"]}]], "Output",
 CellLabel->"Out[5]=",
 CellID->960122379,ExpressionUUID->"5a3b90e9-eb41-4049-b0d2-528cf4df078e"]
}, Open  ]],

Cell[TextData[{
 Cell[BoxData["ControlledGate"], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "a2935b62-0c3a-4394-9fb6-0c6d7abe5bc7"],
 " can be evaluated explicitly by means of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Elaborate"]], "paclet:Q3/ref/Elaborate", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "93377911-6925-4359-b76e-7afcc8f6f60b"],
 "."
}], "ExampleText",
 CellID->976135211,ExpressionUUID->"4d12dc5f-6f09-4488-9d46-16551fee856b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}], "//", "Elaborate"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->1713072528,ExpressionUUID->"1fd9e696-7166-4688-86e9-4504b2175f03"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]]}], "+", 
  FractionBox[
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"1"}, "RowDefault"], 
      TemplateBox[{"\"z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]], "2"], "+", 
  FractionBox[
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"x\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], "2"]}]], "Output",
 CellLabel->"Out[6]=",
 CellID->468146210,ExpressionUUID->"b575e154-0018-4b53-8c4a-a2d40d6e4fc3"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "4e19097e-8654-44c7-a522-4a8c7067f5c2"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1117862758,ExpressionUUID->"cd828da9-3fdc-4262-8d12-ecd6569ef8c5"],

Cell["\<\
In the quantum circuit model, a controlled-U gate is depicted by the \
following quantum circuit element.\
\>", "ExampleText",
 CellID->66695600,ExpressionUUID->"ca28bcd1-bf07-4451-9475-4dafb4cb4161"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"QuantumCircuit", "[", "op", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->287461810,ExpressionUUID->"c0c8bbd8-760d-45cd-bd92-82204740f18d"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$]} -> {1}, 
    $CellContext`S[2, 1]]]]], "Output",
 CellLabel->"Out[1]=",
 CellID->14339239,ExpressionUUID->"11247db5-e3f8-4630-9316-a7ab1e6d849f"]
}, Open  ]],

Cell[TextData[{
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "d1068799-8183-429f-8c97-8ddb6249fee9"],
 " is a special case of controlled-U gate."
}], "ExampleText",
 CellID->376653752,ExpressionUUID->"da43cfae-26c7-45ab-b5a8-64cd13062d7a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"x1", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", 
       RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{"x2", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"CNOT", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", "2", "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"x1", "-", "x2"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1100337461,ExpressionUUID->"b8e560b0-5ee7-46ff-986c-77f663066168"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], " ", 
  RowBox[{"(", 
   RowBox[{"1", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"1"}, "RowDefault"], 
       TemplateBox[{"\"z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"2"}, "RowDefault"], 
       TemplateBox[{"\"x\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[2, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1106237926,ExpressionUUID->"6beac1d1-86b4-42b2-a08d-bc0d88e561af"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], " ", 
  RowBox[{"(", 
   RowBox[{"1", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"1"}, "RowDefault"], 
       TemplateBox[{"\"z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"2"}, "RowDefault"], 
       TemplateBox[{"\"x\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[2, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1774890203,ExpressionUUID->"6aa7361e-4a86-4ada-ab8b-3de693168f73"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[2]=",
 CellID->2031784991,ExpressionUUID->"3d0fd22d-e1a8-4817-9939-43ef240ca6aa"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"x1", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"S", "[", "1", "]"}], ",", 
        RowBox[{"S", "[", "2", "]"}]}], "}"}], ",", 
      RowBox[{"S", "[", 
       RowBox[{"3", ",", "1"}], "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{"x2", "=", 
  RowBox[{
   RowBox[{"Elaborate", "[", 
    RowBox[{"Toffoli", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", "2", "]"}], ",", 
      RowBox[{"S", "[", "3", "]"}]}], "]"}], "]"}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"x1", "-", "x2"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1391490451,ExpressionUUID->"f4bac1ae-dcac-4fd1-9421-86d08672cdbe"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "4"], " ", 
  RowBox[{"(", 
   RowBox[{"3", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[3, 1]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"1"}, "RowDefault"], 
       TemplateBox[{"\"z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"2"}, "RowDefault"], 
       TemplateBox[{"\"z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[2, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"3"}, "RowDefault"], 
       TemplateBox[{"\"x\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[3, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1440057658,ExpressionUUID->"d29a46bf-3843-4609-8720-2b924eb401db"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "4"], " ", 
  RowBox[{"(", 
   RowBox[{"3", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[3, 1]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"1"}, "RowDefault"], 
       TemplateBox[{"\"z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"2"}, "RowDefault"], 
       TemplateBox[{"\"z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[2, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"3"}, "RowDefault"], 
       TemplateBox[{"\"x\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[3, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->908356316,ExpressionUUID->"5c1ae694-96a8-4a8a-84ce-05fd3bdea7b1"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->283356489,ExpressionUUID->"6f2fb56d-8f67-4cfb-b1f8-b606657be134"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "ea9c162d-d97e-4b64-bc87-5ed94ee673ca"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1893551625,ExpressionUUID->"bd94aa2c-2585-4944-b0bc-f60cbcf8b6f5"],

Cell["\<\
Here the controlled-unitary gate has the unitary operator acting on multiple \
qubits.\
\>", "ExampleText",
 CellID->1781572424,ExpressionUUID->"284f2e77-8cfb-496b-b8b1-736b5b941864"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"U", "=", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{"\[Phi]", ",", 
     RowBox[{"S", "[", 
      RowBox[{"2", ",", "1"}], "]"}]}], "]"}], "**", 
   RowBox[{"Rotation", "[", 
    RowBox[{"\[Theta]", ",", 
     RowBox[{"S", "[", 
      RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->907561411,ExpressionUUID->"583dcfd0-4cf8-46b6-8cbe-94a3e01d9163"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{"\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"3"}, "RowDefault"], 
      TemplateBox[{"\"y\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "-", 
  RowBox[{"\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"x\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[1]=",
 CellID->2050996554,ExpressionUUID->"952ef820-9df5-4752-9e33-17b50871baa0"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", "U", ",", 
     RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}], "]"}]}]], "Input",\

 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1556697824,ExpressionUUID->"46924dc0-913b-40f5-b5cd-df985efa14c8"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], NCache[{1, Rational[-5, 2]}, {1, -2.5}], NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$]} -> {1}, 
    Cos[Rational[1, 2] $CellContext`\[Theta]] 
     Cos[Rational[1, 2] $CellContext`\[Phi]] + ((Complex[0, -1] 
       Cos[Rational[1, 2] $CellContext`\[Phi]]) $CellContext`S[3, 2]) 
     Sin[Rational[1, 2] $CellContext`\[Theta]] + ((Complex[0, -1] 
       Cos[Rational[1, 2] $CellContext`\[Theta]]) $CellContext`S[2, 1]) 
     Sin[Rational[1, 2] $CellContext`\[Phi]] - (Q3`Multiply[
       $CellContext`S[2, 1], 
       $CellContext`S[3, 2]] Sin[Rational[1, 2] $CellContext`\[Theta]]) 
    Sin[Rational[1, 2] $CellContext`\[Phi]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->35345324,ExpressionUUID->"9d9cfa2b-19f4-44fa-9945-9bcb2b742814"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "[", "qc", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1323430295,ExpressionUUID->"b2a0b1b0-c7e3-44dc-8231-b876c785a591"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "2"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "+", 
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["\[Theta]", "2"], "]"}], " ", 
      RowBox[{"Cos", "[", 
       FractionBox["\[Phi]", "2"], "]"}]}]}], ")"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["\[Theta]", "2"], "]"}], " ", 
      RowBox[{"Cos", "[", 
       FractionBox["\[Phi]", "2"], "]"}]}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"1"}, "RowDefault"], 
      TemplateBox[{"\"z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"3"}, "RowDefault"], 
      TemplateBox[{"\"y\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"x\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"x\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1194710755,ExpressionUUID->"c214430b-5ba0-4d1e-bd74-63231efbea02"]
}, Open  ]],

Cell["It is more common to have multiple controlled qubits.", "ExampleText",
 CellID->796325451,ExpressionUUID->"0e0f5ac2-9b70-4103-b701-63939a8dcb99"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "@", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2"}], "}"}]}], ",", 
     RowBox[{"Rotation", "[", 
      RowBox[{"\[Phi]", ",", 
       RowBox[{"S", "[", 
        RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1688856124,ExpressionUUID->"abe1d9c9-0aa5-4e31-a4b2-f82660b96e38"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     DiskBox[{1, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"U\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$], 
      $CellContext`S[2, Q3`$]} -> {1, 1}, 
    Q3`Rotation[$CellContext`\[Phi], 
     $CellContext`S[3, 2]]]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->1902338378,ExpressionUUID->"14f6bc77-fa82-4a71-9d6c-2193c3f1e043"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "@", "qc"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->97902928,ExpressionUUID->"4a0cfe0c-14fc-46cd-b599-f70dc62d5171"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"3", "+", 
     RowBox[{"Cos", "[", 
      FractionBox["\[Phi]", "2"], "]"}]}], ")"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"1"}, "RowDefault"], 
      TemplateBox[{"\"z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"3"}, "RowDefault"], 
      TemplateBox[{"\"y\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[5]=",
 CellID->1847803460,ExpressionUUID->"412535fa-9b04-4a1e-92d7-e83967c30d73"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "03b762e6-68a0-4bcc-a130-c9f96dae9999"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1616593910,ExpressionUUID->"c5d5c2aa-530a-42aa-8e24-c242c882ad43"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"S", "@", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}]}], "->", 
      RowBox[{"{", 
       RowBox[{"1", ",", "0"}], "}"}]}], ",", 
     RowBox[{"Rotation", "[", 
      RowBox[{"\[Phi]", ",", 
       RowBox[{"S", "[", 
        RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->423687378,ExpressionUUID->"a9a43fc4-d44f-4f85-8721-857e10ee0185"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[GrayLevel[0]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"U\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$], 
      $CellContext`S[2, Q3`$]} -> {1, 0}, 
    Q3`Rotation[$CellContext`\[Phi], 
     $CellContext`S[3, 2]]]]]], "Output",
 CellLabel->"Out[1]=",
 CellID->151303477,ExpressionUUID->"4092e53a-74d2-4e79-b8be-e6c22cc45e29"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}], ",", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "@", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}]}], ",", 
      RowBox[{"Rotation", "[", 
       RowBox[{"\[Phi]", ",", 
        RowBox[{"S", "[", 
         RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->446009393,ExpressionUUID->"fa23c664-5d68-4e25-80d2-cdacb9156739"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {4, -1}}, {{0, -2}, {4, -2}}, {{0, -3}, {4, -3}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}}], 
     DiskBox[{2, -1}, 0.09], DiskBox[{2, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{1.6, -3.4}, {2.4, -2.6}]}, 
     LineBox[{{1.6, -3.4}, {2.4, -3.4}, {2.4, -2.6}, {1.6, -2.6}, {
      1.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"U\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {2, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -2.4}, {3.4, -1.6}]}, 
     LineBox[{{2.6, -2.4}, {3.4, -2.4}, {3.4, -1.6}, {2.6, -1.6}, {
      2.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {3, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->190.79999999999998`,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   $CellContext`S[2, 1], 
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$], 
      $CellContext`S[2, Q3`$]} -> {1, 1}, 
    Q3`Rotation[$CellContext`\[Phi], 
     $CellContext`S[3, 2]]], 
   $CellContext`S[2, 1]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1138237674,ExpressionUUID->"a24b4614-53da-4a96-976d-4d77389376ed"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"new", "-", "qc"}], "//", "Elaborate"}], "//", 
  "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->2072193516,ExpressionUUID->"8a007ce5-4573-43b3-83ca-0d657091182b"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->2010099382,ExpressionUUID->"c3d6d3b5-36d5-45fb-aae5-de71c4cdd95c"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"9477ca1a-5b63-40c1-bb81-22127e148e0f"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"f8620901-5c96-4631-9d1b-6686f68e88f5"],
 "Scope",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "ec848eb9-1205-4b2f-87a9-90630ae0d2a5"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1293636265,ExpressionUUID->"c6a1ee95-4584-46fe-8ad7-afbb17347d6f"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "ExampleSubsection", "0"}, Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"3c0355b1-1f86-4f17-ae3f-a92b58161211"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"3081cffc-d7dc-4d21-9c1b-2c5608008591"],
 "Expand",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "776cc57e-801a-4e97-b63a-0c844bdf0779"]
}], "ExampleSubsection", "ExampleSubsection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1965812958,ExpressionUUID->"7043ef27-640d-4de7-b716-4c76bfd09208"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Expand"]], "paclet:ref/Expand"},
    "RefLink",
    BaseStyle->{"InlineFormula"}], "[", 
   RowBox[{
    TemplateBox[{
      Cell[
       TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
      "Q3 Package Symbol"},
     "PackageLink",
     BaseStyle->"InlineFormula"], "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        SubscriptBox[
         StyleBox["c", "TI"], 
         StyleBox["1", "TR"]], ",", 
        SubscriptBox[
         StyleBox["c", "TI"], 
         StyleBox["2", "TR"]], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        SubscriptBox[
         StyleBox["v", "TI"], 
         StyleBox["1", "TR"]], ",", 
        SubscriptBox[
         StyleBox["v", "TI"], 
         StyleBox["2", "TR"]], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "}"}]}], ",", " ", 
     StyleBox["op", "TI"]}], "]"}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "8725e564-d8fd-426e-a8f2-0cce9488b2cb"],
 " decomposes the controlled-unitary gate into a product of the CNOT and \
single-qubit rotations. Note that this ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "201ffca5-21c5-4ab4-be41-7225305cc75c"],
 " feature of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "ae898680-4e51-4cdf-9984-13eef18f7ed1"],
 " is still experimental (as of Q3 v2.11.2)."
}], "ExampleText",
 CellID->227879916,ExpressionUUID->"0c7aa4f3-37dd-4e0e-bd2e-59186a7adb07"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1801264145,ExpressionUUID->"71fb8275-6431-42f8-9f10-5c98244a4ac5"],

Cell["Consider a single-qubit unitary gate.", "ExampleText",
 CellID->1033495556,ExpressionUUID->"db782b97-aa82-4e66-be39-ffc32793b9ad"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{
   RowBox[{"Exp", "[", 
    RowBox[{
     RowBox[{"-", "I"}], "*", 
     RowBox[{"Pi", "/", "4"}]}], "]"}], "*", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Pi", "/", "3"}], ",", 
       RowBox[{"Pi", "/", "2"}], ",", 
       RowBox[{"Pi", "/", "6"}]}], "}"}], ",", 
     RowBox[{"S", "[", "2", "]"}]}], "]"}]}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1096870451,ExpressionUUID->"f44cb84c-1617-45fd-859e-accf2ebd223c"],

Cell[BoxData[
 RowBox[{
  SuperscriptBox["\[ExponentialE]", 
   RowBox[{"-", 
    FractionBox[
     RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]}]], " ", 
  RowBox[{"EulerRotation", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      FractionBox["\[Pi]", "3"], ",", 
      FractionBox["\[Pi]", "2"], ",", 
      FractionBox["\[Pi]", "6"]}], "}"}], ",", 
    InterpretationBox[
     SubscriptBox[
      TemplateBox[{"S"},
       "RowDefault"], 
      TemplateBox[{"2"},
       "RowDefault"]],
     $CellContext`S[2, Q3`$]]}], "]"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->949903367,ExpressionUUID->"531e1762-93b2-47d0-b01f-23addc0c5238"]
}, Open  ]],

Cell["Here is the matrix representation of the above gate.", "ExampleText",
 CellID->1955102746,ExpressionUUID->"76a7ca47-1fd7-419c-a51d-f57fe562138a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mat", "=", 
   RowBox[{
    RowBox[{"Matrix", "[", "op", "]"}], "//", "SimplifyThrough"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"mat", "//", "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->2059470547,ExpressionUUID->"c86952bf-725b-4ec0-9a9f-b5365bfb06f9"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"-", 
       FractionBox["\[ImaginaryI]", 
        SqrtBox["2"]]}], 
      FractionBox[
       RowBox[{"\[ImaginaryI]", " ", 
        RowBox[{"(", 
         RowBox[{"\[ImaginaryI]", "+", 
          SqrtBox["3"]}], ")"}]}], 
       RowBox[{"2", " ", 
        SqrtBox["2"]}]]},
     {
      FractionBox[
       RowBox[{
        RowBox[{"-", "\[ImaginaryI]"}], "+", 
        SqrtBox["3"]}], 
       RowBox[{"2", " ", 
        SqrtBox["2"]}]], 
      FractionBox["1", 
       SqrtBox["2"]]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {2, 2}, 0, {
     1, {{0, 2, 4}, {{1}, {2}, {2}, {1}}}, {
      Complex[0, -1] 
       2^Rational[-1, 2], (Complex[0, Rational[1, 2]] 2^Rational[-1, 2]) (
        Complex[0, 1] + 3^Rational[1, 2]), 2^
       Rational[-1, 2], (Rational[1, 2] 2^Rational[-1, 2]) (Complex[0, -1] + 
        3^Rational[1, 2])}}]]]]], "Output",
 CellLabel->"Out[3]//MatrixForm=",
 CellID->2072692787,ExpressionUUID->"5fc9826e-6800-475c-86e9-87b76fee004d"]
}, Open  ]],

Cell["\<\
Now, consider a controlled-unitary gate with the above gate acting on the \
target qubit.\
\>", "ExampleText",
 CellID->1600123813,ExpressionUUID->"789492ba-4f63-4904-8043-eee75f8aa180"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"cu", "=", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", "op", ",", 
     RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", "cu", "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->8884588,ExpressionUUID->"61eb7453-9767-442e-b8e4-fd7b76180024"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$]} -> {1}, E^(Complex[0, 
        Rational[-1, 4]] Pi) 
    Q3`EulerRotation[{
      Rational[1, 3] Pi, Rational[1, 2] Pi, Rational[1, 6] Pi}, 
      $CellContext`S[2, Q3`$]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->1315485681,ExpressionUUID->"ca780df1-2e18-424a-9ac3-807c6c4dea0d"]
}, Open  ]],

Cell["\<\
Decompose the controlled-unitary gate above into a product of single-qubit \
rotations and CNOT gate.\
\>", "ExampleText",
 CellID->777355164,ExpressionUUID->"bf3616c6-abdb-4186-be16-48d519cda364"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Expand", "[", "cu", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1865987295,ExpressionUUID->"7e24ce5d-ecc7-4235-9aea-c752d184cfad"],

Cell[BoxData[
 RowBox[{"Sequence", "[", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{
     RowBox[{"-", 
      FractionBox["\[Pi]", "12"]}], ",", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"S"}, "RowDefault"], 
        TemplateBox[{"2"}, "RowDefault"], 
        TemplateBox[{"\"Z\""}, "RowDefault"]},
       "Subsuperscript"],
      $CellContext`S[2, 3]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"C\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}], ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}]}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"B\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox["\[Pi]", "3"], ",", 
       FractionBox["\[Pi]", "4"], ",", "0"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"A\"\>"}]}], "]"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]},
           "Subsuperscript"],
          $CellContext`S[1, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         RowBox[{"-", 
          FractionBox["\[Pi]", "4"]}], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]}], "]"}]], "Output",
 CellLabel->"Out[5]=",
 CellID->1192579250,ExpressionUUID->"2ab8fb34-384c-4b55-afa9-eb2ff584e800"]
}, Open  ]],

Cell["Represent the decomposition in a quantum circuit.", "ExampleText",
 CellID->1490385628,ExpressionUUID->"c2eca4a6-5908-4d48-9fdb-eada5eb2ce3e"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "[", "cu", "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->984160605,ExpressionUUID->"9999c13b-9a3d-4b6e-877f-7602761e86eb"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {7, -1}}, {{0, -2}, {7, -2}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"C\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}}], 
     DiskBox[{2, -1}, 0.09], {CircleBox[{2, -2}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -2}, {2.2666666666666666`, -2}}, {{
         2, -2.2666666666666666`}, {2, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -2.4}, {3.4, -1.6}]}, 
     LineBox[{{2.6, -2.4}, {3.4, -2.4}, {3.4, -1.6}, {2.6, -1.6}, {
      2.6, -2.4}}], InsetBox[
      StyleBox["\<\"B\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {3, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{4, -1}, {4, -2}}], 
     DiskBox[{4, -1}, 0.09], {CircleBox[{4, -2}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -2}, {4.266666666666667, -2}}, {{
         4, -2.2666666666666666`}, {4, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{4.6, -2.4}, {5.4, -1.6}]}, 
     LineBox[{{4.6, -2.4}, {5.4, -2.4}, {5.4, -1.6}, {4.6, -1.6}, {
      4.6, -2.4}}], InsetBox[
      StyleBox["\<\"A\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {5, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -1.4}, {6.4, -0.6}]}, 
     LineBox[{{5.6, -1.4}, {6.4, -1.4}, {6.4, -0.6}, {5.6, -0.6}, {
      5.6, -1.4}}], InsetBox[
      StyleBox[
       TemplateBox[{"\"Z\"", 
         RowBox[{"-", 
           FractionBox["\[Pi]", "4"]}]},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {6, -1}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->298.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[Rational[-1, 12] Pi, 
    $CellContext`S[2, 3], "Label" -> "C"], 
   Q3`CNOT[{
      $CellContext`S[1, Q3`$]} -> {1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{0, Rational[-1, 4] Pi, Rational[-1, 4] Pi}, 
    $CellContext`S[2, Q3`$], "Label" -> "B"], 
   Q3`CNOT[{
      $CellContext`S[1, Q3`$]} -> {1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{Rational[1, 3] Pi, Rational[1, 4] Pi, 0}, 
    $CellContext`S[2, Q3`$], "Label" -> "A"], 
   Q3`Phase[Rational[-1, 4] Pi, 
    $CellContext`S[1, 3]]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->1382457793,ExpressionUUID->"18319375-e178-42a4-a64c-59f8102774a1"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Elaborate", "[", "cu", "]"}], "-", 
   RowBox[{"Elaborate", "[", "new", "]"}]}], "//", "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->298820583,ExpressionUUID->"8e470220-2270-4db5-bc2f-98b5d8369bf7"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[7]=",
 CellID->653716580,ExpressionUUID->"77907b74-e770-405e-aa78-e1b9f0e7cc61"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "973e01be-e50a-4caa-9d7b-1da358e3d5e4"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1705608657,ExpressionUUID->"fdb16c1f-65f0-41d4-bd3a-8efdae87f25a"],

Cell[TextData[{
 "The ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "1340c724-9dbc-4c8b-9805-bd4cc504938c"],
 " feature of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "6b93201b-4825-4f95-bcff-472e135328da"],
 " is supposed to be used inside ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["QuantumCircuit"]], "paclet:Q3/ref/QuantumCircuit", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "4eb0932b-b6a9-4285-9e6e-9ec9dc0a223f"],
 ". If you want to analyse or check the decomposition, the following example \
may be useful."
}], "ExampleText",
 CellID->181077262,ExpressionUUID->"2d7e6b91-089e-46bf-872e-62fb7e3771f7"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"cmp", "=", 
  RowBox[{"{", 
   RowBox[{"Expand", "[", "cu", "]"}], "}"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"Notice", " ", 
    RowBox[{
     RowBox[{"{", "\[Ellipsis]", "}"}], "."}]}], " ", "*)"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1563352008,ExpressionUUID->"f6d84b02-f8d0-46e1-9c31-c4e075ddbf10"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{
     RowBox[{"-", 
      FractionBox["\[Pi]", "12"]}], ",", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"S"}, "RowDefault"], 
        TemplateBox[{"2"}, "RowDefault"], 
        TemplateBox[{"\"Z\""}, "RowDefault"]},
       "Subsuperscript"],
      $CellContext`S[2, 3]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"C\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}], ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}]}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"B\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox["\[Pi]", "3"], ",", 
       FractionBox["\[Pi]", "4"], ",", "0"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"A\"\>"}]}], "]"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]},
           "Subsuperscript"],
          $CellContext`S[1, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         RowBox[{"-", 
          FractionBox["\[Pi]", "4"]}], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]}], "}"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->60304100,ExpressionUUID->"2f34d452-7a9f-4a68-a4c0-b79862f97c74"]
}, Open  ]],

Cell["You can remove the labels.", "ExampleText",
 CellID->1652630181,ExpressionUUID->"4868bc9a-b530-45cd-ba8f-03165a086a0c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"more", "=", 
  RowBox[{"QuantumCircuitTrim", "[", "cmp", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->63469277,ExpressionUUID->"1a99cb39-aa0b-4cff-aebb-6a6dda19de11"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{
     RowBox[{"-", 
      FractionBox["\[Pi]", "12"]}], ",", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"S"}, "RowDefault"], 
        TemplateBox[{"2"}, "RowDefault"], 
        TemplateBox[{"\"Z\""}, "RowDefault"]},
       "Subsuperscript"],
      $CellContext`S[2, 3]]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}], ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}]}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox["\[Pi]", "3"], ",", 
       FractionBox["\[Pi]", "4"], ",", "0"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]]}], "]"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]},
           "Subsuperscript"],
          $CellContext`S[1, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         RowBox[{"-", 
          FractionBox["\[Pi]", "4"]}], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]}], "}"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->705437001,ExpressionUUID->"03d0be60-e7f0-45c4-871a-22212d8d8469"]
}, Open  ]],

Cell[TextData[{
 "You can directly multiply the components to check the equivalence. Here, \
notice ",
 StyleBox["Reverse[cmp]", "Input"],
 "."
}], "ExampleText",
 CellID->1753917898,ExpressionUUID->"496b1728-af9e-4ac7-b616-8e54245465fa"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Apply", "[", 
     RowBox[{"Multiply", ",", 
      RowBox[{"Reverse", "@", "cmp"}]}], "]"}], "-", "cu"}], "//", 
   "Elaborate"}], "//", "FullSimplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1043909238,ExpressionUUID->"5f5ee38e-11a3-414b-a7d1-fe8b6bec43a2"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->991594647,ExpressionUUID->"2016f074-e560-47c5-9f4f-fea5b612c856"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "7f26634e-daa4-4185-b379-cdaec91cf4eb"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1600539001,ExpressionUUID->"31ae6430-8c7b-44cd-8300-670c45ce1b5f"],

Cell[TextData[{
 "The ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "b78d7b08-2be2-4ae1-b461-d0e33c31a1ca"],
 " feature also applies to multi-control unitary gates. For example, consider \
the above unitary gate controlled by two qubits ",
 StyleBox["S[0,$]", "Input"],
 " and ",
 StyleBox["S[1,$]", "Input"],
 "."
}], "ExampleText",
 CellID->595717937,ExpressionUUID->"79199969-d11b-4cb4-a2e6-7269e9019f29"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ccu", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"0", ",", "1"}], "}"}]}], ",", "op", ",", 
    RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1811053528,ExpressionUUID->"500055e9-8455-419c-9fdf-7e03c8b7ed13"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"0"},
         "RowDefault"]],
       $CellContext`S[0, Q3`$]], ",", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"1"},
         "RowDefault"]],
       $CellContext`S[1, Q3`$]]}], "}"}], "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"1", ",", "1"}], "}"}]}], ",", 
   RowBox[{
    SuperscriptBox["\[ExponentialE]", 
     RowBox[{"-", 
      FractionBox[
       RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]}]], " ", 
    RowBox[{"EulerRotation", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        FractionBox["\[Pi]", "3"], ",", 
        FractionBox["\[Pi]", "2"], ",", 
        FractionBox["\[Pi]", "6"]}], "}"}], ",", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]]}], "]"}]}], ",", 
   RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"U\"\>"}]}], "]"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->786916481,ExpressionUUID->"e137060a-26dc-4c2b-985b-95472b2d14d9"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qcc", "=", 
  RowBox[{"QuantumCircuit", "[", "ccu", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1793861229,ExpressionUUID->"6e0e1754-9344-49b1-8f8a-89c82edae3b9"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     DiskBox[{1, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[0, Q3`$], 
      $CellContext`S[1, Q3`$]} -> {1, 1}, E^(Complex[0, 
        Rational[-1, 4]] Pi) 
    Q3`EulerRotation[{
      Rational[1, 3] Pi, Rational[1, 2] Pi, Rational[1, 6] Pi}, 
      $CellContext`S[2, Q3`$]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1409770937,ExpressionUUID->"d2abe505-5c39-4885-87e4-06dc5207fe42"]
}, Open  ]],

Cell[TextData[{
 "Decompose the quantum circuit above into a product of the multi-controlled \
NOT gate  and single-qubit rotations. (See also the ",
 ButtonBox["Generalization & Extensions",
  BaseStyle->"Link",
  ButtonData->"paclet:Q3/ref/ControlledGate#1020263627"],
 " section below.)"
}], "ExampleText",
 CellID->1051097161,ExpressionUUID->"caa8d7d5-c50e-46f8-aeb9-d2402a1df659"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "[", "ccu", "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1765521323,ExpressionUUID->"d1091702-79cb-4981-ba49-cb4d7dba0090"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {7, -1}}, {{0, -2}, {7, -2}}, {{0, -3}, {7, -3}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"C\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}}], 
     DiskBox[{2, -1}, 0.09], 
     DiskBox[{2, -2}, 0.09], {CircleBox[{2, -3}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -3}, {2.2666666666666666`, -3}}, {{
         2, -3.2666666666666666`}, {2, -2.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -3.4}, {3.4, -2.6}]}, 
     LineBox[{{2.6, -3.4}, {3.4, -3.4}, {3.4, -2.6}, {2.6, -2.6}, {
      2.6, -3.4}}], InsetBox[
      StyleBox["\<\"B\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {3, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}}], 
     DiskBox[{4, -1}, 0.09], 
     DiskBox[{4, -2}, 0.09], {CircleBox[{4, -3}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -3}, {4.266666666666667, -3}}, {{
         4, -3.2666666666666666`}, {4, -2.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{4.6, -3.4}, {5.4, -2.6}]}, 
     LineBox[{{4.6, -3.4}, {5.4, -3.4}, {5.4, -2.6}, {4.6, -2.6}, {
      4.6, -3.4}}], InsetBox[
      StyleBox["\<\"A\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {5, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{6, -1}, {6, -2}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -2.4}, {6.4, -1.6}]}, 
     LineBox[{{5.6, -2.4}, {6.4, -2.4}, {6.4, -1.6}, {5.6, -1.6}, {
      5.6, -2.4}}], InsetBox[
      StyleBox[
       TemplateBox[{"\"Z\"", 
         RowBox[{"-", 
           FractionBox["\[Pi]", "4"]}]},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {6, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->298.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[Rational[-1, 12] Pi, 
    $CellContext`S[2, 3], "Label" -> "C"], 
   Q3`CNOT[{
      $CellContext`S[0, Q3`$], 
      $CellContext`S[1, Q3`$]} -> {1, 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{0, Rational[-1, 4] Pi, Rational[-1, 4] Pi}, 
    $CellContext`S[2, Q3`$], "Label" -> "B"], 
   Q3`CNOT[{
      $CellContext`S[0, Q3`$], 
      $CellContext`S[1, Q3`$]} -> {1, 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{Rational[1, 3] Pi, Rational[1, 4] Pi, 0}, 
    $CellContext`S[2, Q3`$], "Label" -> "A"], 
   Q3`ControlledGate[{
      $CellContext`S[0, Q3`$]} -> {1}, 
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]]]], "Output",
 CellLabel->"Out[3]=",
 CellID->1901953158,ExpressionUUID->"5b248ced-6206-4b5d-99dd-fbef79ab0d34"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"qcc", "-", "new"}], "//", "Elaborate"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1192347325,ExpressionUUID->"b1b686f0-ef19-4317-8b2d-973c6b14e8e5"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[4]=",
 CellID->1161215625,ExpressionUUID->"4503948f-d1e2-41e2-b828-c6687781058e"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "0"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"52148833-ff49-4810-a23f-41d9297ca562"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"918278ba-570f-4aea-8f3a-ae125cab98d9"],
 "Generalizations & Extensions",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(2)", "ExampleCount",ExpressionUUID->
  "ee612502-e477-44b0-b3f7-36941ac781a3"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1020263627,ExpressionUUID->"2a2b669f-040e-49c3-9f03-3731259755c8"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->54597739,ExpressionUUID->"d99a708d-487c-469f-b6d1-781a1847c020"],

Cell["\<\
When the unitary operator is a complex number of unit amplitude, then the \
controlled-U gate is equivalent to the phase gate on the controlled qubit.\
\>", "ExampleText",
 CellID->1658935743,ExpressionUUID->"ce1bb20e-d226-4061-b0c9-827052c6e4a2"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Let", "[", 
  RowBox[{"Real", ",", "\[Phi]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"z", "=", 
  RowBox[{"Exp", "[", 
   RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->450269680,ExpressionUUID->"07b011eb-009c-4d3c-8d88-f0caf64477f4"],

Cell[BoxData[
 SuperscriptBox["\[ExponentialE]", 
  RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1945262974,ExpressionUUID->"cd426c48-ea70-4003-9c22-835c33031d9b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"S", "[", "1", "]"}], ",", "z"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->113446564,ExpressionUUID->"5fe293ac-8bc2-45a2-b34d-2d32a7052650"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{
          TemplateBox[{"S"}, "RowDefault"], 
          TemplateBox[{"1"}, "RowDefault"], 
          TemplateBox[{"\"z\""}, "RowDefault"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       RowBox[{"arg", "(", 
        SuperscriptBox["\[ExponentialE]", 
         RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]], ")"}], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[
   Arg[E^(Complex[0, 1] $CellContext`\[Phi])], 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[3]=",
 CellID->703423404,ExpressionUUID->"3eff8079-27f3-4cb1-bf2d-6dd00fb69efd"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", "z"}], "]"}], "/.", 
  RowBox[{"{", 
   RowBox[{"\[Phi]", "\[Rule]", 
    RowBox[{"Pi", "/", "3"}]}], "}"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1884776724,ExpressionUUID->"20541f68-d4d5-403a-9b7c-b35230ba90d8"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{
          TemplateBox[{"S"}, "RowDefault"], 
          TemplateBox[{"1"}, "RowDefault"], 
          TemplateBox[{"\"z\""}, "RowDefault"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       FractionBox["\[Pi]", "3"], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[Rational[1, 3] Pi, 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->1460598599,ExpressionUUID->"342e0cb8-ed9d-4aad-bcc6-cc83331739cf"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", 
     RowBox[{
      RowBox[{"S", "[", 
       RowBox[{"2", ",", "0"}], "]"}], " ", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}], ",", 
     RowBox[{"\"\<Label\>\"", "\[Rule]", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1389124015,ExpressionUUID->"a9538de2-cc5f-4e43-a03c-e888e971dcf6"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$]} -> {1}, 
    E^(Complex[0, 1] $CellContext`\[Phi]) $CellContext`S[2, 0], "Label" -> 
    E^(Complex[0, 1] $CellContext`\[Phi])]]]], "Output",
 CellLabel->"Out[5]=",
 CellID->1196824310,ExpressionUUID->"66f9610a-d767-443e-b09d-afe033713700"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc1", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", " ", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}], ",", 
      RowBox[{"\"\<Label\>\"", "\[Rule]", 
       RowBox[{"Exp", "[", 
        RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<Visible\>\"", "\[Rule]", 
     RowBox[{"S", "[", "2", "]"}]}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->125637926,ExpressionUUID->"65b1bae5-0660-4eef-b5a3-603d47994957"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
     LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
      0.6, -1.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -1}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Phase[
    Arg[E^(Complex[0, 1] $CellContext`\[Phi])], 
    $CellContext`S[1, 3], "Label" -> E^(Complex[0, 1] $CellContext`\[Phi])], 
   "Visible" -> $CellContext`S[2]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->204608301,ExpressionUUID->"38db03ae-3d65-4a73-b259-57de230f1b8d"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc1"}], "]"}], "//", "FullSimplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->1909614846,ExpressionUUID->"9dd3297d-b0d9-4eb7-b005-025ea5b87a1c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[7]=",
 CellID->591347377,ExpressionUUID->"78997aea-e1e7-4ffa-bef7-bd9d551d352e"]
}, Open  ]],

Cell["\<\
When the number is not of unit magnitude, it gives a warning message.\
\>", "ExampleText",
 CellID->511713125,ExpressionUUID->"15d62ffe-8c12-4b2b-b186-afd2fe6eadb1"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"S", "[", "1", "]"}], ",", 
   RowBox[{"1", "+", "I"}]}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->375479679,ExpressionUUID->"30d874de-864b-4b1c-9e38-02f2d12a42e8"],

Cell[BoxData[
 TemplateBox[{
  "ControlledGate", "nonuni", 
   "\"The operator \\!\\(\\*RowBox[{\\\"1\\\", \\\"+\\\", \\\"\[ImaginaryI]\\\
\"}]\\) is not unitary.\"", 2, 30, 1, 33931748211747311804, "Local", 
   "Q3`ControlledGate"},
  "MessageTemplate2"]], "Message", "MSG",
 CellLabel->"During evaluation of In[8]:=",
 CellID->1711561862,ExpressionUUID->"0d3fcfd8-61f2-4aad-bea3-fbd92c9769b3"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{
          TemplateBox[{"S"}, "RowDefault"], 
          TemplateBox[{"1"}, "RowDefault"], 
          TemplateBox[{"\"z\""}, "RowDefault"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       FractionBox["\[Pi]", "4"], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[Rational[1, 4] Pi, 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[8]=",
 CellID->676763069,ExpressionUUID->"23130fc9-c338-4b5e-b995-11a935bec834"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "1a5bc3c4-ecf0-492e-8d57-7143fa8e45a7"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->174573991,ExpressionUUID->"b102b10c-2e0c-4f52-af7d-4f35c16a731a"],

Cell[TextData[{
 "When there are more than one control qubits, then the controlled-U gate \
induces a relative phase shift on the state ",
 Cell[BoxData[
  TemplateBox[{
    RowBox[{"11", "\[Ellipsis]1"}]},
   "Ket"]],ExpressionUUID->"9d2f3b7b-542e-481d-b1b0-3436ac17c901"],
 "."
}], "ExampleText",
 CellID->1484041902,ExpressionUUID->"14c34e30-a4de-4b49-ac74-cd06839bb1cd"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2"}], "}"}]}], ",", 
    RowBox[{"Exp", "[", 
     RowBox[{"I", " ", 
      RowBox[{"\[Pi]", "/", "4"}]}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1674411155,ExpressionUUID->"dc19ad6b-fe7c-4749-b923-c11da779a41e"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"1"},
        "RowDefault"]],
      $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
    RowBox[{"{", "1", "}"}]}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"z\""}, "RowDefault"]},
           "Subsuperscript"],
          $CellContext`S[2, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         FractionBox["\[Pi]", "4"], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[1, 4] Pi, 
     $CellContext`S[2, 3]]]}], "]"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->443435683,ExpressionUUID->"bedc6edc-b9ae-4313-907e-ef73e2ae51c3"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "@", "op"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1750426850,ExpressionUUID->"dacf46e0-996f-4937-91d7-16d92e1787ca"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"3", "+", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"-", "1"}], "+", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"1"}, "RowDefault"], 
      TemplateBox[{"\"z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]]}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1722042249,ExpressionUUID->"72174386-4c90-4bde-aadb-81362ab56b20"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Matrix", "[", "op", "]"}], "//", "Simplify"}], "//", 
  "MatrixForm"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->295000539,ExpressionUUID->"97d44f6c-079f-45b1-a0a3-67e5bde7554e"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", "0"},
     {"0", "1", "0", "0"},
     {"0", "0", "1", "0"},
     {"0", "0", "0", 
      FractionBox[
       RowBox[{"1", "+", "\[ImaginaryI]"}], 
       SqrtBox["2"]]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {4, 4}, 0, {
     1, {{0, 1, 2, 3, 4}, {{1}, {2}, {3}, {4}}}, {
      1, 1, 1, Complex[1, 1] 2^Rational[-1, 2]}}]]]]], "Output",
 CellLabel->"Out[3]//MatrixForm=",
 CellID->1517774493,ExpressionUUID->"14af4840-9201-43e3-8e09-88498daea2c6"]
}, Open  ]],

Cell["\<\
This expression is equivalent to the above one, but does not expand.\
\>", "ExampleText",
 CellID->2142135012,ExpressionUUID->"e8e32497-7873-4774-8f47-101658e21881"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2"}], "}"}]}], ",", 
    RowBox[{
     RowBox[{"Exp", "[", 
      RowBox[{"I", " ", 
       RowBox[{"\[Pi]", "/", "4"}]}], "]"}], " ", 
     RowBox[{"S", "[", 
      RowBox[{"3", ",", "0"}], "]"}]}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1434563406,ExpressionUUID->"73da201d-7fa1-4349-aff3-8e4546d704a8"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"1"},
         "RowDefault"]],
       $CellContext`S[1, Q3`$]], ",", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]]}], "}"}], "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"1", ",", "1"}], "}"}]}], ",", 
   RowBox[{
    SuperscriptBox["\[ExponentialE]", 
     FractionBox[
      RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]], " ", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"3"}, "RowDefault"], 
       TemplateBox[{"0"}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[3, 0]]}]}], "]"}]], "Output",
 CellLabel->"Out[4]=",
 CellID->2073151260,ExpressionUUID->"6f830c2a-e71f-44e4-bea0-49b3b5f3e658"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Elaborate", "[", "op", "]"}], "-", 
   RowBox[{"Elaborate", "[", "new", "]"}]}], "//", "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1544994010,ExpressionUUID->"e3064ca8-e8d2-4efc-b849-3137a78ebf7c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[5]=",
 CellID->1133351157,ExpressionUUID->"4ef6455f-53e4-4858-b55d-66a9b790d696"]
}, Open  ]],

Cell["\<\
The equivalence can also be examined in quantum circuit model. The \
controlled-unitary gate with the unitary gate given by the global phase shift \
is represented by the following quantum circuit model.\
\>", "ExampleText",
 CellID->382850454,ExpressionUUID->"65be8571-3cf9-4553-85a7-395894e269f2"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "@", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], ",", 
     RowBox[{
      RowBox[{"S", "[", 
       RowBox[{"4", ",", "0"}], "]"}], 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}], ",", 
     RowBox[{"\"\<Label\>\"", "\[Rule]", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->1698297027,ExpressionUUID->"1793343c-9063-4915-a491-af9497437511"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}, {{
     0, -4}, {2, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     DiskBox[{1, -1}, 0.09], DiskBox[{1, -2}, 0.09], DiskBox[{1, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, 
     LineBox[{{0.6, -4.4}, {1.4, -4.4}, {1.4, -3.6}, {0.6, -3.6}, {
      0.6, -4.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -4}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-9, 2], 
       Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$], 
      $CellContext`S[2, Q3`$], 
      $CellContext`S[3, Q3`$]} -> {1, 1, 1}, 
    E^(Complex[0, 1] $CellContext`\[Phi]) $CellContext`S[4, 0], "Label" -> 
    E^(Complex[0, 1] $CellContext`\[Phi])]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->2003225124,ExpressionUUID->"b66b1d92-34e5-46d7-bc9e-b5f4f11e6dda"]
}, Open  ]],

Cell["\<\
It is equivalent to the following three quantum circuit models involving \
(relative) phase-shift gate, and leaving the forth qubit intact.\
\>", "ExampleText",
 CellID->42562061,ExpressionUUID->"6e2d2745-0a7b-4b9e-bfbd-a37e9cfb24ba"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"qc1", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"1", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qc2", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "3"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"2", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qc3", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"3", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"GraphicsRow", "@", 
  RowBox[{"{", 
   RowBox[{"qc1", ",", "qc2", ",", "qc3"}], "}"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->385898355,ExpressionUUID->"d7f533b5-da8d-4744-af3a-cc59bfb42591"],

Cell[BoxData[
 GraphicsBox[{{}, {InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -1}}], 
           DiskBox[{1, -1}, 0.09], DiskBox[{1, -2}, 0.09], 
           DiskBox[{1, -3}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
           LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
            0.6, -1.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -1}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{
            $CellContext`S[1, Q3`$], 
            $CellContext`S[2, Q3`$], 
            $CellContext`S[3, Q3`$]} -> {1, 1, 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[1, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {63.9625, -76.65}, {Center, Center}, {118.99999999999999, 146.},
     
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}], 
    InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -3}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
           DiskBox[{1, -3}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
           LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
            0.6, -2.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -2}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{
            $CellContext`S[1, Q3`$], 
            $CellContext`S[3, Q3`$]} -> {1, 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[2, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {191.8875, -76.65}, {Center, Center}, {119., 146.},
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}], 
    InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
           DiskBox[{1, -2}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
           LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
            0.6, -3.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -3}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{
            $CellContext`S[1, Q3`$], 
            $CellContext`S[2, Q3`$]} -> {1, 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[3, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {319.8125, -76.65}, {Center, Center}, {119., 146.},
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}]}, {}},
  AxesStyle->Large,
  FrameStyle->Large,
  ImageSize->{
    UpTo[600], Automatic},
  PlotRange->{{0, 383.775}, {-153.3, 0}},
  PlotRangePadding->{6, 5}]], "Output",
 CellLabel->"Out[7]=",
 CellID->1575998148,ExpressionUUID->"7409877b-1b66-4444-821d-3340f79c04a2"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc1"}], "]"}], "//", 
  "Simplify"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc2"}], "]"}], "//", 
  "Simplify"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc3"}], "]"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->286463219,ExpressionUUID->"f0f0bd4c-571c-4294-80bb-fccbbc5be354"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->1023608827,ExpressionUUID->"7e9fe3e1-61d6-4bd0-a111-0989d546c8ee"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->302059272,ExpressionUUID->"ec388e32-8ddb-4809-a1fe-5ec2b562bf9c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->58842996,ExpressionUUID->"20430fb1-418b-4dba-aa96-9973e42cac8e"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, 
  Closed]]]],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedFunction.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"See", " ", "Also"}], "SeeAlsoSection"]},
      {Cell[TextData[{
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["QuantumCircuit"]], "paclet:Q3/ref/QuantumCircuit", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "6b6e3582-36df-4cdf-9747-f3ef5c15f490"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "9ddcdd82-1891-4116-a229-bf864d2c6bac"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["CZ"]], "paclet:Q3/ref/CZ", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "07864278-d9ac-49c0-a955-ad95a0778cc7"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["ControlledPower"]], "paclet:Q3/ref/ControlledPower", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "70e46ca8-18c1-4a1a-a405-368bd1d373fe"]
       }], "SeeAlso",ExpressionUUID->"2069cc9a-73bc-4a71-9a7f-600230bac6a8"]}
     }]}
  }]], "SeeAlsoSection",ExpressionUUID->"6a002da3-0b6b-4121-a848-\
5db523053b0f"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedTutorial.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox["Tutorials", "TutorialsSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Two-Qubit Gates"]], "paclet:Q3/tutorial/TwoQubitGates"},
          
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "d41cafb1-73ed-4f4d-8e4d-0b2e250af6b7"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Computation: Overview"]], 
           "paclet:Q3/tutorial/QuantumComputationOverview"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "dcfb9f66-bfbf-442b-a31e-e503a9f8b1f0"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Multi-Control Unitary Gates"]], 
           "paclet:Q3/tutorial/MultiControlUnitaryGates"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "1cb46c29-e557-4290-a1ed-3751c39250dc"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Information Systems with Q3"]], 
           "paclet:Q3/tutorial/QuantumInformationSystems"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "10b76f39-0fc2-40bd-a81a-4686f53984c3"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quick Quantum Computing with Q3"]], 
           "paclet:Q3/tutorial/QuickQuantumComputingWithQ3"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "ba3d675f-5ca2-4699-8005-fddd5bf2ca56"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3: Quick Start"]], "paclet:Q3/tutorial/Q3QuickStart"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "18eb3008-3e75-4e86-bb30-d7e680083ff3"]}]}
     }]}
  }]], "TutorialsSection",ExpressionUUID->"199063f9-ce1d-482f-a35c-\
2e9d8ea715a2"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, "RelatedGuide.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Related", " ", "Guides"}], "MoreAboutSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3 Application"]], "paclet:Q3/guide/Q3"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "23498638-45d7-471d-8184-33b8613c15aa"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Information Systems"]], 
           "paclet:Q3/guide/QuantumInformationSystems"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "fb9e3648-96af-4669-9150-3c47ac7edc64"]}]}
     }]}
  }]], "MoreAboutSection",ExpressionUUID->"d149b177-dbcf-4546-b8c8-\
f5ff93be2c16"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{29},
     "Spacer1"], GridBox[{
      {
       RowBox[{
        TemplateBox[{17},
         "Spacer1"], 
        StyleBox[
         RowBox[{"Related", " ", "Links"}], "RelatedLinksSection"]}]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "M. Nielsen and I. L. Chuang (2022)"}]]]], 
             "https://doi.org/10.1017/CBO9780511976667"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "8a1acaf0-5b96-421d-97f4-496f275d85f3"]}]],ExpressionUUID->
         "c4cf276f-2449-41cc-853d-e6347a5fa22c"],
        StyleBox[
        ", Quantum Computation and Quantum Information (Cambridge University \
Press, 2011).",
         FontSlant->"Plain"]
       }], "RelatedLinks",ExpressionUUID->
        "a40c8c48-8649-4007-a575-9a4705f7e194"]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "Mahn-Soo Choi (2022)"}]]]], 
             "https://doi.org/10.1007/978-3-030-91214-7"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "687a7687-f320-4ede-9f5a-7dbc6e4ad56b"]}]],ExpressionUUID->
         "51f4e162-4af7-46d3-98c4-e99a5ba3a431"],
        ", A Quantum Computation Workbook (Springer, 2022)."
       }], "RelatedLinks",ExpressionUUID->
        "d3b67a3d-e9bf-456f-8b4c-1b9fb674ad64"]}
     }]}
  }]], "RelatedLinksSection",ExpressionUUID->"05dbb909-1cc7-4269-b5b1-\
558fd881cd82"],

Cell[" ", "FooterCell",ExpressionUUID->"9c97a216-861d-4f47-81b9-822b59f9f485"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{900, 830},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"ControlledGate",
TaggingRules->{
 "ModificationHighlight" -> False, "ColorType" -> "", "LinkTrails" -> "", 
  "HasOptions" -> True, "ExampleCounter" -> 1, 
  "Openers" -> {
   "PrimaryExamplesSection" -> Open, 
    "ExampleSection" -> {"0" -> Open, "1" -> Closed, "2" -> Closed}, 
    "NotesSection" -> Closed, "ExampleSubsection" -> {"0" -> Closed}}, 
  "NewStyles" -> True, "CitationPopupData" -> $Failed, "ShowCitation" -> 
  False, "RootCaptions" -> "", 
  "Metadata" -> {
   "built" -> "{2023, 5, 23, 9, 16, 37.383875}", 
    "history" -> {"12", "13.2", "", ""}, "context" -> "Q3`", "keywords" -> {},
     "specialkeywords" -> {}, "tutorialcollectionlinks" -> {}, "index" -> 
    True, "label" -> "Q3 Symbol", "language" -> "en", "paclet" -> "Q3", 
    "status" -> "None", "summary" -> 
    "ControlledGate[{c1, c2, ...}, op] represents a multi-control \
multi-target unitary gate with control qubits c1, c2, ... and unitary \
operator op acting on the target qubits. ControlledGate[c, op] is equivalent \
to ControlledGate[{c}, op]. ControlledGate[{c1, c2, ...} -> {v1, v2, ...}, \
op] represents a variation of the controlled-unitary gate, where operator op \
operates when the control qubits c1, c2, ... take the logical values v1, v2, \
..., respectively. ControlledGate[c -> v, ...] is automatically converted to \
ControlledGate[{c} -> {v}, ...]. ControlledGate[{c1, c2, ...} -> v, ...] is \
automatically converted to ControlledGate[{c1, c2, ...} -> {v, v, ...}, \
...].", "synonyms" -> {}, "tabletags" -> {}, "title" -> "ControlledGate", 
    "titlemodifier" -> "", "metadescription" -> "", "windowtitle" -> 
    "ControlledGate", "type" -> "Symbol", "uri" -> "Q3/ref/ControlledGate"}},
CellContext->"Global`",
FrontEndVersion->"13.2 for Mac OS X ARM (64-bit) (January 30, 2023)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> FrontEnd`FileName[{"Wolfram"}, "Reference.nb"]]], 
   Cell[
    StyleData["Input"], CellContext -> "Global`"], 
   Cell[
    StyleData["Output"], CellContext -> "Global`"]}, Visible -> False, 
  FrontEndVersion -> "13.2 for Mac OS X ARM (64-bit) (January 30, 2023)", 
  StyleDefinitions -> "Default.nb"],
ExpressionUUID->"f7392b90-e72c-47d7-84de-656eb8e44a78"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "PrimaryExamplesSection"->{
  Cell[22942, 638, 1390, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"199cd319-2a7c-4ea5-a9f6-e3b3c15c3619",
   CellTags->"PrimaryExamplesSection",
   CellID->2052735294]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"PrimaryExamplesSection", 152187, 4510}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[586, 21, 7481, 178, 57, "AnchorBarGrid",ExpressionUUID->"8edd7d04-f324-435e-8bf0-0d479df83399",
 CellID->1],
Cell[8070, 201, 85, 0, 23, "ContextNameCell",ExpressionUUID->"d901fac1-f455-494d-ad30-01752b27f3a1"],
Cell[CellGroupData[{
Cell[8180, 205, 1177, 31, 60, "ObjectNameGrid",ExpressionUUID->"f615816c-f541-411c-8cfa-695bf22f9611"],
Cell[9360, 238, 7554, 215, 452, "Usage",ExpressionUUID->"d5ff7cc3-66ef-4e35-94b3-54814ac31901"]
}, Open  ]],
Cell[CellGroupData[{
Cell[16951, 458, 1899, 47, 37, "NotesSection",ExpressionUUID->"696903da-ff0a-4786-a76f-2082ba5ede54",
 CellGroupingRules->{"SectionGrouping", 50},
 CellID->1670756317],
Cell[18853, 507, 920, 28, 70, "Notes",ExpressionUUID->"6670571f-a860-473b-8687-f6f46ba1239e",
 CellID->1702748548],
Cell[19776, 537, 459, 13, 70, "Notes",ExpressionUUID->"b5b55ba7-a0fb-44e0-bb13-0b0996739ed8",
 CellID->491054349],
Cell[20238, 552, 876, 26, 70, "Notes",ExpressionUUID->"c557efd5-d85f-4cc4-b770-219c017d4918",
 CellID->2019652723],
Cell[21117, 580, 848, 25, 70, "Notes",ExpressionUUID->"50ad500f-0874-4a12-9f31-91f2c18b8ae0",
 CellID->384437925],
Cell[21968, 607, 847, 25, 70, "Notes",ExpressionUUID->"2682e52e-904d-4522-a9cf-bc88e79d7a8b",
 CellID->1895961038]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],
Cell[CellGroupData[{
Cell[22942, 638, 1390, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"199cd319-2a7c-4ea5-a9f6-e3b3c15c3619",
 CellTags->"PrimaryExamplesSection",
 CellID->2052735294],
Cell[24335, 677, 191, 3, 31, "Input",ExpressionUUID->"c8cb564b-093f-410b-879f-6a85825f367e",
 CellID->851865642],
Cell[CellGroupData[{
Cell[24551, 684, 1367, 36, 31, "ExampleSection",ExpressionUUID->"b1320d32-d065-4290-877a-e0f7a9f33de1",
 CellID->997297203],
Cell[25921, 722, 209, 5, 29, "Input",ExpressionUUID->"baec094e-fa94-458f-9046-ee0c3e6ee972",
 CellID->1403695601],
Cell[26133, 729, 170, 3, 38, "ExampleText",ExpressionUUID->"9524945c-8d35-41be-8523-2f18acd83b35",
 CellID->493202586],
Cell[CellGroupData[{
Cell[26328, 736, 327, 9, 29, "Input",ExpressionUUID->"4354d585-bd81-45a3-b780-b1a61094b1d1",
 CellID->1804103712],
Cell[26658, 747, 656, 21, 39, "Output",ExpressionUUID->"13811540-9202-4ddb-9a48-a962b77144db",
 CellID->1824676489]
}, Open  ]],
Cell[CellGroupData[{
Cell[27351, 773, 189, 4, 29, "Input",ExpressionUUID->"5ba2af87-c4be-4b41-a5fd-b3b44b3ef910",
 CellID->1699357571],
Cell[27543, 779, 1448, 43, 55, "Output",ExpressionUUID->"21de137b-2cf4-4238-a67b-103427b235a1",
 CellID->462710526]
}, Open  ]],
Cell[CellGroupData[{
Cell[29028, 827, 218, 5, 70, "Input",ExpressionUUID->"b6408331-aaa1-473a-bccf-fc54a169fc74",
 CellID->388513540],
Cell[29249, 834, 804, 23, 100, "Output",ExpressionUUID->"8202b011-8ed5-4d75-b91f-8620ca057b16",
 CellID->1414229004]
}, Open  ]],
Cell[CellGroupData[{
Cell[30090, 862, 228, 6, 70, "Input",ExpressionUUID->"0abb59b9-83fe-458c-8b32-b579e5a49f9e",
 CellID->227378000],
Cell[30321, 870, 2281, 66, 56, "Output",ExpressionUUID->"5a3b90e9-eb41-4049-b0d2-528cf4df078e",
 CellID->960122379]
}, Open  ]],
Cell[32617, 939, 581, 15, 70, "ExampleText",ExpressionUUID->"4d12dc5f-6f09-4488-9d46-16551fee856b",
 CellID->976135211],
Cell[CellGroupData[{
Cell[33223, 958, 335, 9, 70, "Input",ExpressionUUID->"1fd9e696-7166-4688-86e9-4504b2175f03",
 CellID->1713072528],
Cell[33561, 969, 1448, 43, 55, "Output",ExpressionUUID->"b575e154-0018-4b53-8c4a-a2d40d6e4fc3",
 CellID->468146210]
}, Open  ]],
Cell[CellGroupData[{
Cell[35046, 1017, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"cd828da9-3fdc-4262-8d12-ecd6569ef8c5",
 CellID->1117862758],
Cell[35292, 1024, 210, 4, 70, "ExampleText",ExpressionUUID->"ca28bcd1-bf07-4451-9475-4dafb4cb4161",
 CellID->66695600],
Cell[CellGroupData[{
Cell[35527, 1032, 193, 4, 70, "Input",ExpressionUUID->"c0c8bbd8-760d-45cd-bd92-82204740f18d",
 CellID->287461810],
Cell[35723, 1038, 1131, 29, 95, "Output",ExpressionUUID->"11247db5-e3f8-4630-9316-a7ab1e6d849f",
 CellID->14339239]
}, Open  ]],
Cell[36869, 1070, 422, 11, 70, "ExampleText",ExpressionUUID->"da43cfae-26c7-45ab-b5a8-64cd13062d7a",
 CellID->376653752],
Cell[CellGroupData[{
Cell[37316, 1085, 730, 22, 70, "Input",ExpressionUUID->"b8e560b0-5ee7-46ff-986c-77f663066168",
 CellID->1100337461],
Cell[38049, 1109, 1444, 41, 52, "Output",ExpressionUUID->"6beac1d1-86b4-42b2-a08d-bc0d88e561af",
 CellID->1106237926],
Cell[39496, 1152, 1444, 41, 52, "Output",ExpressionUUID->"6aa7361e-4a86-4ada-ab8b-3de693168f73",
 CellID->1774890203],
Cell[40943, 1195, 127, 2, 37, "Output",ExpressionUUID->"3d0fd22d-e1a8-4817-9939-43ef240ca6aa",
 CellID->2031784991]
}, Open  ]],
Cell[CellGroupData[{
Cell[41107, 1202, 871, 26, 70, "Input",ExpressionUUID->"f4bac1ae-dcac-4fd1-9421-86d08672cdbe",
 CellID->1391490451],
Cell[41981, 1230, 4325, 119, 52, "Output",ExpressionUUID->"d29a46bf-3843-4609-8720-2b924eb401db",
 CellID->1440057658],
Cell[46309, 1351, 4324, 119, 52, "Output",ExpressionUUID->"5c1ae694-96a8-4a8a-84ce-05fd3bdea7b1",
 CellID->908356316],
Cell[50636, 1472, 126, 2, 37, "Output",ExpressionUUID->"6f2fb56d-8f67-4cfb-b1f8-b606657be134",
 CellID->283356489]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[50811, 1480, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"bd94aa2c-2585-4944-b0bc-f60cbcf8b6f5",
 CellID->1893551625],
Cell[51057, 1487, 193, 4, 70, "ExampleText",ExpressionUUID->"284f2e77-8cfb-496b-b8b1-736b5b941864",
 CellID->1781572424],
Cell[CellGroupData[{
Cell[51275, 1495, 448, 13, 70, "Input",ExpressionUUID->"583dcfd0-4cf8-46b6-8cbe-94a3e01d9163",
 CellID->907561411],
Cell[51726, 1510, 1987, 58, 52, "Output",ExpressionUUID->"952ef820-9df5-4752-9e33-17b50871baa0",
 CellID->2050996554]
}, Open  ]],
Cell[CellGroupData[{
Cell[53750, 1573, 374, 10, 70, "Input",ExpressionUUID->"46924dc0-913b-40f5-b5cd-df985efa14c8",
 CellID->1556697824],
Cell[54127, 1585, 1714, 37, 131, "Output",ExpressionUUID->"9d9cfa2b-19f4-44fa-9945-9bcb2b742814",
 CellID->35345324]
}, Open  ]],
Cell[CellGroupData[{
Cell[55878, 1627, 189, 4, 70, "Input",ExpressionUUID->"b2a0b1b0-c7e3-44dc-8231-b876c785a591",
 CellID->1323430295],
Cell[56070, 1633, 5856, 170, 84, "Output",ExpressionUUID->"c214430b-5ba0-4d1e-bd74-63231efbea02",
 CellID->1194710755]
}, Open  ]],
Cell[61941, 1806, 151, 1, 70, "ExampleText",ExpressionUUID->"0e0f5ac2-9b70-4103-b701-63939a8dcb99",
 CellID->796325451],
Cell[CellGroupData[{
Cell[62117, 1811, 497, 14, 70, "Input",ExpressionUUID->"abe1d9c9-0aa5-4e31-a4b2-f82660b96e38",
 CellID->1688856124],
Cell[62617, 1827, 1302, 33, 131, "Output",ExpressionUUID->"14f6bc77-fa82-4a71-9d6c-2193c3f1e043",
 CellID->1902338378]
}, Open  ]],
Cell[CellGroupData[{
Cell[63956, 1865, 182, 4, 70, "Input",ExpressionUUID->"4a0cfe0c-14fc-46cd-b599-f70dc62d5171",
 CellID->97902928],
Cell[64141, 1871, 5268, 153, 84, "Output",ExpressionUUID->"412535fa-9b04-4a1e-92d7-e83967c30d73",
 CellID->1847803460]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[69458, 2030, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"c5d5c2aa-530a-42aa-8e24-c242c882ad43",
 CellID->1616593910],
Cell[CellGroupData[{
Cell[69726, 2039, 581, 17, 70, "Input",ExpressionUUID->"a9a43fc4-d44f-4f85-8721-857e10ee0185",
 CellID->423687378],
Cell[70310, 2058, 1341, 33, 131, "Output",ExpressionUUID->"4092e53a-74d2-4e79-b8be-e6c22cc45e29",
 CellID->151303477]
}, Open  ]],
Cell[CellGroupData[{
Cell[71688, 2096, 652, 19, 70, "Input",ExpressionUUID->"fa23c664-5d68-4e25-80d2-cdacb9156739",
 CellID->446009393],
Cell[72343, 2117, 2212, 54, 131, "Output",ExpressionUUID->"a24b4614-53da-4a96-976d-4d77389376ed",
 CellID->1138237674]
}, Open  ]],
Cell[CellGroupData[{
Cell[74592, 2176, 245, 7, 70, "Input",ExpressionUUID->"8a007ce5-4573-43b3-83ca-0d657091182b",
 CellID->2072193516],
Cell[74840, 2185, 127, 2, 37, "Output",ExpressionUUID->"c3d6d3b5-36d5-45fb-aae5-de71c4cdd95c",
 CellID->2010099382]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, Closed]]]],
Cell[CellGroupData[{
Cell[75128, 2196, 1394, 36, 70, "ExampleSection",ExpressionUUID->"c6a1ee95-4584-46fe-8ad7-afbb17347d6f",
 CellID->1293636265],
Cell[CellGroupData[{
Cell[76547, 2236, 1404, 36, 70, "ExampleSubsection",ExpressionUUID->"7043ef27-640d-4de7-b716-4c76bfd09208",
 CellID->1965812958],
Cell[77954, 2274, 1921, 60, 70, "ExampleText",ExpressionUUID->"0c7aa4f3-37dd-4e0e-bd2e-59186a7adb07",
 CellID->227879916],
Cell[79878, 2336, 209, 5, 70, "Input",ExpressionUUID->"71fb8275-6431-42f8-9f10-5c98244a4ac5",
 CellID->1801264145],
Cell[80090, 2343, 136, 1, 70, "ExampleText",ExpressionUUID->"db782b97-aa82-4e66-be39-ffc32793b9ad",
 CellID->1033495556],
Cell[CellGroupData[{
Cell[80251, 2348, 550, 17, 70, "Input",ExpressionUUID->"f44cb84c-1617-45fd-859e-accf2ebd223c",
 CellID->1096870451],
Cell[80804, 2367, 647, 21, 53, "Output",ExpressionUUID->"531e1762-93b2-47d0-b01f-23addc0c5238",
 CellID->949903367]
}, Open  ]],
Cell[81466, 2391, 151, 1, 70, "ExampleText",ExpressionUUID->"76a7ca47-1fd7-419c-a51d-f57fe562138a",
 CellID->1955102746],
Cell[CellGroupData[{
Cell[81642, 2396, 337, 9, 70, "Input",ExpressionUUID->"c86952bf-725b-4ec0-9a9f-b5365bfb06f9",
 CellID->2059470547],
Cell[81982, 2407, 1397, 43, 92, "Output",ExpressionUUID->"5fc9826e-6800-475c-86e9-87b76fee004d",
 CellID->2072692787]
}, Open  ]],
Cell[83394, 2453, 196, 4, 70, "ExampleText",ExpressionUUID->"789492ba-4f63-4904-8043-eee75f8aa180",
 CellID->1600123813],
Cell[CellGroupData[{
Cell[83615, 2461, 445, 12, 70, "Input",ExpressionUUID->"61eb7453-9767-442e-b8e4-fd7b76180024",
 CellID->8884588],
Cell[84063, 2475, 1287, 32, 95, "Output",ExpressionUUID->"ca780df1-2e18-424a-9ac3-807c6c4dea0d",
 CellID->1315485681]
}, Open  ]],
Cell[85365, 2510, 207, 4, 70, "ExampleText",ExpressionUUID->"bf3616c6-abdb-4186-be16-48d519cda364",
 CellID->777355164],
Cell[CellGroupData[{
Cell[85597, 2518, 186, 4, 70, "Input",ExpressionUUID->"7e24ce5d-ecc7-4235-9aea-c752d184cfad",
 CellID->1865987295],
Cell[85786, 2524, 3236, 109, 80, "Output",ExpressionUUID->"2ab8fb34-384c-4b55-afa9-eb2ff584e800",
 CellID->1192579250]
}, Open  ]],
Cell[89037, 2636, 148, 1, 70, "ExampleText",ExpressionUUID->"c2eca4a6-5908-4d48-9fdb-eada5eb2ce3e",
 CellID->1490385628],
Cell[CellGroupData[{
Cell[89210, 2641, 252, 6, 70, "Input",ExpressionUUID->"9999c13b-9a3d-4b6e-877f-7602761e86eb",
 CellID->984160605],
Cell[89465, 2649, 3454, 79, 95, "Output",ExpressionUUID->"18319375-e178-42a4-a64c-59f8102774a1",
 CellID->1382457793]
}, Open  ]],
Cell[CellGroupData[{
Cell[92956, 2733, 282, 7, 70, "Input",ExpressionUUID->"8e470220-2270-4db5-bc2f-98b5d8369bf7",
 CellID->298820583],
Cell[93241, 2742, 126, 2, 37, "Output",ExpressionUUID->"77907b74-e770-405e-aa78-e1b9f0e7cc61",
 CellID->653716580]
}, Open  ]],
Cell[CellGroupData[{
Cell[93404, 2749, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"fdb16c1f-65f0-41d4-bd3a-8efdae87f25a",
 CellID->1705608657],
Cell[93650, 2756, 1101, 33, 70, "ExampleText",ExpressionUUID->"2d7e6b91-089e-46bf-872e-62fb7e3771f7",
 CellID->181077262],
Cell[CellGroupData[{
Cell[94776, 2793, 365, 10, 70, "Input",ExpressionUUID->"f6d84b02-f8d0-46e1-9c31-c4e075ddbf10",
 CellID->1563352008],
Cell[95144, 2805, 3222, 109, 80, "Output",ExpressionUUID->"2f34d452-7a9f-4a68-a4c0-b79862f97c74",
 CellID->60304100]
}, Open  ]],
Cell[98381, 2917, 125, 1, 70, "ExampleText",ExpressionUUID->"4868bc9a-b530-45cd-ba8f-03165a086a0c",
 CellID->1652630181],
Cell[CellGroupData[{
Cell[98531, 2922, 223, 5, 70, "Input",ExpressionUUID->"1a99cb39-aa0b-4cff-aebb-6a6dda19de11",
 CellID->63469277],
Cell[98757, 2929, 3037, 106, 80, "Output",ExpressionUUID->"03d0be60-e7f0-45c4-871a-22212d8d8469",
 CellID->705437001]
}, Open  ]],
Cell[101809, 3038, 238, 6, 70, "ExampleText",ExpressionUUID->"496b1728-af9e-4ac7-b616-8e54245465fa",
 CellID->1753917898],
Cell[CellGroupData[{
Cell[102072, 3048, 350, 10, 70, "Input",ExpressionUUID->"5f5ee38e-11a3-414b-a7d1-fe8b6bec43a2",
 CellID->1043909238],
Cell[102425, 3060, 126, 2, 37, "Output",ExpressionUUID->"2016f074-e560-47c5-9f4f-fea5b612c856",
 CellID->991594647]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[102600, 3068, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"31ae6430-8c7b-44cd-8300-670c45ce1b5f",
 CellID->1600539001],
Cell[102846, 3075, 571, 17, 70, "ExampleText",ExpressionUUID->"79199969-d11b-4cb4-a2e6-7269e9019f29",
 CellID->595717937],
Cell[CellGroupData[{
Cell[103442, 3096, 377, 10, 70, "Input",ExpressionUUID->"500055e9-8455-419c-9fdf-7e03c8b7ed13",
 CellID->1811053528],
Cell[103822, 3108, 1298, 43, 53, "Output",ExpressionUUID->"e137060a-26dc-4c2b-985b-95472b2d14d9",
 CellID->786916481]
}, Open  ]],
Cell[CellGroupData[{
Cell[105157, 3156, 220, 5, 70, "Input",ExpressionUUID->"6e0e1754-9344-49b1-8f8a-89c82edae3b9",
 CellID->1793861229],
Cell[105380, 3163, 1381, 34, 131, "Output",ExpressionUUID->"d2abe505-5c39-4885-87e4-06dc5207fe42",
 CellID->1409770937]
}, Open  ]],
Cell[106776, 3200, 385, 8, 70, "ExampleText",ExpressionUUID->"caa8d7d5-c50e-46f8-aeb9-d2402a1df659",
 CellID->1051097161],
Cell[CellGroupData[{
Cell[107186, 3212, 254, 6, 70, "Input",ExpressionUUID->"d1091702-79cb-4981-ba49-cb4d7dba0090",
 CellID->1765521323],
Cell[107443, 3220, 3747, 86, 131, "Output",ExpressionUUID->"5b248ced-6206-4b5d-99dd-fbef79ab0d34",
 CellID->1901953158]
}, Open  ]],
Cell[CellGroupData[{
Cell[111227, 3311, 211, 5, 70, "Input",ExpressionUUID->"b1b686f0-ef19-4317-8b2d-973c6b14e8e5",
 CellID->1192347325],
Cell[111441, 3318, 127, 2, 37, "Output",ExpressionUUID->"4503948f-d1e2-41e2-b828-c6687781058e",
 CellID->1161215625]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "0"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, Closed]]]],
Cell[CellGroupData[{
Cell[111844, 3332, 1417, 36, 70, "ExampleSection",ExpressionUUID->"2a2b669f-040e-49c3-9f03-3731259755c8",
 CellID->1020263627],
Cell[113264, 3370, 207, 5, 70, "Input",ExpressionUUID->"d99a708d-487c-469f-b6d1-781a1847c020",
 CellID->54597739],
Cell[113474, 3377, 257, 4, 70, "ExampleText",ExpressionUUID->"ce1bb20e-d226-4061-b0c9-827052c6e4a2",
 CellID->1658935743],
Cell[CellGroupData[{
Cell[113756, 3385, 323, 8, 70, "Input",ExpressionUUID->"07b011eb-009c-4d3c-8d88-f0caf64477f4",
 CellID->450269680],
Cell[114082, 3395, 204, 4, 38, "Output",ExpressionUUID->"cd426c48-ea70-4003-9c22-835c33031d9b",
 CellID->1945262974]
}, Open  ]],
Cell[CellGroupData[{
Cell[114323, 3404, 244, 6, 70, "Input",ExpressionUUID->"5fe293ac-8bc2-45a2-b34d-2d32a7052650",
 CellID->113446564],
Cell[114570, 3412, 828, 27, 40, "Output",ExpressionUUID->"3eff8079-27f3-4cb1-bf2d-6dd00fb69efd",
 CellID->703423404]
}, Open  ]],
Cell[CellGroupData[{
Cell[115435, 3444, 355, 10, 70, "Input",ExpressionUUID->"20541f68-d4d5-403a-9b7c-b35230ba90d8",
 CellID->1884776724],
Cell[115793, 3456, 704, 24, 50, "Output",ExpressionUUID->"342e0cb8-ed9d-4aad-bcc6-cc83331739cf",
 CellID->1460598599]
}, Open  ]],
Cell[CellGroupData[{
Cell[116534, 3485, 589, 16, 70, "Input",ExpressionUUID->"a9538de2-cc5f-4e43-a03c-e888e971dcf6",
 CellID->1389124015],
Cell[117126, 3503, 1307, 32, 95, "Output",ExpressionUUID->"66f9610a-d767-443e-b09d-afe033713700",
 CellID->1196824310]
}, Open  ]],
Cell[CellGroupData[{
Cell[118470, 3540, 642, 17, 70, "Input",ExpressionUUID->"65b1bae5-0660-4eef-b5a3-603d47994957",
 CellID->125637926],
Cell[119115, 3559, 1239, 31, 95, "Output",ExpressionUUID->"38db03ae-3d65-4a73-b259-57de230f1b8d",
 CellID->204608301]
}, Open  ]],
Cell[CellGroupData[{
Cell[120391, 3595, 250, 6, 70, "Input",ExpressionUUID->"9dd3297d-b0d9-4eb7-b005-025ea5b87a1c",
 CellID->1909614846],
Cell[120644, 3603, 126, 2, 37, "Output",ExpressionUUID->"78997aea-e1e7-4ffa-bef7-bd9d551d352e",
 CellID->591347377]
}, Open  ]],
Cell[120785, 3608, 175, 3, 70, "ExampleText",ExpressionUUID->"15d62ffe-8c12-4b2b-b186-afd2fe6eadb1",
 CellID->511713125],
Cell[CellGroupData[{
Cell[120985, 3615, 268, 7, 70, "Input",ExpressionUUID->"30d874de-864b-4b1c-9e38-02f2d12a42e8",
 CellID->375479679],
Cell[121256, 3624, 395, 8, 70, "Message",ExpressionUUID->"0d3fcfd8-61f2-4aad-bea3-fbd92c9769b3",
 CellID->1711561862],
Cell[121654, 3634, 703, 24, 50, "Output",ExpressionUUID->"23130fc9-c338-4b5e-b995-11a935bec834",
 CellID->676763069]
}, Open  ]],
Cell[CellGroupData[{
Cell[122394, 3663, 242, 5, 70, "ExampleDelimiter",ExpressionUUID->"b102b10c-2e0c-4f52-af7d-4f35c16a731a",
 CellID->174573991],
Cell[122639, 3670, 374, 9, 70, "ExampleText",ExpressionUUID->"14c34e30-a4de-4b49-ac74-cd06839bb1cd",
 CellID->1484041902],
Cell[CellGroupData[{
Cell[123038, 3683, 408, 12, 70, "Input",ExpressionUUID->"dc19ad6b-fe7c-4749-b923-c11da779a41e",
 CellID->1674411155],
Cell[123449, 3697, 1062, 36, 50, "Output",ExpressionUUID->"bedc6edc-b9ae-4313-907e-ef73e2ae51c3",
 CellID->443435683]
}, Open  ]],
Cell[CellGroupData[{
Cell[124548, 3738, 184, 4, 70, "Input",ExpressionUUID->"dacf46e0-996f-4937-91d7-16d92e1787ca",
 CellID->1750426850],
Cell[124735, 3744, 2184, 71, 52, "Output",ExpressionUUID->"72174386-4c90-4bde-aadb-81362ab56b20",
 CellID->1722042249]
}, Open  ]],
Cell[CellGroupData[{
Cell[126956, 3820, 253, 7, 70, "Input",ExpressionUUID->"97d44f6c-079f-45b1-a0a3-67e5bde7554e",
 CellID->295000539],
Cell[127212, 3829, 884, 26, 110, "Output",ExpressionUUID->"14af4840-9201-43e3-8e09-88498daea2c6",
 CellID->1517774493]
}, Open  ]],
Cell[128111, 3858, 175, 3, 70, "ExampleText",ExpressionUUID->"e8e32497-7873-4774-8f47-101658e21881",
 CellID->2142135012],
Cell[CellGroupData[{
Cell[128311, 3865, 495, 15, 70, "Input",ExpressionUUID->"73da201d-7fa1-4349-aff3-8e4546d704a8",
 CellID->1434563406],
Cell[128809, 3882, 1028, 34, 50, "Output",ExpressionUUID->"6f830c2a-e71f-44e4-bea0-49b3b5f3e658",
 CellID->2073151260]
}, Open  ]],
Cell[CellGroupData[{
Cell[129874, 3921, 283, 7, 70, "Input",ExpressionUUID->"e3064ca8-e8d2-4efc-b849-3137a78ebf7c",
 CellID->1544994010],
Cell[130160, 3930, 127, 2, 37, "Output",ExpressionUUID->"4ef6455f-53e4-4858-b55d-66a9b790d696",
 CellID->1133351157]
}, Open  ]],
Cell[130302, 3935, 309, 5, 70, "ExampleText",ExpressionUUID->"65be8571-3cf9-4553-85a7-395894e269f2",
 CellID->382850454],
Cell[CellGroupData[{
Cell[130636, 3944, 644, 18, 70, "Input",ExpressionUUID->"1793343c-9063-4915-a491-af9497437511",
 CellID->1698297027],
Cell[131283, 3964, 1489, 35, 167, "Output",ExpressionUUID->"b66b1d92-34e5-46d7-bc9e-b5f4f11e6dda",
 CellID->2003225124]
}, Open  ]],
Cell[132787, 4002, 244, 4, 70, "ExampleText",ExpressionUUID->"6e2d2745-0a7b-4b9e-bfbd-a37e9cfb24ba",
 CellID->42562061],
Cell[CellGroupData[{
Cell[133056, 4010, 1945, 54, 70, "Input",ExpressionUUID->"d7f533b5-da8d-4744-af3a-cc59bfb42591",
 CellID->385898355],
Cell[135004, 4066, 5436, 131, 261, "Output",ExpressionUUID->"7409877b-1b66-4444-821d-3340f79c04a2",
 CellID->1575998148]
}, Open  ]],
Cell[CellGroupData[{
Cell[140477, 4202, 495, 14, 70, "Input",ExpressionUUID->"f0f0bd4c-571c-4294-80bb-fccbbc5be354",
 CellID->286463219],
Cell[140975, 4218, 127, 2, 37, "Output",ExpressionUUID->"7e9fe3e1-61d6-4bd0-a111-0989d546c8ee",
 CellID->1023608827],
Cell[141105, 4222, 126, 2, 37, "Output",ExpressionUUID->"ec388e32-8ddb-4809-a1fe-5ec2b562bf9c",
 CellID->302059272],
Cell[141234, 4226, 125, 2, 37, "Output",ExpressionUUID->"20430fb1-418b-4dba-aa96-9973e42cac8e",
 CellID->58842996]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, Closed]]]],
Cell[141613, 4238, 2311, 62, 70, "SeeAlsoSection",ExpressionUUID->"6a002da3-0b6b-4121-a848-5db523053b0f"],
Cell[143927, 4302, 2508, 63, 70, "TutorialsSection",ExpressionUUID->"199063f9-ce1d-482f-a35c-2e9d8ea715a2"],
Cell[146438, 4367, 1057, 27, 70, "MoreAboutSection",ExpressionUUID->"d149b177-dbcf-4546-b8c8-f5ff93be2c16"],
Cell[147498, 4396, 2106, 59, 70, "RelatedLinksSection",ExpressionUUID->"05dbb909-1cc7-4269-b5b1-558fd881cd82"],
Cell[149607, 4457, 78, 0, 70, "FooterCell",ExpressionUUID->"9c97a216-861d-4f47-81b9-822b59f9f485"]
}
]
*)

(* End of internal cache information *)

