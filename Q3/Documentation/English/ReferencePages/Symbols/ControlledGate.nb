(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    172501,       4933]
NotebookOptionsPosition[    149836,       4469]
NotebookOutlinePosition[    152614,       4532]
CellTagsIndexPosition[    152527,       4527]
WindowTitle->ControlledGate
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[GridBox[{
   {GridBox[{
      {
       ItemBox[Cell[BoxData[
         RowBox[{
          TemplateBox[{12},
           "Spacer1"], Cell["Q3 SYMBOL", "PacletNameCell",
           TextAlignment->Center,ExpressionUUID->
           "5b6d61cf-40f8-4d17-9267-a4530d1ee02d"], 
          TemplateBox[{8},
           "Spacer1"]}]],
         TextAlignment->Center,ExpressionUUID->
         "9c05e069-19ab-4e4c-97c1-23690b7b1fbc"],
        Background->RGBColor[0.490196, 0.576471, 0.690196],
        ItemSize->Full], ""}
     },
     GridBoxAlignment->{"Rows" -> {{Center}}},
     GridBoxItemSize->{"Columns" -> {Full, 
         Scaled[0.02]}, "Rows" -> {{2.5}}}], Cell[TextData[{
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "See Also",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "73101b3e-47b1-490d-a06c-ea84b357ead8"]
         }],ExpressionUUID->"aa911278-c943-455c-b8c9-479d80d5189a"],
         StripOnInput->False],{
        "\"QuantumCircuit\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/QuantumCircuit"], "\"CNOT\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/CNOT"], "\"CZ\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/CZ"], "\"ControlledPower\"" :> 
         Documentation`HelpLookup["paclet:Q3/ref/ControlledPower"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"SeeAlso"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "a3df9b56-626f-4d20-90c4-191bad8dbbd5"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Related Guides",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "41788016-ed15-46e5-b9a5-01d9878542e8"]
         }],ExpressionUUID->"a7fe940f-6ddb-43f7-a925-7fb8cf238c92"],
         StripOnInput->False],{
        "\"Q3: Symbolic Quantum Simulation\"" :> 
         Documentation`HelpLookup["paclet:Q3/guide/Q3"], 
         "\"Quantum Information Systems\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/guide/QuantumInformationSystems"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"MoreAbout"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "12188b6d-538b-4c47-a44c-f2671acb5fc0"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "Tech Notes",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "bd0c1933-6d5f-407c-854d-e64d0a17a391"]
         }],ExpressionUUID->"427eeefe-5b27-4024-afbe-ec3a9a9807b1"],
         StripOnInput->False],{
        "\"Two-Qubit Gates\"" :> 
         Documentation`HelpLookup["paclet:Q3/tutorial/TwoQubitGates"], 
         "\"Quantum Computation: Overview\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuantumComputationOverview"], 
         "\"Multi-Control Unitary Gates\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/MultiControlUnitaryGates"], 
         "\"Quantum Information Systems with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuantumInformationSystems"], 
         "\"Quick Quantum Computing with Q3\"" :> 
         Documentation`HelpLookup[
          "paclet:Q3/tutorial/QuickQuantumComputingWithQ3"], 
         "\"Q3: Quick Start\"" :> 
         Documentation`HelpLookup["paclet:Q3/tutorial/Q3QuickStart"]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"Tutorials"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "c566cf2e-93dc-4f11-b671-8ad6b06f4930"],
     "\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\[ThickSpace]\
\[ThickSpace]",
     Cell[BoxData[
      TagBox[
       ActionMenuBox[
        FrameBox[Cell[TextData[{
          "URL",
          " ",
          Cell[BoxData[
           GraphicsBox[
            {GrayLevel[0.66667], Thickness[0.13], 
             LineBox[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]},
            AspectRatio->1,
            AxesStyle->Large,
            FrameStyle->Large,
            ImageSize->20,
            PlotRange->{{-3, 4}, {-1, 1}},
            PlotRangePadding->Scaled[0.025]]],ExpressionUUID->
           "9af13a4e-e9dd-47da-82a3-861c93829ea5"]
         }],ExpressionUUID->"9bf2a776-a424-4177-8bd2-6be6c203a9a4"],
         StripOnInput->False],{
        "\"Q3/ref/ControlledGate\"" :> None, 
         "\"Copy Wolfram Documentation Center URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{Cell["Q3/ref/ControlledGate"]}, Visible -> False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], Delimiter, 
         "\"Copy web URL\"" :> 
         Module[{DocumentationSearch`Private`nb$}, 
           DocumentationSearch`Private`nb$ = 
            NotebookPut[
             Notebook[{
               Cell[BoxData[
                 MakeBoxes[
                  Hyperlink[
                   "http://reference.wolfram.com/language/Q3/ref/\
ControlledGate.html"], StandardForm]], "Input", TextClipboardType -> 
                 "PlainText"]}, Visible -> False]]; 
           SelectionMove[DocumentationSearch`Private`nb$, All, Notebook]; 
           FrontEndTokenExecute[DocumentationSearch`Private`nb$, "Copy"]; 
           NotebookClose[DocumentationSearch`Private`nb$]; Null], 
         "\"Go to web URL\"" :> 
         FrontEndExecute[{
           NotebookLocate[{
             URL[If[TrueQ[DocumentationBuild`Make`Private`wsmlinkQ$24528], 
                 "http://reference.wolfram.com/system-modeler/", 
                 "http://reference.wolfram.com/language/"] <> 
               "Q3/ref/ControlledGate" <> ".html"], None}]}]},
        Appearance->None,
        MenuAppearance->Automatic,
        MenuStyle->"URLMenu"],
       MouseAppearanceTag["LinkHand"]]],
      LineSpacing->{1.4, 0},ExpressionUUID->
      "53450be5-bb53-4831-82a2-8b7603b6295d"]
    }], "AnchorBar",
     CacheGraphics->False,ExpressionUUID->
     "3e1bde1b-1ce9-4be1-a72c-266e0580289f"]}
  }]], "AnchorBarGrid",
 CellID->1,ExpressionUUID->"5e59286e-a665-45d5-a1b8-376c2466dba3"],

Cell["Q3`", "ContextNameCell",ExpressionUUID->"25306104-c9ca-49a7-903f-0267090c97cd"],

Cell[CellGroupData[{

Cell[BoxData[GridBox[{
   {Cell[TextData[{
     Cell[
     "ControlledGate", "ObjectName",ExpressionUUID->
      "c2a87a1f-b7f1-4fee-ad83-4a0221e3b618"],
     Cell[BoxData[
      TemplateBox[{8},
       "Spacer1"]],ExpressionUUID->"5d596b9c-375c-4ac8-9c26-4651aee377b9"],
     Cell[BoxData[
     ""], "ObjectNameTranslation",ExpressionUUID->
      "b5c2e997-cbbe-49b7-b110-4df83aab7e18"]
    }],ExpressionUUID->"454923a6-2690-4775-b6d6-ab0c00b9d350"], Cell[BoxData[
     StyleBox[
      GraphicsBox[InsetBox[
        StyleBox["\<\"UPDATED IN 13.2\"\>",
         StripOnInput->False,
         FontFamily->"Source Sans Pro",
         FontSize->17,
         FontWeight->"Bold",
         FontSlant->"Italic",
         FontColor->RGBColor[0.968627, 0.466667, 0]], {Right, Center}, {
        Right, Center}],
       AxesStyle->Large,
       FrameStyle->Large,
       ImageSize->{125, 24},
       PlotRangePadding->Scaled[0.025]], "NewInGraphic",
      StripOnInput->False]],
     Deployed->True,
     Magnification->1,ExpressionUUID->
     "b800b5e7-9d6c-4eca-93fb-5b0eeca17d83"]}
  }]], "ObjectNameGrid",
 CacheGraphics->False,ExpressionUUID->"596978f0-3b5d-4055-9503-14bbdf0c65a0"],

Cell[BoxData[GridBox[{
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["1", "TR"]], ",", 
          SubscriptBox[
           StyleBox["c", "TI"], 
           StyleBox["2", "TR"]], ",", "\[Ellipsis]"}], "}"}], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "ed6091f2-789e-4e16-80b4-b4a6f3552fde"],
     "\[LineSeparator]represents a multi-control multi-target unitary gate \
with control qubits ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["2", "TR"]], ",", "\[Ellipsis]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "6cadba9d-edc5-4276-aee3-5fa04bf64cdf"],
     " and unitary operator ",
     Cell[BoxData[
      StyleBox["op", "TI"]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "8ee3f6d6-8a73-48bf-8179-b53e054040de"],
     " acting on the target qubits."
    }],ExpressionUUID->"cabc800e-3d95-4f1d-a7d1-fc8efb01666a"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        StyleBox["c", "TI"], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "53adea69-f801-455e-abb8-16b32131ca7e"],
     "\[LineSeparator]is equivalent to ",
     Cell[BoxData[
      RowBox[{"ControlledGate", "[", 
       RowBox[{
        RowBox[{"{", 
         StyleBox["c", "TI"], "}"}], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "d357255c-2eeb-4377-931f-5f217e25facd"],
     "."
    }],ExpressionUUID->"d068bcf0-f751-488a-a82a-0888228cf349"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], ",", 
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
         RowBox[{"{", 
          RowBox[{
           SubscriptBox[
            StyleBox["v", "TI"], 
            StyleBox["1", "TR"]], ",", 
           SubscriptBox[
            StyleBox["v", "TI"], 
            StyleBox["2", "TR"]], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}]}], ",", 
        StyleBox["op", "TI"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "b09b6a3f-d688-49b1-99a3-91ea7e1b46a5"],
     "\[LineSeparator]represents a variation of the controlled-unitary gate, \
where operator op operates when the control qubits ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["c", "TI"], 
        StyleBox["2", "TR"]], ",", 
       StyleBox["\[Ellipsis]", "TR"]}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "2310f164-a81a-4784-a6ab-2709653326a2"],
     " take the logical values ",
     Cell[BoxData[
      RowBox[{
       SubscriptBox[
        StyleBox["v", "TI"], 
        StyleBox["1", "TR"]], ",", 
       SubscriptBox[
        StyleBox["v", "TI"], 
        StyleBox["2", "TR"]], ",", 
       StyleBox["\[Ellipsis]", "TR"]}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "a6ffb301-0e2e-46e1-b197-503b6fa2af86"],
     ", respectively."
    }],ExpressionUUID->"b4039790-5f4e-4045-bf9a-bbc329af858b"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         StyleBox["c", "TI"], "\[Rule]", 
         StyleBox["v", "TI"]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "d86cd33e-8306-4bf7-b19d-c997d3553c3d"],
     "\[LineSeparator]is automatically converted to ",
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          StyleBox["c", "TI"], "}"}], "\[Rule]", 
         RowBox[{"{", 
          StyleBox["v", "TI"], "}"}]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "9aec9511-350c-4a88-b422-e563486f8f23"],
     "."
    }],ExpressionUUID->"9d63d54a-ffc2-4db6-ba56-bfd146347b57"]},
   {"", Cell[TextData[{
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], ",", 
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
         StyleBox["v", "TI"]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "9aab7ad2-9658-407d-b45f-4c5b991dbe5b"],
     "\[LineSeparator]is automatically converted to ",
     Cell[BoxData[
      RowBox[{
       TemplateBox[{
         Cell[
          TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
         "Q3 Package Symbol"},
        "PackageLink",
        BaseStyle->"InlineFormula"], "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["1", "TR"]], ",", 
           SubscriptBox[
            StyleBox["c", "TI"], 
            StyleBox["2", "TR"]], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
         RowBox[{"{", 
          RowBox[{
           StyleBox["v", "TI"], ",", 
           StyleBox["v", "TI"], ",", 
           StyleBox["\[Ellipsis]", "TR"]}], "}"}]}], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "]"}]], "InlineFormula",
      FontFamily->"Source Sans Pro",ExpressionUUID->
      "34c56e45-5606-4801-b488-dee38d51c466"],
     "."
    }],ExpressionUUID->"d259ee28-3769-4a1c-85e5-cb81eb6d904f"]}
  }]], "Usage",ExpressionUUID->"d5ff7cc3-66ef-4e35-94b3-54814ac31901"]
}, Open  ]],

Cell[CellGroupData[{

Cell[TextData[Cell[BoxData[
 ButtonBox[Cell[TextData[{
   Cell[BoxData[
    DynamicBox[ToBoxes[
      If[
       MatchQ[
        CurrentValue[
         EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, 
         Closed], 
        Alternatives[Open, True]], 
       Style[
        Graphics[{
          Thickness[0.18], 
          RGBColor[0.8509803921568627, 0.396078431372549, 0], 
          Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
         PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
        0.68 Inherited], 
       Rotate[
        Style[
         Graphics[{
           Thickness[0.18], 
           RGBColor[0.8509803921568627, 0.396078431372549, 0], 
           Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
          PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
         0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
     ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
    ExpressionUUID->"335985b2-937b-4d45-9346-486f12b2ac01"],
   Cell[BoxData[
    TemplateBox[{1},
     "Spacer1"]],ExpressionUUID->"fe4d92f3-5c54-4ebc-8c67-1f5437fed210"],
   "Details and Options"
  }], "NotesFrameText",ExpressionUUID->"5fd81568-bc57-4d8a-ac22-0c3686841b5e"],
  Appearance->{Automatic, None, "Normal", Automatic},
  BaseStyle->None,
  ButtonFunction:>(FrontEndExecute[{
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], All, ButtonCell], 
     FrontEndToken["OpenCloseGroup"], 
     FrontEnd`SelectionMove[
      FrontEnd`SelectedNotebook[], After, CellContents]}]& ),
  Evaluator->None,
  Method->
   "Preemptive"]],ExpressionUUID->"f13bda63-9b21-4724-add7-762b0c7f2ca3"]], \
"NotesSection",
 WholeCellGroupOpener->True,
 CellGroupingRules->{"SectionGrouping", 50},
 CacheGraphics->False,
 CellID->1243322648,ExpressionUUID->"33231b0a-daab-45e0-8efd-57aca423a42e"],

Cell[TextData[{
 "If ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "c98b9a46-feb6-4ba7-a8a8-ab3b872f97b7"],
 " is an operator of the form ",
 Cell[BoxData[
  RowBox[{"T", "[", 
   RowBox[{
    StyleBox["j", "TI"], ",", "\[Ellipsis]", ",", 
    StyleBox["k", "TI"]}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "05aae188-4af2-4990-a81d-c0b9e229e77e"],
 ", it is regarded to act on qubit ",
 Cell[BoxData[
  RowBox[{"T", "[", 
   RowBox[{
    StyleBox["j", "TI"], ",", "\[Ellipsis]", ",", 
    TemplateBox[{
      Cell[
       TextData["$"]], "paclet:ref/$"},
     "RefLink",
     BaseStyle->{"InlineFormula"}]}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "10b48ff7-db96-422b-8dcd-4c1bff11568c"],
 "."
}], "Notes",
 CellID->1702748548,ExpressionUUID->"6670571f-a860-473b-8687-f6f46ba1239e"],

Cell[TextData[{
 "Otherwise, ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "3a9f4e08-33fc-4faf-ab14-88e14b91ce7b"],
 " acts on the qubits involved in ",
 Cell[BoxData[
  StyleBox["op", "TI"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "a6b56d2a-22a7-4c38-b63b-3af38b9985c8"],
 "."
}], "Notes",
 CellID->491054349,ExpressionUUID->"b5b55ba7-a0fb-44e0-bb13-0b0996739ed8"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Elaborate"]], "paclet:Q3/ref/Elaborate", "Q3 Package Symbol"},
    
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", 
   RowBox[{"ControlledGate", "[", "\[Ellipsis]", "]"}], "]"}]], 
  "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "daa599c0-117e-4c49-95ee-304c285389f3"],
 " expands ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
     "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", "\[Ellipsis]", "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "828489bb-87fb-4442-b78a-4722537ee079"],
 " explicitly in terms of the Pauli operators."
}], "Notes",
 CellID->2019652723,ExpressionUUID->"c557efd5-d85f-4cc4-b770-219c017d4918"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Matrix"]], "paclet:Q3/ref/Matrix", "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", 
   RowBox[{"ControlledGate", "[", "\[Ellipsis]", "]"}], "]"}]], 
  "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "fdca150e-98f1-4441-b8af-786d8da3f8fa"],
 " gives the matrix representation of ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
     "Q3 Package Symbol"},
    "PackageLink",
    BaseStyle->"InlineFormula"], "[", "\[Ellipsis]", "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "04494634-1771-437a-b381-cc82717d4175"],
 "."
}], "Notes",
 CellID->384437925,ExpressionUUID->"50ad500f-0874-4a12-9f31-91f2c18b8ae0"],

Cell[TextData[{
 "[EXPERIMENTAL] ",
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Expand"]], "paclet:ref/Expand"},
    "RefLink",
    BaseStyle->{"InlineFormula"}], "[", 
   RowBox[{"ControlledGate", "[", 
    StyleBox["\[Ellipsis]", "TR"], "]"}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "d81cda39-ef0e-46b7-b738-97e7348d0bef"],
 " decomposes the controlled-unitary gate as a product of single-qubit \
rotations and ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "e516f1a5-2755-4871-a296-f1e0a4805be5"],
 " gates."
}], "Notes",
 CellID->1895961038,ExpressionUUID->"2682e52e-904d-4522-a9cf-bc88e79d7a8b"]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "PrimaryExamplesSection"}, Open], 
      Alternatives[True, Open]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "37103f91-593b-4303-bcb7-f1de3a9176e9"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"fc3732e9-9dbc-400e-a02a-315198e27e84"],
 "Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(9)", "ExampleCount",ExpressionUUID->
  "13341049-879c-4806-96ae-7686ddf4c8c9"]
}], "PrimaryExamplesSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellTags->"PrimaryExamplesSection",
 CellID->1507859626,ExpressionUUID->"ee3c3ab9-9571-4e62-a3bb-cf036349366d"],

Cell[BoxData[
 RowBox[{"Needs", "[", "\"\<Q3`\>\"", "]"}]], "Input", "ExampleInitialization",
 CellLabel->"In[1]:=",
 CellID->851865642,ExpressionUUID->"c8cb564b-093f-410b-879f-6a85825f367e"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {5., 9.}}]],ExpressionUUID->
  "9b47e83f-be48-4299-b387-52545dc0c513"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"736c6b99-0be6-435d-9ecc-b227a852bd93"],
 "Basic Examples",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(4)", "ExampleCount",ExpressionUUID->
  "db4d7764-4707-462f-bf21-e3ea463b8078"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->142215935,ExpressionUUID->"4c8b2689-2cde-4485-8d22-8ed8d12874f7"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1403695601,ExpressionUUID->"baec094e-fa94-458f-9046-ee0c3e6ee972"],

Cell["\<\
This is a controlled-U operator. Usually it remains unevaluated.\
\>", "ExampleText",
 CellID->493202586,ExpressionUUID->"9524945c-8d35-41be-8523-2f18acd83b35"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1804103712,ExpressionUUID->"4354d585-bd81-45a3-b780-b1a61094b1d1"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"1"},
        "RowDefault"]],
      $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
    RowBox[{"{", "1", "}"}]}], ",", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"X\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]]}], "]"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->1356550298,ExpressionUUID->"2e5d245e-a8a0-417c-982b-240e16f9ee48"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "[", "op", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1699357571,ExpressionUUID->"5ba2af87-c4be-4b41-a5fd-b3b44b3ef910"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]]}], "+", 
  FractionBox[
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"1"}, "RowDefault"], 
      TemplateBox[{"\"Z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]], "2"], "+", 
  FractionBox[
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"X\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], "2"]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1451945702,ExpressionUUID->"269365fc-634c-4f33-b8c9-fffde981ac11"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Matrix", "[", "op", "]"}], "//", "MatrixForm"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->388513540,ExpressionUUID->"b6408331-aaa1-473a-bccf-fc54a169fc74"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", "0"},
     {"0", "1", "0", "0"},
     {"0", "0", "0", "1"},
     {"0", "0", "1", "0"}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {4, 4}, 0, {
     1, {{0, 2, 4, 6, 8}, {{1}, {2}, {2}, {1}, {3}, {4}, {4}, {3}}}, {1, 0, 1,
       0, 0, 1, 0, 1}}]]]]], "Output",
 CellLabel->"Out[4]//MatrixForm=",
 CellID->1131751160,ExpressionUUID->"8b8acd20-b52d-4c9c-ad3d-91c3973f732f"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "**", 
  RowBox[{"S", "[", 
   RowBox[{"2", ",", "3"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->227378000,ExpressionUUID->"0abb59b9-83fe-458c-8b32-b579e5a49f9e"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"Y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 2]]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]]}], "-", 
  FractionBox[
   RowBox[{"\[ImaginaryI]", " ", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"2"}, "RowDefault"], 
       TemplateBox[{"\"Y\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[2, 2]]}], "2"], "+", 
  FractionBox[
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"Z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]], "2"]}]], "Output",
 CellLabel->"Out[5]=",
 CellID->2042724914,ExpressionUUID->"19a9771c-9565-4e96-aa2c-c56a076bc446"]
}, Open  ]],

Cell[TextData[{
 Cell[BoxData["ControlledGate"], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "a2935b62-0c3a-4394-9fb6-0c6d7abe5bc7"],
 " can be evaluated explicitly by means of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Elaborate"]], "paclet:Q3/ref/Elaborate", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "93377911-6925-4359-b76e-7afcc8f6f60b"],
 "."
}], "ExampleText",
 CellID->976135211,ExpressionUUID->"4d12dc5f-6f09-4488-9d46-16551fee856b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}], "//", "Elaborate"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->1713072528,ExpressionUUID->"1fd9e696-7166-4688-86e9-4504b2175f03"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]]}], "+", 
  FractionBox[
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"1"}, "RowDefault"], 
      TemplateBox[{"\"Z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]], "2"], "+", 
  FractionBox[
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"X\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], "2"]}]], "Output",
 CellLabel->"Out[6]=",
 CellID->414684898,ExpressionUUID->"939f1551-fa82-41ac-ba75-1ab78ad9d0c0"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "4e19097e-8654-44c7-a522-4a8c7067f5c2"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1117862758,ExpressionUUID->"cd828da9-3fdc-4262-8d12-ecd6569ef8c5"],

Cell["\<\
In the quantum circuit model, a controlled-U gate is depicted by the \
following quantum circuit element.\
\>", "ExampleText",
 CellID->66695600,ExpressionUUID->"ca28bcd1-bf07-4451-9475-4dafb4cb4161"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"QuantumCircuit", "[", "op", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->287461810,ExpressionUUID->"c0c8bbd8-760d-45cd-bd92-82204740f18d"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$]} -> {1}, 
    $CellContext`S[2, 1]]]]], "Output",
 CellLabel->"Out[1]=",
 CellID->1705404803,ExpressionUUID->"856b9735-6178-4430-bcef-226df28fa2cd"]
}, Open  ]],

Cell[TextData[{
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "d1068799-8183-429f-8c97-8ddb6249fee9"],
 " is a special case of controlled-U gate."
}], "ExampleText",
 CellID->376653752,ExpressionUUID->"da43cfae-26c7-45ab-b5a8-64cd13062d7a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"x1", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", 
       RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{"x2", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"CNOT", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", "2", "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"x1", "-", "x2"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1100337461,ExpressionUUID->"b8e560b0-5ee7-46ff-986c-77f663066168"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], " ", 
  RowBox[{"(", 
   RowBox[{"1", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"1"}, "RowDefault"], 
       TemplateBox[{"\"Z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"2"}, "RowDefault"], 
       TemplateBox[{"\"X\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[2, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->374511778,ExpressionUUID->"f7770e23-fd12-4ab3-98ce-38d4c9e15c4e"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "2"], " ", 
  RowBox[{"(", 
   RowBox[{"1", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"1"}, "RowDefault"], 
       TemplateBox[{"\"Z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"2"}, "RowDefault"], 
       TemplateBox[{"\"X\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[2, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->144883489,ExpressionUUID->"2b1321d1-5dc2-48cf-82d7-30c2c9e7e532"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[2]=",
 CellID->1957827572,ExpressionUUID->"8dbe3f9b-b014-4aa2-9ee3-fe25edfe67b2"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"x1", "=", 
  RowBox[{
   RowBox[{"Elaborate", "@", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        RowBox[{"S", "[", "1", "]"}], ",", 
        RowBox[{"S", "[", "2", "]"}]}], "}"}], ",", 
      RowBox[{"S", "[", 
       RowBox[{"3", ",", "1"}], "]"}]}], "]"}]}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{"x2", "=", 
  RowBox[{
   RowBox[{"Elaborate", "[", 
    RowBox[{"Toffoli", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", 
      RowBox[{"S", "[", "2", "]"}], ",", 
      RowBox[{"S", "[", "3", "]"}]}], "]"}], "]"}], "//", 
   "Simplify"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"x1", "-", "x2"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1391490451,ExpressionUUID->"f4bac1ae-dcac-4fd1-9421-86d08672cdbe"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "4"], " ", 
  RowBox[{"(", 
   RowBox[{"3", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[3, 1]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"1"}, "RowDefault"], 
       TemplateBox[{"\"Z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"2"}, "RowDefault"], 
       TemplateBox[{"\"Z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[2, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"3"}, "RowDefault"], 
       TemplateBox[{"\"X\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[3, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->1586731006,ExpressionUUID->"c1be66d2-f12c-424b-b92f-bd5a8b98d522"],

Cell[BoxData[
 RowBox[{
  FractionBox["1", "4"], " ", 
  RowBox[{"(", 
   RowBox[{"3", "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[3, 1]]], "-", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[1, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[2, 3]], 
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"3"}, "RowDefault"], 
            TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
           SyntaxForm -> SubsuperscriptBox], 
          $CellContext`S[3, 1]]}, "RowDefault"]},
      "RowDefault"],
     Q3`Multiply[
      $CellContext`S[1, 3], 
      $CellContext`S[2, 3], 
      $CellContext`S[3, 1]]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"1"}, "RowDefault"], 
       TemplateBox[{"\"Z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[1, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"2"}, "RowDefault"], 
       TemplateBox[{"\"Z\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[2, 3]], "+", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"3"}, "RowDefault"], 
       TemplateBox[{"\"X\""}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[3, 1]]}], ")"}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->736089396,ExpressionUUID->"ca65e356-6370-4f8d-8231-97c92a48bfe6"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->1948671852,ExpressionUUID->"7f3d5f50-3691-411d-b02e-3bd36927adfb"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "ea9c162d-d97e-4b64-bc87-5ed94ee673ca"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1893551625,ExpressionUUID->"bd94aa2c-2585-4944-b0bc-f60cbcf8b6f5"],

Cell["\<\
Here the controlled-unitary gate has the unitary operator acting on multiple \
qubits.\
\>", "ExampleText",
 CellID->1781572424,ExpressionUUID->"284f2e77-8cfb-496b-b8b1-736b5b941864"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"U", "=", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{"\[Phi]", ",", 
     RowBox[{"S", "[", 
      RowBox[{"2", ",", "1"}], "]"}]}], "]"}], "**", 
   RowBox[{"Rotation", "[", 
    RowBox[{"\[Theta]", ",", 
     RowBox[{"S", "[", 
      RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->907561411,ExpressionUUID->"583dcfd0-4cf8-46b6-8cbe-94a3e01d9163"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{"\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"3"}, "RowDefault"], 
      TemplateBox[{"\"Y\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "-", 
  RowBox[{"\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"X\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"Y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[1]=",
 CellID->2054292171,ExpressionUUID->"fe0ddb54-7ca6-4fa8-b39a-b11819e3d8c1"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", "U", ",", 
     RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}], "]"}]}]], "Input",\

 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1556697824,ExpressionUUID->"46924dc0-913b-40f5-b5cd-df985efa14c8"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], NCache[{1, Rational[-5, 2]}, {1, -2.5}], NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$]} -> {1}, 
    Cos[Rational[1, 2] $CellContext`\[Theta]] 
     Cos[Rational[1, 2] $CellContext`\[Phi]] + 
    Complex[0, -1] 
     Cos[Rational[1, 2] $CellContext`\[Phi]] $CellContext`S[3, 2] 
     Sin[Rational[1, 2] $CellContext`\[Theta]] + 
    Complex[0, -1] 
     Cos[Rational[1, 2] $CellContext`\[Theta]] $CellContext`S[2, 1] 
     Sin[Rational[1, 2] $CellContext`\[Phi]] - Q3`Multiply[
      $CellContext`S[2, 1], 
      $CellContext`S[3, 2]] Sin[Rational[1, 2] $CellContext`\[Theta]] 
    Sin[Rational[1, 2] $CellContext`\[Phi]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1677437122,ExpressionUUID->"6fb151e6-4563-47bf-b38e-6a998486a03a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "[", "qc", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1323430295,ExpressionUUID->"b2a0b1b0-c7e3-44dc-8231-b876c785a591"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "2"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "+", 
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["\[Theta]", "2"], "]"}], " ", 
      RowBox[{"Cos", "[", 
       FractionBox["\[Phi]", "2"], "]"}]}]}], ")"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     RowBox[{
      RowBox[{"Cos", "[", 
       FractionBox["\[Theta]", "2"], "]"}], " ", 
      RowBox[{"Cos", "[", 
       FractionBox["\[Phi]", "2"], "]"}]}]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"1"}, "RowDefault"], 
      TemplateBox[{"\"Z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"Y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Phi]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"3"}, "RowDefault"], 
      TemplateBox[{"\"Y\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", "\[ImaginaryI]", " ", 
   RowBox[{"Cos", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"X\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 1]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"Y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"X\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 1]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"Y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 1], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Theta]", "2"], "]"}], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[3]=",
 CellID->903145433,ExpressionUUID->"df37c8a3-a25c-4c2a-b7aa-2e4ff32a8211"]
}, Open  ]],

Cell["It is more common to have multiple controlled qubits.", "ExampleText",
 CellID->796325451,ExpressionUUID->"0e0f5ac2-9b70-4103-b701-63939a8dcb99"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "@", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2"}], "}"}]}], ",", 
     RowBox[{"Rotation", "[", 
      RowBox[{"\[Phi]", ",", 
       RowBox[{"S", "[", 
        RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1688856124,ExpressionUUID->"abe1d9c9-0aa5-4e31-a4b2-f82660b96e38"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     DiskBox[{1, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"U\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$], 
      $CellContext`S[2, Q3`$]} -> {1, 1}, 
    Q3`Rotation[$CellContext`\[Phi], 
     $CellContext`S[3, 2]]]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->1255528097,ExpressionUUID->"6c290362-451f-4656-a6e4-ecd5c55ef5cd"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "@", "qc"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->97902928,ExpressionUUID->"4a0cfe0c-14fc-46cd-b599-f70dc62d5171"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"3", "+", 
     RowBox[{"Cos", "[", 
      FractionBox["\[Phi]", "2"], "]"}]}], ")"}]}], "-", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"1"}, "RowDefault"], 
      TemplateBox[{"\"Z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "2"], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"Z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]], " ", 
   SuperscriptBox[
    RowBox[{"Sin", "[", 
     FractionBox["\[Phi]", "4"], "]"}], "2"]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"Y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"Y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[2, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"3"}, "RowDefault"], 
           TemplateBox[{"\"Y\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[3, 2]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3], 
     $CellContext`S[3, 2]]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}], "-", 
  RowBox[{
   FractionBox["1", "4"], " ", "\[ImaginaryI]", " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"3"}, "RowDefault"], 
      TemplateBox[{"\"Y\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[3, 2]], " ", 
   RowBox[{"Sin", "[", 
    FractionBox["\[Phi]", "2"], "]"}]}]}]], "Output",
 CellLabel->"Out[5]=",
 CellID->1572061165,ExpressionUUID->"61e5386b-2cd1-4479-8ee3-6948aea33c77"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "03b762e6-68a0-4bcc-a130-c9f96dae9999"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1616593910,ExpressionUUID->"c5d5c2aa-530a-42aa-8e24-c242c882ad43"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"S", "@", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}]}], "->", 
      RowBox[{"{", 
       RowBox[{"1", ",", "0"}], "}"}]}], ",", 
     RowBox[{"Rotation", "[", 
      RowBox[{"\[Phi]", ",", 
       RowBox[{"S", "[", 
        RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->423687378,ExpressionUUID->"a9a43fc4-d44f-4f85-8721-857e10ee0185"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[GrayLevel[0]], DiskBox[{1, -2}, 0.09]}, 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"U\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$], 
      $CellContext`S[2, Q3`$]} -> {1, 0}, 
    Q3`Rotation[$CellContext`\[Phi], 
     $CellContext`S[3, 2]]]]]], "Output",
 CellLabel->"Out[1]=",
 CellID->300255442,ExpressionUUID->"4124936c-0b12-4d48-b0cc-df3998665bc9"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}], ",", 
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "@", 
       RowBox[{"{", 
        RowBox[{"1", ",", "2"}], "}"}]}], ",", 
      RowBox[{"Rotation", "[", 
       RowBox[{"\[Phi]", ",", 
        RowBox[{"S", "[", 
         RowBox[{"3", ",", "2"}], "]"}]}], "]"}]}], "]"}], ",", 
    RowBox[{"S", "[", 
     RowBox[{"2", ",", "1"}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->446009393,ExpressionUUID->"fa23c664-5d68-4e25-80d2-cdacb9156739"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {4, -1}}, {{0, -2}, {4, -2}}, {{0, -3}, {4, -3}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}}], 
     DiskBox[{2, -1}, 0.09], DiskBox[{2, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{1.6, -3.4}, {2.4, -2.6}]}, 
     LineBox[{{1.6, -3.4}, {2.4, -3.4}, {2.4, -2.6}, {1.6, -2.6}, {
      1.6, -3.4}}], InsetBox[
      StyleBox[
       SubscriptBox["\<\"U\"\>", "\<\"y\"\>"],
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {2, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -2.4}, {3.4, -1.6}]}, 
     LineBox[{{2.6, -2.4}, {3.4, -2.4}, {3.4, -1.6}, {2.6, -1.6}, {
      2.6, -2.4}}], InsetBox[
      StyleBox["\<\"X\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.1],
       FontWeight->"Light",
       FontSlant->Italic], {3, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->190.79999999999998`,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   $CellContext`S[2, 1], 
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$], 
      $CellContext`S[2, Q3`$]} -> {1, 1}, 
    Q3`Rotation[$CellContext`\[Phi], 
     $CellContext`S[3, 2]]], 
   $CellContext`S[2, 1]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->756579546,ExpressionUUID->"dcd882fc-963e-4207-b2f2-33e1e787d15e"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"new", "-", "qc"}], "//", "Elaborate"}], "//", 
  "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->2072193516,ExpressionUUID->"8a007ce5-4573-43b3-83ca-0d657091182b"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->1299170062,ExpressionUUID->"1a220cac-58e4-4ff7-ae3e-a53518e34dce"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"a65ac622-01e5-4ee3-a914-997842ddb773"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"b216f277-cb0a-4e0d-87e0-d5f7b8f7c494"],
 "Scope",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "7ecf2711-c576-41ad-9548-41f0ff829809"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1293636265,ExpressionUUID->"c6a1ee95-4584-46fe-8ad7-afbb17347d6f"],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {
       TaggingRules, "Openers", "ExampleSubsection", "0"}, Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"3e6d2f4e-ee50-4713-ae98-505bc64f1192"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"86f6d9d3-158e-459c-88ea-959f8ee6a204"],
 "Expand",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(3)", "ExampleCount",ExpressionUUID->
  "cfbe2b9f-5b63-4d9f-abbe-cf2231d61f4b"]
}], "ExampleSubsection", "ExampleSubsection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1965812958,ExpressionUUID->"7043ef27-640d-4de7-b716-4c76bfd09208"],

Cell[TextData[{
 Cell[BoxData[
  RowBox[{
   TemplateBox[{
     Cell[
      TextData["Expand"]], "paclet:ref/Expand"},
    "RefLink",
    BaseStyle->{"InlineFormula"}], "[", 
   RowBox[{
    TemplateBox[{
      Cell[
       TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
      "Q3 Package Symbol"},
     "PackageLink",
     BaseStyle->"InlineFormula"], "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        SubscriptBox[
         StyleBox["c", "TI"], 
         StyleBox["1", "TR"]], ",", 
        SubscriptBox[
         StyleBox["c", "TI"], 
         StyleBox["2", "TR"]], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "}"}], "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        SubscriptBox[
         StyleBox["v", "TI"], 
         StyleBox["1", "TR"]], ",", 
        SubscriptBox[
         StyleBox["v", "TI"], 
         StyleBox["2", "TR"]], ",", 
        StyleBox["\[Ellipsis]", "TR"]}], "}"}]}], ",", " ", 
     StyleBox["op", "TI"]}], "]"}], "]"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "8725e564-d8fd-426e-a8f2-0cce9488b2cb"],
 " decomposes the controlled-unitary gate into a product of the CNOT and \
single-qubit rotations. Note that this ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "201ffca5-21c5-4ab4-be41-7225305cc75c"],
 " feature of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "ae898680-4e51-4cdf-9984-13eef18f7ed1"],
 " is still experimental (as of Q3 v2.11.2)."
}], "ExampleText",
 CellID->227879916,ExpressionUUID->"0c7aa4f3-37dd-4e0e-bd2e-59186a7adb07"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1801264145,ExpressionUUID->"71fb8275-6431-42f8-9f10-5c98244a4ac5"],

Cell["Consider a single-qubit unitary gate.", "ExampleText",
 CellID->1033495556,ExpressionUUID->"db782b97-aa82-4e66-be39-ffc32793b9ad"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{
   RowBox[{"Exp", "[", 
    RowBox[{
     RowBox[{"-", "I"}], "*", 
     RowBox[{"Pi", "/", "4"}]}], "]"}], "*", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Pi", "/", "3"}], ",", 
       RowBox[{"Pi", "/", "2"}], ",", 
       RowBox[{"Pi", "/", "6"}]}], "}"}], ",", 
     RowBox[{"S", "[", "2", "]"}]}], "]"}]}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1096870451,ExpressionUUID->"f44cb84c-1617-45fd-859e-accf2ebd223c"],

Cell[BoxData[
 RowBox[{
  SuperscriptBox["\[ExponentialE]", 
   RowBox[{"-", 
    FractionBox[
     RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]}]], " ", 
  RowBox[{"EulerRotation", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      FractionBox["\[Pi]", "3"], ",", 
      FractionBox["\[Pi]", "2"], ",", 
      FractionBox["\[Pi]", "6"]}], "}"}], ",", 
    InterpretationBox[
     SubscriptBox[
      TemplateBox[{"S"},
       "RowDefault"], 
      TemplateBox[{"2"},
       "RowDefault"]],
     $CellContext`S[2, Q3`$]]}], "]"}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->491029404,ExpressionUUID->"6e3e5990-09f5-4bdd-a5f6-5d927c1dd7c1"]
}, Open  ]],

Cell["Here is the matrix representation of the above gate.", "ExampleText",
 CellID->1955102746,ExpressionUUID->"76a7ca47-1fd7-419c-a51d-f57fe562138a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"mat", "=", 
   RowBox[{
    RowBox[{"Matrix", "[", "op", "]"}], "//", "SimplifyThrough"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"mat", "//", "MatrixForm"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->2059470547,ExpressionUUID->"c86952bf-725b-4ec0-9a9f-b5365bfb06f9"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{"-", 
       FractionBox["\[ImaginaryI]", 
        SqrtBox["2"]]}], 
      FractionBox[
       RowBox[{"\[ImaginaryI]", " ", 
        RowBox[{"(", 
         RowBox[{"\[ImaginaryI]", "+", 
          SqrtBox["3"]}], ")"}]}], 
       RowBox[{"2", " ", 
        SqrtBox["2"]}]]},
     {
      FractionBox[
       RowBox[{
        RowBox[{"-", "\[ImaginaryI]"}], "+", 
        SqrtBox["3"]}], 
       RowBox[{"2", " ", 
        SqrtBox["2"]}]], 
      FractionBox["1", 
       SqrtBox["2"]]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {2, 2}, 0, {
     1, {{0, 2, 4}, {{1}, {2}, {2}, {1}}}, {
      Complex[0, -1] 2^Rational[-1, 2], Complex[0, Rational[1, 2]] 
       2^Rational[-1, 2] (Complex[0, 1] + 3^Rational[1, 2]), 2^
       Rational[-1, 2], Rational[1, 2] 
       2^Rational[-1, 2] (Complex[0, -1] + 3^Rational[1, 2])}}]]]]], "Output",\

 CellLabel->"Out[3]//MatrixForm=",
 CellID->638433569,ExpressionUUID->"3fef3a11-5a6e-45a0-8357-f211f8657cb7"]
}, Open  ]],

Cell["\<\
Now, consider a controlled-unitary gate with the above gate acting on the \
target qubit.\
\>", "ExampleText",
 CellID->1600123813,ExpressionUUID->"789492ba-4f63-4904-8043-eee75f8aa180"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"cu", "=", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", "op", ",", 
     RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", "cu", "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->8884588,ExpressionUUID->"61eb7453-9767-442e-b8e4-fd7b76180024"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$]} -> {1}, E^(Complex[0, 
        Rational[-1, 4]] Pi) 
    Q3`EulerRotation[{
      Rational[1, 3] Pi, Rational[1, 2] Pi, Rational[1, 6] Pi}, 
      $CellContext`S[2, Q3`$]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->1690371871,ExpressionUUID->"2314c35a-e101-4686-ace1-c98035611ca4"]
}, Open  ]],

Cell["\<\
Decompose the controlled-unitary gate above into a product of single-qubit \
rotations and CNOT gate.\
\>", "ExampleText",
 CellID->777355164,ExpressionUUID->"bf3616c6-abdb-4186-be16-48d519cda364"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Expand", "[", "cu", "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1865987295,ExpressionUUID->"7e24ce5d-ecc7-4235-9aea-c752d184cfad"],

Cell[BoxData[
 RowBox[{"Sequence", "[", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{
     RowBox[{"-", 
      FractionBox["\[Pi]", "12"]}], ",", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"S"}, "RowDefault"], 
        TemplateBox[{"2"}, "RowDefault"], 
        TemplateBox[{"\"Z\""}, "RowDefault"]},
       "Subsuperscript"],
      $CellContext`S[2, 3]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"C\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}], ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}]}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"B\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox["\[Pi]", "3"], ",", 
       FractionBox["\[Pi]", "4"], ",", "0"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"A\"\>"}]}], "]"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]},
           "Subsuperscript"],
          $CellContext`S[1, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         RowBox[{"-", 
          FractionBox["\[Pi]", "4"]}], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]}], "]"}]], "Output",
 CellLabel->"Out[5]=",
 CellID->1812737970,ExpressionUUID->"0aa12711-ae7a-41cb-9a41-4156867f9863"]
}, Open  ]],

Cell["Represent the decomposition in a quantum circuit.", "ExampleText",
 CellID->1490385628,ExpressionUUID->"c2eca4a6-5908-4d48-9fdb-eada5eb2ce3e"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "[", "cu", "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->984160605,ExpressionUUID->"9999c13b-9a3d-4b6e-877f-7602761e86eb"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {7, -1}}, {{0, -2}, {7, -2}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox["\<\"C\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}}], 
     DiskBox[{2, -1}, 0.09], {CircleBox[{2, -2}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -2}, {2.2666666666666666`, -2}}, {{
         2, -2.2666666666666666`}, {2, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -2.4}, {3.4, -1.6}]}, 
     LineBox[{{2.6, -2.4}, {3.4, -2.4}, {3.4, -1.6}, {2.6, -1.6}, {
      2.6, -2.4}}], InsetBox[
      StyleBox["\<\"B\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {3, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{4, -1}, {4, -2}}], 
     DiskBox[{4, -1}, 0.09], {CircleBox[{4, -2}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -2}, {4.266666666666667, -2}}, {{
         4, -2.2666666666666666`}, {4, -1.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{4.6, -2.4}, {5.4, -1.6}]}, 
     LineBox[{{4.6, -2.4}, {5.4, -2.4}, {5.4, -1.6}, {4.6, -1.6}, {
      4.6, -2.4}}], InsetBox[
      StyleBox["\<\"A\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {5, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -1.4}, {6.4, -0.6}]}, 
     LineBox[{{5.6, -1.4}, {6.4, -1.4}, {6.4, -0.6}, {5.6, -0.6}, {
      5.6, -1.4}}], InsetBox[
      StyleBox[
       TemplateBox[{"\"Z\"", 
         RowBox[{"-", 
           FractionBox["\[Pi]", "4"]}]},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {6, -1}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->298.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[Rational[-1, 12] Pi, 
    $CellContext`S[2, 3], "Label" -> "C"], 
   Q3`CNOT[{
      $CellContext`S[1, Q3`$]} -> {1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{0, Rational[-1, 4] Pi, Rational[-1, 4] Pi}, 
    $CellContext`S[2, Q3`$], "Label" -> "B"], 
   Q3`CNOT[{
      $CellContext`S[1, Q3`$]} -> {1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{Rational[1, 3] Pi, Rational[1, 4] Pi, 0}, 
    $CellContext`S[2, Q3`$], "Label" -> "A"], 
   Q3`Phase[Rational[-1, 4] Pi, 
    $CellContext`S[1, 3]]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->1598922921,ExpressionUUID->"6ab8ae0a-cd24-4755-a9a6-1d2cefc08dfb"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Elaborate", "[", "cu", "]"}], "-", 
   RowBox[{"Elaborate", "[", "new", "]"}]}], "//", "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->298820583,ExpressionUUID->"8e470220-2270-4db5-bc2f-98b5d8369bf7"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[7]=",
 CellID->955796412,ExpressionUUID->"91603fcb-111f-4785-a81c-b4b7abc49c7c"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "973e01be-e50a-4caa-9d7b-1da358e3d5e4"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1705608657,ExpressionUUID->"fdb16c1f-65f0-41d4-bd3a-8efdae87f25a"],

Cell[TextData[{
 "The ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "1340c724-9dbc-4c8b-9805-bd4cc504938c"],
 " feature of ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["ControlledGate"]], "paclet:Q3/ref/ControlledGate", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "6b93201b-4825-4f95-bcff-472e135328da"],
 " is supposed to be used inside ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["QuantumCircuit"]], "paclet:Q3/ref/QuantumCircuit", 
    "Q3 Package Symbol"},
   "PackageLink",
   BaseStyle->"InlineFormula"]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "4eb0932b-b6a9-4285-9e6e-9ec9dc0a223f"],
 ". If you want to analyse or check the decomposition, the following example \
may be useful."
}], "ExampleText",
 CellID->181077262,ExpressionUUID->"2d7e6b91-089e-46bf-872e-62fb7e3771f7"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"cmp", "=", 
  RowBox[{"{", 
   RowBox[{"Expand", "[", "cu", "]"}], "}"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"Notice", " ", 
    RowBox[{
     RowBox[{"{", "\[Ellipsis]", "}"}], "."}]}], " ", "*)"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1563352008,ExpressionUUID->"f6d84b02-f8d0-46e1-9c31-c4e075ddbf10"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{
     RowBox[{"-", 
      FractionBox["\[Pi]", "12"]}], ",", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"S"}, "RowDefault"], 
        TemplateBox[{"2"}, "RowDefault"], 
        TemplateBox[{"\"Z\""}, "RowDefault"]},
       "Subsuperscript"],
      $CellContext`S[2, 3]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"C\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}], ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}]}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"B\"\>"}]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox["\[Pi]", "3"], ",", 
       FractionBox["\[Pi]", "4"], ",", "0"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]], ",", 
     RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"A\"\>"}]}], "]"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]},
           "Subsuperscript"],
          $CellContext`S[1, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         RowBox[{"-", 
          FractionBox["\[Pi]", "4"]}], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]}], "}"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->2051299258,ExpressionUUID->"37816588-2151-4692-93db-804b4552d3a7"]
}, Open  ]],

Cell["You can remove the labels.", "ExampleText",
 CellID->1652630181,ExpressionUUID->"4868bc9a-b530-45cd-ba8f-03165a086a0c"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"more", "=", 
  RowBox[{"QuantumCircuitTrim", "[", "cmp", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->63469277,ExpressionUUID->"1a99cb39-aa0b-4cff-aebb-6a6dda19de11"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"Rotation", "[", 
    RowBox[{
     RowBox[{"-", 
      FractionBox["\[Pi]", "12"]}], ",", 
     InterpretationBox[
      TemplateBox[{
        TemplateBox[{"S"}, "RowDefault"], 
        TemplateBox[{"2"}, "RowDefault"], 
        TemplateBox[{"\"Z\""}, "RowDefault"]},
       "Subsuperscript"],
      $CellContext`S[2, 3]]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"0", ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}], ",", 
       RowBox[{"-", 
        FractionBox["\[Pi]", "4"]}]}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]]}], "]"}], ",", 
   RowBox[{"CNOT", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       InterpretationBox[
        SubscriptBox[
         TemplateBox[{"S"},
          "RowDefault"], 
         TemplateBox[{"1"},
          "RowDefault"]],
        $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
      RowBox[{"{", "1", "}"}]}], ",", 
     RowBox[{"{", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]], "}"}]}], "]"}], ",", 
   RowBox[{"EulerRotation", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       FractionBox["\[Pi]", "3"], ",", 
       FractionBox["\[Pi]", "4"], ",", "0"}], "}"}], ",", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"2"},
        "RowDefault"]],
      $CellContext`S[2, Q3`$]]}], "]"}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"1"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]},
           "Subsuperscript"],
          $CellContext`S[1, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         RowBox[{"-", 
          FractionBox["\[Pi]", "4"]}], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]}], "}"}]], "Output",
 CellLabel->"Out[2]=",
 CellID->546984323,ExpressionUUID->"7b3be92e-137d-4c29-8618-d41fa1597a22"]
}, Open  ]],

Cell[TextData[{
 "You can directly multiply the components to check the equivalence. Here, \
notice ",
 StyleBox["Reverse[cmp]", "Input"],
 "."
}], "ExampleText",
 CellID->1753917898,ExpressionUUID->"496b1728-af9e-4ac7-b616-8e54245465fa"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Apply", "[", 
     RowBox[{"Multiply", ",", 
      RowBox[{"Reverse", "@", "cmp"}]}], "]"}], "-", "cu"}], "//", 
   "Elaborate"}], "//", "FullSimplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1043909238,ExpressionUUID->"5f5ee38e-11a3-414b-a7d1-fe8b6bec43a2"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[3]=",
 CellID->1610283999,ExpressionUUID->"2b9b8ff4-b4c8-47b2-b4e0-9357067ff4e0"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "7f26634e-daa4-4185-b379-cdaec91cf4eb"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->1600539001,ExpressionUUID->"31ae6430-8c7b-44cd-8300-670c45ce1b5f"],

Cell[TextData[{
 "The ",
 Cell[BoxData[
  TemplateBox[{
    Cell[
     TextData["Expand"]], "paclet:ref/Expand"},
   "RefLink",
   BaseStyle->{"InlineFormula"}]], "InlineFormula",
  FontFamily->"Source Sans Pro",ExpressionUUID->
  "b78d7b08-2be2-4ae1-b461-d0e33c31a1ca"],
 " feature also applies to multi-control unitary gates. For example, consider \
the above unitary gate controlled by two qubits ",
 StyleBox["S[0,$]", "Input"],
 " and ",
 StyleBox["S[1,$]", "Input"],
 "."
}], "ExampleText",
 CellID->595717937,ExpressionUUID->"79199969-d11b-4cb4-a2e6-7269e9019f29"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ccu", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"0", ",", "1"}], "}"}]}], ",", "op", ",", 
    RowBox[{"\"\<Label\>\"", "->", "\"\<U\>\""}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1811053528,ExpressionUUID->"500055e9-8455-419c-9fdf-7e03c8b7ed13"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"0"},
         "RowDefault"]],
       $CellContext`S[0, Q3`$]], ",", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"1"},
         "RowDefault"]],
       $CellContext`S[1, Q3`$]]}], "}"}], "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"1", ",", "1"}], "}"}]}], ",", 
   RowBox[{
    SuperscriptBox["\[ExponentialE]", 
     RowBox[{"-", 
      FractionBox[
       RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]}]], " ", 
    RowBox[{"EulerRotation", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
        FractionBox["\[Pi]", "3"], ",", 
        FractionBox["\[Pi]", "2"], ",", 
        FractionBox["\[Pi]", "6"]}], "}"}], ",", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]]}], "]"}]}], ",", 
   RowBox[{"\<\"Label\"\>", "\[Rule]", "\<\"U\"\>"}]}], "]"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->1454251699,ExpressionUUID->"be50fb6b-3c13-49b7-bfc3-b6b31e7144fa"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qcc", "=", 
  RowBox[{"QuantumCircuit", "[", "ccu", "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1793861229,ExpressionUUID->"6e0e1754-9344-49b1-8f8a-89c82edae3b9"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}}], {
     LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
     DiskBox[{1, -2}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"U\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[0, Q3`$], 
      $CellContext`S[1, Q3`$]} -> {1, 1}, E^(Complex[0, 
        Rational[-1, 4]] Pi) 
    Q3`EulerRotation[{
      Rational[1, 3] Pi, Rational[1, 2] Pi, Rational[1, 6] Pi}, 
      $CellContext`S[2, Q3`$]], "Label" -> "U"]]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1236026046,ExpressionUUID->"9f0bbbd2-90fa-4c3a-a72c-c4a7da88bc4b"]
}, Open  ]],

Cell[TextData[{
 "Decompose the quantum circuit above into a product of the multi-controlled \
NOT gate  and single-qubit rotations. (See also the ",
 ButtonBox["Generalization & Extensions",
  BaseStyle->"Link",
  ButtonData->"paclet:Q3/ref/ControlledGate#1020263627"],
 " section below.)"
}], "ExampleText",
 CellID->1051097161,ExpressionUUID->"caa8d7d5-c50e-46f8-aeb9-d2402a1df659"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"Expand", "[", "ccu", "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->1765521323,ExpressionUUID->"d1091702-79cb-4981-ba49-cb4d7dba0090"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {7, -1}}, {{0, -2}, {7, -2}}, {{0, -3}, {7, -3}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
     LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
      0.6, -3.4}}], InsetBox[
      StyleBox["\<\"C\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {1, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{2, -1}, {2, -2}, {2, -3}}], 
     DiskBox[{2, -1}, 0.09], 
     DiskBox[{2, -2}, 0.09], {CircleBox[{2, -3}, 0.26666666666666666], 
      LineBox[{{{1.7333333333333334`, -3}, {2.2666666666666666`, -3}}, {{
         2, -3.2666666666666666`}, {2, -2.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{2.6, -3.4}, {3.4, -2.6}]}, 
     LineBox[{{2.6, -3.4}, {3.4, -3.4}, {3.4, -2.6}, {2.6, -2.6}, {
      2.6, -3.4}}], InsetBox[
      StyleBox["\<\"B\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {3, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{4, -1}, {4, -2}, {4, -3}}], 
     DiskBox[{4, -1}, 0.09], 
     DiskBox[{4, -2}, 0.09], {CircleBox[{4, -3}, 0.26666666666666666], 
      LineBox[{{{3.7333333333333334`, -3}, {4.266666666666667, -3}}, {{
         4, -3.2666666666666666`}, {4, -2.7333333333333334`}}}]}}, {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{4.6, -3.4}, {5.4, -2.6}]}, 
     LineBox[{{4.6, -3.4}, {5.4, -3.4}, {5.4, -2.6}, {4.6, -2.6}, {
      4.6, -3.4}}], InsetBox[
      StyleBox["\<\"A\"\>",
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {5, -3}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}, {LineBox[{{6, -1}, {6, -2}}], 
     DiskBox[{6, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{5.6, -2.4}, {6.4, -1.6}]}, 
     LineBox[{{5.6, -2.4}, {6.4, -2.4}, {6.4, -1.6}, {5.6, -1.6}, {
      5.6, -2.4}}], InsetBox[
      StyleBox[
       TemplateBox[{"\"Z\"", 
         RowBox[{"-", 
           FractionBox["\[Pi]", "4"]}]},
        "Superscript"],
       StripOnInput->False,
       FontSize->Scaled[0.05714285714285714],
       FontWeight->"Light",
       FontSlant->Italic], {6, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->298.8,
   PlotRange->NCache[{Full, {
       Rational[-7, 2], 
       Rational[-1, 2]}}, {Full, {-3.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Rotation[Rational[-1, 12] Pi, 
    $CellContext`S[2, 3], "Label" -> "C"], 
   Q3`CNOT[{
      $CellContext`S[0, Q3`$], 
      $CellContext`S[1, Q3`$]} -> {1, 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{0, Rational[-1, 4] Pi, Rational[-1, 4] Pi}, 
    $CellContext`S[2, Q3`$], "Label" -> "B"], 
   Q3`CNOT[{
      $CellContext`S[0, Q3`$], 
      $CellContext`S[1, Q3`$]} -> {1, 1}, {
     $CellContext`S[2, Q3`$]}], 
   Q3`EulerRotation[{Rational[1, 3] Pi, Rational[1, 4] Pi, 0}, 
    $CellContext`S[2, Q3`$], "Label" -> "A"], 
   Q3`ControlledGate[{
      $CellContext`S[0, Q3`$]} -> {1}, 
    Q3`Phase[Rational[-1, 4] Pi, 
     $CellContext`S[1, 3]]]]]], "Output",
 CellLabel->"Out[3]=",
 CellID->809127871,ExpressionUUID->"5ba38416-6c99-4a73-b9ec-0b38d794d1e2"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"qcc", "-", "new"}], "//", "Elaborate"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1192347325,ExpressionUUID->"b1b686f0-ef19-4317-8b2d-973c6b14e8e5"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[4]=",
 CellID->804611545,ExpressionUUID->"48d2f8c4-d866-457a-bb91-aff719f89d4e"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "0"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, 
  Closed]]]],

Cell[CellGroupData[{

Cell[TextData[{
 Cell[BoxData[
  DynamicBox[ToBoxes[
    If[
     MatchQ[
      CurrentValue[
       EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"},
        Closed], 
      Alternatives[Open, True]], 
     Style[
      Graphics[{
        Thickness[0.18], 
        RGBColor[0.8509803921568627, 0.396078431372549, 0], 
        Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
       PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
      0.68 Inherited], 
     Rotate[
      Style[
       Graphics[{
         Thickness[0.18], 
         RGBColor[0.8509803921568627, 0.396078431372549, 0], 
         Line[{{-1.8, 0.5}, {0, 0}, {1.8, 0.5}}]}, AspectRatio -> 1, 
        PlotRange -> {{-3, 4}, {-1, 1}}, ImageSize -> 20], Magnification -> 
       0.68 Inherited], Rational[1, 2] Pi, {-1.65, -1}]]],
   ImageSizeCache->{14., {0.45000000000000107`, 13.549999999999999`}}]],
  ExpressionUUID->"0a9e802a-b46f-41c4-856e-8d4fdbd8af1c"],
 Cell[BoxData[
  TemplateBox[{1},
   "Spacer1"]],ExpressionUUID->"4d5fc92c-82fa-4832-a286-f9a7faee6ce3"],
 "Generalizations & Extensions",
 "\[NonBreakingSpace]\[NonBreakingSpace]",
 Cell["(2)", "ExampleCount",ExpressionUUID->
  "ba98e6b8-09b8-4258-a439-4440d8381514"]
}], "ExampleSection", "ExampleSection",
 WholeCellGroupOpener->True,
 CacheGraphics->False,
 CellID->1020263627,ExpressionUUID->"2a2b669f-040e-49c3-9f03-3731259755c8"],

Cell[BoxData[
 RowBox[{"Let", "[", 
  RowBox[{"Qubit", ",", "S"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->54597739,ExpressionUUID->"d99a708d-487c-469f-b6d1-781a1847c020"],

Cell["\<\
When the unitary operator is a complex number of unit amplitude, then the \
controlled-U gate is equivalent to the phase gate on the controlled qubit.\
\>", "ExampleText",
 CellID->1658935743,ExpressionUUID->"ce1bb20e-d226-4061-b0c9-827052c6e4a2"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{"Let", "[", 
  RowBox[{"Real", ",", "\[Phi]"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"z", "=", 
  RowBox[{"Exp", "[", 
   RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->450269680,ExpressionUUID->"07b011eb-009c-4d3c-8d88-f0caf64477f4"],

Cell[BoxData[
 SuperscriptBox["\[ExponentialE]", 
  RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]]], "Output",
 CellLabel->"Out[2]=",
 CellID->1656572259,ExpressionUUID->"3226f35a-4d23-4833-adcf-e56569dff759"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"S", "[", "1", "]"}], ",", "z"}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->113446564,ExpressionUUID->"5fe293ac-8bc2-45a2-b34d-2d32a7052650"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{
          TemplateBox[{"S"}, "RowDefault"], 
          TemplateBox[{"1"}, "RowDefault"], 
          TemplateBox[{"\"Z\""}, "RowDefault"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       RowBox[{"arg", "(", 
        SuperscriptBox["\[ExponentialE]", 
         RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]], ")"}], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[
   Arg[E^(Complex[0, 1] $CellContext`\[Phi])], 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[3]=",
 CellID->1175398150,ExpressionUUID->"78d0edb5-dd53-436a-af88-832e905481c6"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "[", "1", "]"}], ",", "z"}], "]"}], "/.", 
  RowBox[{"{", 
   RowBox[{"\[Phi]", "\[Rule]", 
    RowBox[{"Pi", "/", "3"}]}], "}"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1884776724,ExpressionUUID->"20541f68-d4d5-403a-9b7c-b35230ba90d8"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{
          TemplateBox[{"S"}, "RowDefault"], 
          TemplateBox[{"1"}, "RowDefault"], 
          TemplateBox[{"\"Z\""}, "RowDefault"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       FractionBox["\[Pi]", "3"], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[Rational[1, 3] Pi, 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[4]=",
 CellID->504389125,ExpressionUUID->"7ec9f8d8-8142-4cbc-b781-9c052b2d3700"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "[", "1", "]"}], ",", 
     RowBox[{
      RowBox[{"S", "[", 
       RowBox[{"2", ",", "0"}], "]"}], " ", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}], ",", 
     RowBox[{"\"\<Label\>\"", "\[Rule]", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1389124015,ExpressionUUID->"a9538de2-cc5f-4e43-a03c-e888e971dcf6"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     LineBox[{{1, -1}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
     LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
      0.6, -2.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -2}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$]} -> {1}, 
    E^(Complex[0, 1] $CellContext`\[Phi]) $CellContext`S[2, 0], "Label" -> 
    E^(Complex[0, 1] $CellContext`\[Phi])]]]], "Output",
 CellLabel->"Out[5]=",
 CellID->864872096,ExpressionUUID->"1ddb224f-7179-43bf-9e95-0cf379e6ad31"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc1", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{
    RowBox[{"ControlledGate", "[", 
     RowBox[{
      RowBox[{"S", "[", "1", "]"}], ",", " ", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}], ",", 
      RowBox[{"\"\<Label\>\"", "\[Rule]", 
       RowBox[{"Exp", "[", 
        RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"\"\<Visible\>\"", "\[Rule]", 
     RowBox[{"S", "[", "2", "]"}]}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->125637926,ExpressionUUID->"65b1bae5-0660-4eef-b5a3-603d47994957"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}}], {
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
     LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
      0.6, -1.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -1}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-5, 2], 
       Rational[-1, 2]}}, {Full, {-2.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`Phase[
    Arg[E^(Complex[0, 1] $CellContext`\[Phi])], 
    $CellContext`S[1, 3], "Label" -> E^(Complex[0, 1] $CellContext`\[Phi])], 
   "Visible" -> $CellContext`S[2]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->645946781,ExpressionUUID->"4a09e293-12d5-4ea6-9bd7-751a91595da1"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc1"}], "]"}], "//", "FullSimplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->1909614846,ExpressionUUID->"9dd3297d-b0d9-4eb7-b005-025ea5b87a1c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[7]=",
 CellID->61532876,ExpressionUUID->"4d55dae9-8fe0-4973-b57b-40b373e60120"]
}, Open  ]],

Cell["\<\
When the number is not of unit magnitude, it gives a warning message.\
\>", "ExampleText",
 CellID->511713125,ExpressionUUID->"15d62ffe-8c12-4b2b-b186-afd2fe6eadb1"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{"S", "[", "1", "]"}], ",", 
   RowBox[{"1", "+", "I"}]}], "]"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->375479679,ExpressionUUID->"30d874de-864b-4b1c-9e38-02f2d12a42e8"],

Cell[BoxData[
 TemplateBox[{
  "ControlledGate", "nonuni", 
   "\"The operator \\!\\(\\*RowBox[{\\\"1\\\", \\\"+\\\", \\\"\[ImaginaryI]\\\
\"}]\\) is not unitary.\"", 2, 283, 1, 18463544871324492391, "Local", 
   "Q3`ControlledGate"},
  "MessageTemplate2"]], "Message", "MSG",
 CellLabel->"During evaluation of In[8]:=",
 CellID->1090041081,ExpressionUUID->"60f49dc8-cf2f-4f49-b001-116dc4851dfa"],

Cell[BoxData[
 InterpretationBox[
  TagBox[
   FormBox[
    TagBox[
     RowBox[{
      FormBox[
       InterpretationBox[
        TemplateBox[{
          TemplateBox[{"S"}, "RowDefault"], 
          TemplateBox[{"1"}, "RowDefault"], 
          TemplateBox[{"\"Z\""}, "RowDefault"]},
         "Subsuperscript"],
        $CellContext`S[1, 3]],
       TraditionalForm], "\[InvisibleApplication]", 
      RowBox[{"(", 
       FractionBox["\[Pi]", "4"], ")"}]}],
     HoldForm],
    TraditionalForm],
   TraditionalForm,
   Editable->True],
  Q3`Phase[Rational[1, 4] Pi, 
   $CellContext`S[1, 3]]]], "Output",
 CellLabel->"Out[8]=",
 CellID->137455810,ExpressionUUID->"79ca6cdf-ba1b-434d-bde1-24cd1bd773e2"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[Cell[
  "\t", "ExampleDelimiter",ExpressionUUID->
   "1a5bc3c4-ecf0-492e-8d57-7143fa8e45a7"],
  $Line = 0; Null]], "ExampleDelimiter",
 CellID->174573991,ExpressionUUID->"b102b10c-2e0c-4f52-af7d-4f35c16a731a"],

Cell[TextData[{
 "When there are more than one control qubits, then the controlled-U gate \
induces a relative phase shift on the state ",
 Cell[BoxData[
  TemplateBox[{
    RowBox[{"11", "\[Ellipsis]1"}]},
   "Ket"]],ExpressionUUID->"9d2f3b7b-542e-481d-b1b0-3436ac17c901"],
 "."
}], "ExampleText",
 CellID->1484041902,ExpressionUUID->"14c34e30-a4de-4b49-ac74-cd06839bb1cd"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"op", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2"}], "}"}]}], ",", 
    RowBox[{"Exp", "[", 
     RowBox[{"I", " ", 
      RowBox[{"\[Pi]", "/", "4"}]}], "]"}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[1]:=",
 CellID->1674411155,ExpressionUUID->"dc19ad6b-fe7c-4749-b923-c11da779a41e"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     InterpretationBox[
      SubscriptBox[
       TemplateBox[{"S"},
        "RowDefault"], 
       TemplateBox[{"1"},
        "RowDefault"]],
      $CellContext`S[1, Q3`$]], "}"}], "\[Rule]", 
    RowBox[{"{", "1", "}"}]}], ",", 
   InterpretationBox[
    TagBox[
     FormBox[
      TagBox[
       RowBox[{
        FormBox[
         InterpretationBox[
          TemplateBox[{
            TemplateBox[{"S"}, "RowDefault"], 
            TemplateBox[{"2"}, "RowDefault"], 
            TemplateBox[{"\"Z\""}, "RowDefault"]},
           "Subsuperscript"],
          $CellContext`S[2, 3]],
         TraditionalForm], "\[InvisibleApplication]", 
        RowBox[{"(", 
         FractionBox["\[Pi]", "4"], ")"}]}],
       HoldForm],
      TraditionalForm],
     TraditionalForm,
     Editable->True],
    Q3`Phase[Rational[1, 4] Pi, 
     $CellContext`S[2, 3]]]}], "]"}]], "Output",
 CellLabel->"Out[1]=",
 CellID->749406506,ExpressionUUID->"5151cd22-b699-4ccf-8309-b95c5a239dfa"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Elaborate", "@", "op"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[2]:=",
 CellID->1750426850,ExpressionUUID->"dacf46e0-996f-4937-91d7-16d92e1787ca"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"3", "+", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"-", "1"}], "+", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"1"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[1, 3]], 
        InterpretationBox[
         TemplateBox[{
           TemplateBox[{"S"}, "RowDefault"], 
           TemplateBox[{"2"}, "RowDefault"], 
           TemplateBox[{"\"Z\""}, "RowDefault"]}, "Subsuperscript", 
          SyntaxForm -> SubsuperscriptBox], 
         $CellContext`S[2, 3]]}, "RowDefault"]},
     "RowDefault"],
    Q3`Multiply[
     $CellContext`S[1, 3], 
     $CellContext`S[2, 3]]]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"1"}, "RowDefault"], 
      TemplateBox[{"\"Z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[1, 3]]}], "+", 
  RowBox[{
   FractionBox["1", "4"], " ", 
   RowBox[{"(", 
    RowBox[{"1", "-", 
     SuperscriptBox[
      RowBox[{"(", 
       RowBox[{"-", "1"}], ")"}], 
      RowBox[{"1", "/", "4"}]]}], ")"}], " ", 
   InterpretationBox[
    TemplateBox[{
      TemplateBox[{"S"}, "RowDefault"], 
      TemplateBox[{"2"}, "RowDefault"], 
      TemplateBox[{"\"Z\""}, "RowDefault"]},
     "Subsuperscript"],
    $CellContext`S[2, 3]]}]}]], "Output",
 CellLabel->"Out[2]=",
 CellID->995163237,ExpressionUUID->"238b70d5-828a-495c-9e16-e50728d2282f"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Matrix", "[", "op", "]"}], "//", "Simplify"}], "//", 
  "MatrixForm"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[3]:=",
 CellID->295000539,ExpressionUUID->"97d44f6c-079f-45b1-a0a3-67e5bde7554e"],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", "0", "0"},
     {"0", "1", "0", "0"},
     {"0", "0", "1", "0"},
     {"0", "0", "0", 
      FractionBox[
       RowBox[{"1", "+", "\[ImaginaryI]"}], 
       SqrtBox["2"]]}
    },
    GridBoxAlignment->{"Columns" -> {{Center}}, "Rows" -> {{Baseline}}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[
   SparseArray[
    Automatic, {4, 4}, 0, {
     1, {{0, 1, 2, 3, 4}, {{1}, {2}, {3}, {4}}}, {
      1, 1, 1, Complex[1, 1] 2^Rational[-1, 2]}}]]]]], "Output",
 CellLabel->"Out[3]//MatrixForm=",
 CellID->1182494314,ExpressionUUID->"37f3fc82-5ea4-4787-93ac-25eb8aa26fe8"]
}, Open  ]],

Cell["\<\
This expression is equivalent to the above one, but does not expand.\
\>", "ExampleText",
 CellID->2142135012,ExpressionUUID->"e8e32497-7873-4774-8f47-101658e21881"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"new", "=", 
  RowBox[{"ControlledGate", "[", 
   RowBox[{
    RowBox[{"S", "@", 
     RowBox[{"{", 
      RowBox[{"1", ",", "2"}], "}"}]}], ",", 
    RowBox[{
     RowBox[{"Exp", "[", 
      RowBox[{"I", " ", 
       RowBox[{"\[Pi]", "/", "4"}]}], "]"}], " ", 
     RowBox[{"S", "[", 
      RowBox[{"3", ",", "0"}], "]"}]}]}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[4]:=",
 CellID->1434563406,ExpressionUUID->"73da201d-7fa1-4349-aff3-8e4546d704a8"],

Cell[BoxData[
 RowBox[{"ControlledGate", "[", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"1"},
         "RowDefault"]],
       $CellContext`S[1, Q3`$]], ",", 
      InterpretationBox[
       SubscriptBox[
        TemplateBox[{"S"},
         "RowDefault"], 
        TemplateBox[{"2"},
         "RowDefault"]],
       $CellContext`S[2, Q3`$]]}], "}"}], "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"1", ",", "1"}], "}"}]}], ",", 
   RowBox[{
    SuperscriptBox["\[ExponentialE]", 
     FractionBox[
      RowBox[{"\[ImaginaryI]", " ", "\[Pi]"}], "4"]], " ", 
    InterpretationBox[
     TemplateBox[{
       TemplateBox[{"S"}, "RowDefault"], 
       TemplateBox[{"3"}, "RowDefault"], 
       TemplateBox[{"0"}, "RowDefault"]},
      "Subsuperscript"],
     $CellContext`S[3, 0]]}]}], "]"}]], "Output",
 CellLabel->"Out[4]=",
 CellID->907162183,ExpressionUUID->"85475f6c-08a5-49ff-8c0a-f8896edb2da0"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Elaborate", "[", "op", "]"}], "-", 
   RowBox[{"Elaborate", "[", "new", "]"}]}], "//", "Simplify"}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[5]:=",
 CellID->1544994010,ExpressionUUID->"e3064ca8-e8d2-4efc-b849-3137a78ebf7c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[5]=",
 CellID->261354560,ExpressionUUID->"7675992b-6ce6-451e-850b-3a5a8213996f"]
}, Open  ]],

Cell["\<\
The equivalence can also be examined in quantum circuit model. The \
controlled-unitary gate with the unitary gate given by the global phase shift \
is represented by the following quantum circuit model.\
\>", "ExampleText",
 CellID->382850454,ExpressionUUID->"65be8571-3cf9-4553-85a7-395894e269f2"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"qc", "=", 
  RowBox[{"QuantumCircuit", "[", 
   RowBox[{"ControlledGate", "[", 
    RowBox[{
     RowBox[{"S", "@", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], ",", 
     RowBox[{
      RowBox[{"S", "[", 
       RowBox[{"4", ",", "0"}], "]"}], 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}], ",", 
     RowBox[{"\"\<Label\>\"", "\[Rule]", 
      RowBox[{"Exp", "[", 
       RowBox[{"I", " ", "\[Phi]"}], "]"}]}]}], "]"}], "]"}]}]], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[6]:=",
 CellID->1698297027,ExpressionUUID->"1793343c-9063-4915-a491-af9497437511"],

Cell[BoxData[
 InterpretationBox[
  GraphicsBox[{
    {Dashing[{Small, Small}], LineBox[{}]}, 
    LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {2, -3}}, {{
     0, -4}, {2, -4}}}], {LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -4}}], 
     DiskBox[{1, -1}, 0.09], DiskBox[{1, -2}, 0.09], DiskBox[{1, -3}, 0.09], 
     {GrayLevel[1], EdgeForm[None], RectangleBox[{0.6, -4.4}, {1.4, -3.6}]}, 
     LineBox[{{0.6, -4.4}, {1.4, -4.4}, {1.4, -3.6}, {0.6, -3.6}, {
      0.6, -4.4}}], InsetBox[
      StyleBox[
       SuperscriptBox["\[ExponentialE]", 
        RowBox[{"\[ImaginaryI]", " ", "\[Phi]"}]],
       StripOnInput->False,
       FontSize->Scaled[0.2],
       FontWeight->"Light",
       FontSlant->Italic], {1, -4}, NCache[
      ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
       ImageScaled[{0.5, 0.5}]]]}},
   AxesStyle->Large,
   FrameStyle->Large,
   ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
   ImageSize->118.8,
   PlotRange->NCache[{Full, {
       Rational[-9, 2], 
       Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
   PlotRangePadding->Scaled[0.025]],
  Q3`QuantumCircuit[
   Q3`ControlledGate[{
      $CellContext`S[1, Q3`$], 
      $CellContext`S[2, Q3`$], 
      $CellContext`S[3, Q3`$]} -> {1, 1, 1}, 
    E^(Complex[0, 1] $CellContext`\[Phi]) $CellContext`S[4, 0], "Label" -> 
    E^(Complex[0, 1] $CellContext`\[Phi])]]]], "Output",
 CellLabel->"Out[6]=",
 CellID->1549298048,ExpressionUUID->"38c8733e-8fff-488d-a170-7cb47d1fb15d"]
}, Open  ]],

Cell["\<\
It is equivalent to the following three quantum circuit models involving \
(relative) phase-shift gate, and leaving the forth qubit intact.\
\>", "ExampleText",
 CellID->42562061,ExpressionUUID->"6e2d2745-0a7b-4b9e-bfbd-a37e9cfb24ba"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"qc1", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2", ",", "3"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"1", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qc2", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "3"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"2", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"qc3", "=", 
   RowBox[{"QuantumCircuit", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ControlledGate", "[", 
      RowBox[{
       RowBox[{"S", "@", 
        RowBox[{"{", 
         RowBox[{"1", ",", "2"}], "}"}]}], ",", 
       RowBox[{"Phase", "[", 
        RowBox[{"\[Phi]", ",", 
         RowBox[{"S", "[", 
          RowBox[{"3", ",", "3"}], "]"}]}], "]"}]}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"\"\<Visible\>\"", "\[Rule]", 
      RowBox[{"S", "[", "4", "]"}]}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"GraphicsRow", "@", 
  RowBox[{"{", 
   RowBox[{"qc1", ",", "qc2", ",", "qc3"}], "}"}]}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[7]:=",
 CellID->385898355,ExpressionUUID->"d7f533b5-da8d-4744-af3a-cc59bfb42591"],

Cell[BoxData[
 GraphicsBox[{{}, {InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -2}, {1, -3}, {1, -1}}], 
           DiskBox[{1, -1}, 0.09], DiskBox[{1, -2}, 0.09], 
           DiskBox[{1, -3}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -1.4}, {1.4, -0.6}]}, 
           LineBox[{{0.6, -1.4}, {1.4, -1.4}, {1.4, -0.6}, {0.6, -0.6}, {
            0.6, -1.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -1}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{
            $CellContext`S[1, Q3`$], 
            $CellContext`S[2, Q3`$], 
            $CellContext`S[3, Q3`$]} -> {1, 1, 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[1, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {63.9625, -76.65}, {Center, Center}, {118.99999999999999, 146.},
     
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}], 
    InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -3}, {1, -2}}], DiskBox[{1, -1}, 0.09], 
           DiskBox[{1, -3}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -2.4}, {1.4, -1.6}]}, 
           LineBox[{{0.6, -2.4}, {1.4, -2.4}, {1.4, -1.6}, {0.6, -1.6}, {
            0.6, -2.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -2}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{
            $CellContext`S[1, Q3`$], 
            $CellContext`S[3, Q3`$]} -> {1, 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[2, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {191.8875, -76.65}, {Center, Center}, {119., 146.},
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}], 
    InsetBox[
     FormBox[
      FormBox[
       InterpretationBox[
        GraphicsBox[{
          {Dashing[{Small, Small}], LineBox[{}]}, 
          LineBox[{{{0, -1}, {2, -1}}, {{0, -2}, {2, -2}}, {{0, -3}, {
           2, -3}}, {{0, -4}, {2, -4}}}], {
           LineBox[{{1, -1}, {1, -2}, {1, -3}}], DiskBox[{1, -1}, 0.09], 
           DiskBox[{1, -2}, 0.09], 
           {GrayLevel[1], EdgeForm[None], 
            RectangleBox[{0.6, -3.4}, {1.4, -2.6}]}, 
           LineBox[{{0.6, -3.4}, {1.4, -3.4}, {1.4, -2.6}, {0.6, -2.6}, {
            0.6, -3.4}}], InsetBox[
            StyleBox[
             TemplateBox[{"\"Z\"", "\[Phi]"},
              "Superscript"],
             StripOnInput->False,
             FontSize->Scaled[0.2],
             FontWeight->"Light",
             FontSlant->Italic], {1, -3}, NCache[
            ImageScaled[{Rational[1, 2], Rational[1, 2]}], 
             ImageScaled[{0.5, 0.5}]]]}},
         AxesStyle->Large,
         FrameStyle->Large,
         ImagePadding->{{23.400000000000002`, 23.400000000000002`}, {1, 1}},
         ImageSize->118.8,
         PlotRange->NCache[{Full, {
             Rational[-9, 2], 
             Rational[-1, 2]}}, {Full, {-4.5, -0.5}}],
         PlotRangePadding->Scaled[0.025]],
        Q3`QuantumCircuit[
         Q3`ControlledGate[{
            $CellContext`S[1, Q3`$], 
            $CellContext`S[2, Q3`$]} -> {1, 1}, 
          Q3`Phase[$CellContext`\[Phi], 
           $CellContext`S[3, 3]]], "Visible" -> $CellContext`S[4]]],
       TraditionalForm],
      TraditionalForm], {319.8125, -76.65}, {Center, Center}, {119., 146.},
     BaseStyle->{Graphics3DBoxOptions -> {SphericalRegion -> False}}]}, {}},
  AxesStyle->Large,
  FrameStyle->Large,
  ImageSize->{
    UpTo[600], Automatic},
  PlotRange->{{0, 383.775}, {-153.3, 0}},
  PlotRangePadding->{6, 5}]], "Output",
 CellLabel->"Out[7]=",
 CellID->126667180,ExpressionUUID->"0cfb74c8-8fb0-415d-b751-8b94cfe726db"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc1"}], "]"}], "//", 
  "Simplify"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc2"}], "]"}], "//", 
  "Simplify"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Elaborate", "[", 
   RowBox[{"qc", "-", "qc3"}], "]"}], "//", "Simplify"}]}], "Input",
 CellProlog:>Needs["Q3`"],
 CellLabel->"In[8]:=",
 CellID->286463219,ExpressionUUID->"f0f0bd4c-571c-4294-80bb-fccbbc5be354"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->1201280819,ExpressionUUID->"530a51f6-d140-4c11-a81c-90d2472beca7"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->1432959486,ExpressionUUID->"78150da7-2798-4766-8f81-99fbf96e0f0c"],

Cell[BoxData["0"], "Output",
 CellLabel->"Out[8]=",
 CellID->1868463744,ExpressionUUID->"61f85230-6db6-4646-94e5-bb566b6c6f83"]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"}, 
  Closed]]]]
}, Dynamic[CurrentValue[
 EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, 
  Closed]]]],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedFunction.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"See", " ", "Also"}], "SeeAlsoSection"]},
      {Cell[TextData[{
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["QuantumCircuit"]], "paclet:Q3/ref/QuantumCircuit", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "6b6e3582-36df-4cdf-9747-f3ef5c15f490"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["CNOT"]], "paclet:Q3/ref/CNOT", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "9ddcdd82-1891-4116-a229-bf864d2c6bac"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["CZ"]], "paclet:Q3/ref/CZ", "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "07864278-d9ac-49c0-a955-ad95a0778cc7"],
        "\[NonBreakingSpace]",
        StyleBox[
        "\[MediumSpace]\[FilledVerySmallSquare]\[MediumSpace]", 
         "InlineSeparator"],
        " ",
        Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["ControlledPower"]], "paclet:Q3/ref/ControlledPower", 
           "Q3 Package Symbol"},
          "PackageLink",
          BaseStyle->"InlineFormula"]], "InlineFormula",
         FontFamily->"Source Sans Pro",ExpressionUUID->
         "70e46ca8-18c1-4a1a-a405-368bd1d373fe"]
       }], "SeeAlso",ExpressionUUID->"2069cc9a-73bc-4a71-9a7f-600230bac6a8"]}
     }]}
  }]], "SeeAlsoSection",ExpressionUUID->"1bda28dc-003b-4960-8761-\
e46e999aeec2"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, 
       "RelatedTutorial.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox["Tutorials", "TutorialsSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Two-Qubit Gates"]], "paclet:Q3/tutorial/TwoQubitGates"},
          
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "d41cafb1-73ed-4f4d-8e4d-0b2e250af6b7"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Computation: Overview"]], 
           "paclet:Q3/tutorial/QuantumComputationOverview"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "dcfb9f66-bfbf-442b-a31e-e503a9f8b1f0"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Multi-Control Unitary Gates"]], 
           "paclet:Q3/tutorial/MultiControlUnitaryGates"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "1cb46c29-e557-4290-a1ed-3751c39250dc"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Information Systems with Q3"]], 
           "paclet:Q3/tutorial/QuantumInformationSystems"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "10b76f39-0fc2-40bd-a81a-4686f53984c3"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quick Quantum Computing with Q3"]], 
           "paclet:Q3/tutorial/QuickQuantumComputingWithQ3"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "ba3d675f-5ca2-4699-8005-fddd5bf2ca56"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3: Quick Start"]], "paclet:Q3/tutorial/Q3QuickStart"},
          "RefLinkPlain",
          BaseStyle->{"Tutorials"}]], "Tutorials",ExpressionUUID->
         "18eb3008-3e75-4e86-bb30-d7e680083ff3"]}]}
     }]}
  }]], "TutorialsSection",ExpressionUUID->"6afc96f6-4b81-4797-84b4-\
40eef4afb310"],

Cell[BoxData[GridBox[{
   {
    DynamicBox[FEPrivate`ImportImage[
      FrontEnd`FileName[{"Documentation", "FooterIcons"}, "RelatedGuide.png"]],
     ImageSizeCache->{50., {27., 33.}}], GridBox[{
      {
       StyleBox[
        RowBox[{"Related", " ", "Guides"}], "MoreAboutSection"]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Q3: Symbolic Quantum Simulation"]], 
           "paclet:Q3/guide/Q3"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "cf2c14b1-0e53-46bb-97dd-666bfe1eb724"]}]},
      {
       RowBox[{"\[FilledVerySmallSquare]", Cell[BoxData[
         TemplateBox[{
           Cell[
            TextData["Quantum Information Systems"]], 
           "paclet:Q3/guide/QuantumInformationSystems"},
          "RefLinkPlain",
          BaseStyle->{"MoreAbout"}]], "MoreAbout",ExpressionUUID->
         "fd219cf2-d19b-49fc-ad8b-23539637cf59"]}]}
     }]}
  }]], "MoreAboutSection",ExpressionUUID->"dc61ad94-5999-4094-aa82-\
bfe2cd88d6bd"],

Cell[BoxData[GridBox[{
   {
    TemplateBox[{29},
     "Spacer1"], GridBox[{
      {
       RowBox[{
        TemplateBox[{17},
         "Spacer1"], 
        StyleBox[
         RowBox[{"Related", " ", "Links"}], "RelatedLinksSection"]}]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "M. Nielsen and I. L. Chuang (2022)"}]]]], 
             "https://doi.org/10.1017/CBO9780511976667"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "37aaa775-7c72-4a30-92e2-93848c5738b7"]}]],ExpressionUUID->
         "f69552bb-2cac-4805-8293-63702e183990"],
        StyleBox[
        ", Quantum Computation and Quantum Information (Cambridge University \
Press, 2011).",
         FontSlant->"Plain"]
       }], "RelatedLinks",ExpressionUUID->
        "a40c8c48-8649-4007-a575-9a4705f7e194"]},
      {Cell[TextData[{
        Cell[BoxData[
         RowBox[{
          TemplateBox[{16},
           "Spacer1"], "\[FilledVerySmallSquare]", Cell[BoxData[
           TemplateBox[{
             Cell[
              TextData[
               Cell[
                TextData[{
                  Cell[
                   BoxData[
                    TemplateBox[{2}, "Spacer1"]]], 
                  "Mahn-Soo Choi (2022)"}]]]], 
             "https://doi.org/10.1007/978-3-030-91214-7"},
            "WebLink",
            BaseStyle->{"RelatedLinks"}]],ExpressionUUID->
           "7a98033d-ec10-490d-ae6f-23cf4e8ce761"]}]],ExpressionUUID->
         "30a02ce6-441e-442a-842e-3a9ce9f73b00"],
        ", A Quantum Computation Workbook (Springer, 2022)."
       }], "RelatedLinks",ExpressionUUID->
        "d3b67a3d-e9bf-456f-8b4c-1b9fb674ad64"]}
     }]}
  }]], "RelatedLinksSection",ExpressionUUID->"bfc055f9-404b-4f9e-8c35-\
37ee49def6b3"],

Cell[" ", "FooterCell",ExpressionUUID->"4c3c6adb-d725-42f1-a5ee-380c32ecf3ff"]
},
Saveable->False,
ScreenStyleEnvironment->"Working",
WindowSize->{900, 830},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
WindowTitle->"ControlledGate",
TaggingRules->{
 "ModificationHighlight" -> False, "ColorType" -> "", "LinkTrails" -> "", 
  "HasOptions" -> True, "ExampleCounter" -> 1, 
  "Openers" -> {
   "PrimaryExamplesSection" -> Open, 
    "ExampleSection" -> {"0" -> Open, "1" -> Closed, "2" -> Closed}, 
    "NotesSection" -> Closed, "ExampleSubsection" -> {"0" -> Closed}}, 
  "NewStyles" -> True, "CitationPopupData" -> $Failed, "ShowCitation" -> 
  False, "RootCaptions" -> "", 
  "Metadata" -> {
   "built" -> "{2023, 7, 3, 12, 20, 54.921678}", 
    "history" -> {"12", "13.2", "", ""}, "context" -> "Q3`", "keywords" -> {},
     "specialkeywords" -> {}, "tutorialcollectionlinks" -> {}, "index" -> 
    True, "label" -> "Q3 Symbol", "language" -> "en", "paclet" -> "Q3", 
    "status" -> "None", "summary" -> 
    "ControlledGate[{c1, c2, ...}, op] represents a multi-control \
multi-target unitary gate with control qubits c1, c2, ... and unitary \
operator op acting on the target qubits. ControlledGate[c, op] is equivalent \
to ControlledGate[{c}, op]. ControlledGate[{c1, c2, ...} -> {v1, v2, ...}, \
op] represents a variation of the controlled-unitary gate, where operator op \
operates when the control qubits c1, c2, ... take the logical values v1, v2, \
..., respectively. ControlledGate[c -> v, ...] is automatically converted to \
ControlledGate[{c} -> {v}, ...]. ControlledGate[{c1, c2, ...} -> v, ...] is \
automatically converted to ControlledGate[{c1, c2, ...} -> {v, v, ...}, \
...].", "synonyms" -> {}, "tabletags" -> {}, "title" -> "ControlledGate", 
    "titlemodifier" -> "", "metadescription" -> "", "windowtitle" -> 
    "ControlledGate", "type" -> "Symbol", "uri" -> "Q3/ref/ControlledGate"}},
CellContext->"Global`",
FrontEndVersion->"13.3 for Mac OS X ARM (64-bit) (June 3, 2023)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> FrontEnd`FileName[{"Wolfram"}, "Reference.nb"]]], 
   Cell[
    StyleData["Input"], CellContext -> "Global`"], 
   Cell[
    StyleData["Output"], CellContext -> "Global`"]}, Visible -> False, 
  FrontEndVersion -> "13.3 for Mac OS X ARM (64-bit) (June 3, 2023)", 
  StyleDefinitions -> "Default.nb"],
ExpressionUUID->"68b8901c-514b-4dc4-9b67-d720ed45a7d8"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{
 "PrimaryExamplesSection"->{
  Cell[23076, 645, 1390, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"ee3c3ab9-9571-4e62-a3bb-cf036349366d",
   CellTags->"PrimaryExamplesSection",
   CellID->1507859626]}
 }
*)
(*CellTagsIndex
CellTagsIndex->{
 {"PrimaryExamplesSection", 152326, 4520}
 }
*)
(*NotebookFileOutline
Notebook[{
Cell[586, 21, 7615, 185, 57, "AnchorBarGrid",ExpressionUUID->"5e59286e-a665-45d5-a1b8-376c2466dba3",
 CellID->1],
Cell[8204, 208, 85, 0, 23, "ContextNameCell",ExpressionUUID->"25306104-c9ca-49a7-903f-0267090c97cd"],
Cell[CellGroupData[{
Cell[8314, 212, 1177, 31, 60, "ObjectNameGrid",ExpressionUUID->"596978f0-3b5d-4055-9503-14bbdf0c65a0"],
Cell[9494, 245, 7554, 215, 452, "Usage",ExpressionUUID->"d5ff7cc3-66ef-4e35-94b3-54814ac31901"]
}, Open  ]],
Cell[CellGroupData[{
Cell[17085, 465, 1899, 47, 37, "NotesSection",ExpressionUUID->"33231b0a-daab-45e0-8efd-57aca423a42e",
 CellGroupingRules->{"SectionGrouping", 50},
 CellID->1243322648],
Cell[18987, 514, 920, 28, 70, "Notes",ExpressionUUID->"6670571f-a860-473b-8687-f6f46ba1239e",
 CellID->1702748548],
Cell[19910, 544, 459, 13, 70, "Notes",ExpressionUUID->"b5b55ba7-a0fb-44e0-bb13-0b0996739ed8",
 CellID->491054349],
Cell[20372, 559, 876, 26, 70, "Notes",ExpressionUUID->"c557efd5-d85f-4cc4-b770-219c017d4918",
 CellID->2019652723],
Cell[21251, 587, 848, 25, 70, "Notes",ExpressionUUID->"50ad500f-0874-4a12-9f31-91f2c18b8ae0",
 CellID->384437925],
Cell[22102, 614, 847, 25, 70, "Notes",ExpressionUUID->"2682e52e-904d-4522-a9cf-bc88e79d7a8b",
 CellID->1895961038]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "NotesSection"}, Closed]]]],
Cell[CellGroupData[{
Cell[23076, 645, 1390, 37, 36, "PrimaryExamplesSection",ExpressionUUID->"ee3c3ab9-9571-4e62-a3bb-cf036349366d",
 CellTags->"PrimaryExamplesSection",
 CellID->1507859626],
Cell[24469, 684, 191, 3, 31, "Input",ExpressionUUID->"c8cb564b-093f-410b-879f-6a85825f367e",
 CellID->851865642],
Cell[CellGroupData[{
Cell[24685, 691, 1367, 36, 31, "ExampleSection",ExpressionUUID->"4c8b2689-2cde-4485-8d22-8ed8d12874f7",
 CellID->142215935],
Cell[26055, 729, 209, 5, 29, "Input",ExpressionUUID->"baec094e-fa94-458f-9046-ee0c3e6ee972",
 CellID->1403695601],
Cell[26267, 736, 170, 3, 38, "ExampleText",ExpressionUUID->"9524945c-8d35-41be-8523-2f18acd83b35",
 CellID->493202586],
Cell[CellGroupData[{
Cell[26462, 743, 327, 9, 29, "Input",ExpressionUUID->"4354d585-bd81-45a3-b780-b1a61094b1d1",
 CellID->1804103712],
Cell[26792, 754, 656, 21, 40, "Output",ExpressionUUID->"2e5d245e-a8a0-417c-982b-240e16f9ee48",
 CellID->1356550298]
}, Open  ]],
Cell[CellGroupData[{
Cell[27485, 780, 189, 4, 29, "Input",ExpressionUUID->"5ba2af87-c4be-4b41-a5fd-b3b44b3ef910",
 CellID->1699357571],
Cell[27677, 786, 1449, 43, 56, "Output",ExpressionUUID->"269365fc-634c-4f33-b8c9-fffde981ac11",
 CellID->1451945702]
}, Open  ]],
Cell[CellGroupData[{
Cell[29163, 834, 218, 5, 70, "Input",ExpressionUUID->"b6408331-aaa1-473a-bccf-fc54a169fc74",
 CellID->388513540],
Cell[29384, 841, 804, 23, 100, "Output",ExpressionUUID->"8b8acd20-b52d-4c9c-ad3d-91c3973f732f",
 CellID->1131751160]
}, Open  ]],
Cell[CellGroupData[{
Cell[30225, 869, 228, 6, 70, "Input",ExpressionUUID->"0abb59b9-83fe-458c-8b32-b579e5a49f9e",
 CellID->227378000],
Cell[30456, 877, 2282, 66, 56, "Output",ExpressionUUID->"19a9771c-9565-4e96-aa2c-c56a076bc446",
 CellID->2042724914]
}, Open  ]],
Cell[32753, 946, 581, 15, 70, "ExampleText",ExpressionUUID->"4d12dc5f-6f09-4488-9d46-16551fee856b",
 CellID->976135211],
Cell[CellGroupData[{
Cell[33359, 965, 335, 9, 70, "Input",ExpressionUUID->"1fd9e696-7166-4688-86e9-4504b2175f03",
 CellID->1713072528],
Cell[33697, 976, 1448, 43, 56, "Output",ExpressionUUID->"939f1551-fa82-41ac-ba75-1ab78ad9d0c0",
 CellID->414684898]
}, Open  ]],
Cell[CellGroupData[{
Cell[35182, 1024, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"cd828da9-3fdc-4262-8d12-ecd6569ef8c5",
 CellID->1117862758],
Cell[35428, 1031, 210, 4, 70, "ExampleText",ExpressionUUID->"ca28bcd1-bf07-4451-9475-4dafb4cb4161",
 CellID->66695600],
Cell[CellGroupData[{
Cell[35663, 1039, 193, 4, 70, "Input",ExpressionUUID->"c0c8bbd8-760d-45cd-bd92-82204740f18d",
 CellID->287461810],
Cell[35859, 1045, 1133, 29, 95, "Output",ExpressionUUID->"856b9735-6178-4430-bcef-226df28fa2cd",
 CellID->1705404803]
}, Open  ]],
Cell[37007, 1077, 422, 11, 70, "ExampleText",ExpressionUUID->"da43cfae-26c7-45ab-b5a8-64cd13062d7a",
 CellID->376653752],
Cell[CellGroupData[{
Cell[37454, 1092, 730, 22, 70, "Input",ExpressionUUID->"b8e560b0-5ee7-46ff-986c-77f663066168",
 CellID->1100337461],
Cell[38187, 1116, 1443, 41, 52, "Output",ExpressionUUID->"f7770e23-fd12-4ab3-98ce-38d4c9e15c4e",
 CellID->374511778],
Cell[39633, 1159, 1443, 41, 52, "Output",ExpressionUUID->"2b1321d1-5dc2-48cf-82d7-30c2c9e7e532",
 CellID->144883489],
Cell[41079, 1202, 127, 2, 37, "Output",ExpressionUUID->"8dbe3f9b-b014-4aa2-9ee3-fe25edfe67b2",
 CellID->1957827572]
}, Open  ]],
Cell[CellGroupData[{
Cell[41243, 1209, 871, 26, 70, "Input",ExpressionUUID->"f4bac1ae-dcac-4fd1-9421-86d08672cdbe",
 CellID->1391490451],
Cell[42117, 1237, 4325, 119, 52, "Output",ExpressionUUID->"c1be66d2-f12c-424b-b92f-bd5a8b98d522",
 CellID->1586731006],
Cell[46445, 1358, 4324, 119, 52, "Output",ExpressionUUID->"ca65e356-6370-4f8d-8231-97c92a48bfe6",
 CellID->736089396],
Cell[50772, 1479, 127, 2, 37, "Output",ExpressionUUID->"7f3d5f50-3691-411d-b02e-3bd36927adfb",
 CellID->1948671852]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[50948, 1487, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"bd94aa2c-2585-4944-b0bc-f60cbcf8b6f5",
 CellID->1893551625],
Cell[51194, 1494, 193, 4, 70, "ExampleText",ExpressionUUID->"284f2e77-8cfb-496b-b8b1-736b5b941864",
 CellID->1781572424],
Cell[CellGroupData[{
Cell[51412, 1502, 448, 13, 70, "Input",ExpressionUUID->"583dcfd0-4cf8-46b6-8cbe-94a3e01d9163",
 CellID->907561411],
Cell[51863, 1517, 1987, 58, 52, "Output",ExpressionUUID->"fe0ddb54-7ca6-4fa8-b39a-b11819e3d8c1",
 CellID->2054292171]
}, Open  ]],
Cell[CellGroupData[{
Cell[53887, 1580, 374, 10, 70, "Input",ExpressionUUID->"46924dc0-913b-40f5-b5cd-df985efa14c8",
 CellID->1556697824],
Cell[54264, 1592, 1710, 39, 131, "Output",ExpressionUUID->"6fb151e6-4563-47bf-b38e-6a998486a03a",
 CellID->1677437122]
}, Open  ]],
Cell[CellGroupData[{
Cell[56011, 1636, 189, 4, 70, "Input",ExpressionUUID->"b2a0b1b0-c7e3-44dc-8231-b876c785a591",
 CellID->1323430295],
Cell[56203, 1642, 5855, 170, 84, "Output",ExpressionUUID->"df37c8a3-a25c-4c2a-b7aa-2e4ff32a8211",
 CellID->903145433]
}, Open  ]],
Cell[62073, 1815, 151, 1, 70, "ExampleText",ExpressionUUID->"0e0f5ac2-9b70-4103-b701-63939a8dcb99",
 CellID->796325451],
Cell[CellGroupData[{
Cell[62249, 1820, 497, 14, 70, "Input",ExpressionUUID->"abe1d9c9-0aa5-4e31-a4b2-f82660b96e38",
 CellID->1688856124],
Cell[62749, 1836, 1302, 33, 131, "Output",ExpressionUUID->"6c290362-451f-4656-a6e4-ecd5c55ef5cd",
 CellID->1255528097]
}, Open  ]],
Cell[CellGroupData[{
Cell[64088, 1874, 182, 4, 70, "Input",ExpressionUUID->"4a0cfe0c-14fc-46cd-b599-f70dc62d5171",
 CellID->97902928],
Cell[64273, 1880, 5268, 153, 84, "Output",ExpressionUUID->"61e5386b-2cd1-4479-8ee3-6948aea33c77",
 CellID->1572061165]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[69590, 2039, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"c5d5c2aa-530a-42aa-8e24-c242c882ad43",
 CellID->1616593910],
Cell[CellGroupData[{
Cell[69858, 2048, 581, 17, 70, "Input",ExpressionUUID->"a9a43fc4-d44f-4f85-8721-857e10ee0185",
 CellID->423687378],
Cell[70442, 2067, 1341, 33, 131, "Output",ExpressionUUID->"4124936c-0b12-4d48-b0cc-df3998665bc9",
 CellID->300255442]
}, Open  ]],
Cell[CellGroupData[{
Cell[71820, 2105, 652, 19, 70, "Input",ExpressionUUID->"fa23c664-5d68-4e25-80d2-cdacb9156739",
 CellID->446009393],
Cell[72475, 2126, 2211, 54, 131, "Output",ExpressionUUID->"dcd882fc-963e-4207-b2f2-33e1e787d15e",
 CellID->756579546]
}, Open  ]],
Cell[CellGroupData[{
Cell[74723, 2185, 245, 7, 70, "Input",ExpressionUUID->"8a007ce5-4573-43b3-83ca-0d657091182b",
 CellID->2072193516],
Cell[74971, 2194, 127, 2, 37, "Output",ExpressionUUID->"1a220cac-58e4-4ff7-ae3e-a53518e34dce",
 CellID->1299170062]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "0"}, Closed]]]],
Cell[CellGroupData[{
Cell[75259, 2205, 1394, 36, 70, "ExampleSection",ExpressionUUID->"c6a1ee95-4584-46fe-8ad7-afbb17347d6f",
 CellID->1293636265],
Cell[CellGroupData[{
Cell[76678, 2245, 1404, 36, 70, "ExampleSubsection",ExpressionUUID->"7043ef27-640d-4de7-b716-4c76bfd09208",
 CellID->1965812958],
Cell[78085, 2283, 1921, 60, 70, "ExampleText",ExpressionUUID->"0c7aa4f3-37dd-4e0e-bd2e-59186a7adb07",
 CellID->227879916],
Cell[80009, 2345, 209, 5, 70, "Input",ExpressionUUID->"71fb8275-6431-42f8-9f10-5c98244a4ac5",
 CellID->1801264145],
Cell[80221, 2352, 136, 1, 70, "ExampleText",ExpressionUUID->"db782b97-aa82-4e66-be39-ffc32793b9ad",
 CellID->1033495556],
Cell[CellGroupData[{
Cell[80382, 2357, 550, 17, 70, "Input",ExpressionUUID->"f44cb84c-1617-45fd-859e-accf2ebd223c",
 CellID->1096870451],
Cell[80935, 2376, 647, 21, 53, "Output",ExpressionUUID->"6e3e5990-09f5-4bdd-a5f6-5d927c1dd7c1",
 CellID->491029404]
}, Open  ]],
Cell[81597, 2400, 151, 1, 70, "ExampleText",ExpressionUUID->"76a7ca47-1fd7-419c-a51d-f57fe562138a",
 CellID->1955102746],
Cell[CellGroupData[{
Cell[81773, 2405, 337, 9, 70, "Input",ExpressionUUID->"c86952bf-725b-4ec0-9a9f-b5365bfb06f9",
 CellID->2059470547],
Cell[82113, 2416, 1384, 43, 92, "Output",ExpressionUUID->"3fef3a11-5a6e-45a0-8357-f211f8657cb7",
 CellID->638433569]
}, Open  ]],
Cell[83512, 2462, 196, 4, 70, "ExampleText",ExpressionUUID->"789492ba-4f63-4904-8043-eee75f8aa180",
 CellID->1600123813],
Cell[CellGroupData[{
Cell[83733, 2470, 445, 12, 70, "Input",ExpressionUUID->"61eb7453-9767-442e-b8e4-fd7b76180024",
 CellID->8884588],
Cell[84181, 2484, 1287, 32, 95, "Output",ExpressionUUID->"2314c35a-e101-4686-ace1-c98035611ca4",
 CellID->1690371871]
}, Open  ]],
Cell[85483, 2519, 207, 4, 70, "ExampleText",ExpressionUUID->"bf3616c6-abdb-4186-be16-48d519cda364",
 CellID->777355164],
Cell[CellGroupData[{
Cell[85715, 2527, 186, 4, 70, "Input",ExpressionUUID->"7e24ce5d-ecc7-4235-9aea-c752d184cfad",
 CellID->1865987295],
Cell[85904, 2533, 3236, 109, 78, "Output",ExpressionUUID->"0aa12711-ae7a-41cb-9a41-4156867f9863",
 CellID->1812737970]
}, Open  ]],
Cell[89155, 2645, 148, 1, 70, "ExampleText",ExpressionUUID->"c2eca4a6-5908-4d48-9fdb-eada5eb2ce3e",
 CellID->1490385628],
Cell[CellGroupData[{
Cell[89328, 2650, 252, 6, 70, "Input",ExpressionUUID->"9999c13b-9a3d-4b6e-877f-7602761e86eb",
 CellID->984160605],
Cell[89583, 2658, 3454, 79, 95, "Output",ExpressionUUID->"6ab8ae0a-cd24-4755-a9a6-1d2cefc08dfb",
 CellID->1598922921]
}, Open  ]],
Cell[CellGroupData[{
Cell[93074, 2742, 282, 7, 70, "Input",ExpressionUUID->"8e470220-2270-4db5-bc2f-98b5d8369bf7",
 CellID->298820583],
Cell[93359, 2751, 126, 2, 37, "Output",ExpressionUUID->"91603fcb-111f-4785-a81c-b4b7abc49c7c",
 CellID->955796412]
}, Open  ]],
Cell[CellGroupData[{
Cell[93522, 2758, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"fdb16c1f-65f0-41d4-bd3a-8efdae87f25a",
 CellID->1705608657],
Cell[93768, 2765, 1101, 33, 70, "ExampleText",ExpressionUUID->"2d7e6b91-089e-46bf-872e-62fb7e3771f7",
 CellID->181077262],
Cell[CellGroupData[{
Cell[94894, 2802, 365, 10, 70, "Input",ExpressionUUID->"f6d84b02-f8d0-46e1-9c31-c4e075ddbf10",
 CellID->1563352008],
Cell[95262, 2814, 3224, 109, 78, "Output",ExpressionUUID->"37816588-2151-4692-93db-804b4552d3a7",
 CellID->2051299258]
}, Open  ]],
Cell[98501, 2926, 125, 1, 70, "ExampleText",ExpressionUUID->"4868bc9a-b530-45cd-ba8f-03165a086a0c",
 CellID->1652630181],
Cell[CellGroupData[{
Cell[98651, 2931, 223, 5, 70, "Input",ExpressionUUID->"1a99cb39-aa0b-4cff-aebb-6a6dda19de11",
 CellID->63469277],
Cell[98877, 2938, 3037, 106, 78, "Output",ExpressionUUID->"7b3be92e-137d-4c29-8618-d41fa1597a22",
 CellID->546984323]
}, Open  ]],
Cell[101929, 3047, 238, 6, 70, "ExampleText",ExpressionUUID->"496b1728-af9e-4ac7-b616-8e54245465fa",
 CellID->1753917898],
Cell[CellGroupData[{
Cell[102192, 3057, 350, 10, 70, "Input",ExpressionUUID->"5f5ee38e-11a3-414b-a7d1-fe8b6bec43a2",
 CellID->1043909238],
Cell[102545, 3069, 127, 2, 37, "Output",ExpressionUUID->"2b9b8ff4-b4c8-47b2-b4e0-9357067ff4e0",
 CellID->1610283999]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[102721, 3077, 243, 5, 70, "ExampleDelimiter",ExpressionUUID->"31ae6430-8c7b-44cd-8300-670c45ce1b5f",
 CellID->1600539001],
Cell[102967, 3084, 571, 17, 70, "ExampleText",ExpressionUUID->"79199969-d11b-4cb4-a2e6-7269e9019f29",
 CellID->595717937],
Cell[CellGroupData[{
Cell[103563, 3105, 377, 10, 70, "Input",ExpressionUUID->"500055e9-8455-419c-9fdf-7e03c8b7ed13",
 CellID->1811053528],
Cell[103943, 3117, 1299, 43, 53, "Output",ExpressionUUID->"be50fb6b-3c13-49b7-bfc3-b6b31e7144fa",
 CellID->1454251699]
}, Open  ]],
Cell[CellGroupData[{
Cell[105279, 3165, 220, 5, 70, "Input",ExpressionUUID->"6e0e1754-9344-49b1-8f8a-89c82edae3b9",
 CellID->1793861229],
Cell[105502, 3172, 1381, 34, 131, "Output",ExpressionUUID->"9f0bbbd2-90fa-4c3a-a72c-c4a7da88bc4b",
 CellID->1236026046]
}, Open  ]],
Cell[106898, 3209, 385, 8, 70, "ExampleText",ExpressionUUID->"caa8d7d5-c50e-46f8-aeb9-d2402a1df659",
 CellID->1051097161],
Cell[CellGroupData[{
Cell[107308, 3221, 254, 6, 70, "Input",ExpressionUUID->"d1091702-79cb-4981-ba49-cb4d7dba0090",
 CellID->1765521323],
Cell[107565, 3229, 3746, 86, 131, "Output",ExpressionUUID->"5ba38416-6c99-4a73-b9ec-0b38d794d1e2",
 CellID->809127871]
}, Open  ]],
Cell[CellGroupData[{
Cell[111348, 3320, 211, 5, 70, "Input",ExpressionUUID->"b1b686f0-ef19-4317-8b2d-973c6b14e8e5",
 CellID->1192347325],
Cell[111562, 3327, 126, 2, 37, "Output",ExpressionUUID->"48d2f8c4-d866-457a-bb91-aff719f89d4e",
 CellID->804611545]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSubsection", "0"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "1"}, Closed]]]],
Cell[CellGroupData[{
Cell[111964, 3341, 1417, 36, 70, "ExampleSection",ExpressionUUID->"2a2b669f-040e-49c3-9f03-3731259755c8",
 CellID->1020263627],
Cell[113384, 3379, 207, 5, 70, "Input",ExpressionUUID->"d99a708d-487c-469f-b6d1-781a1847c020",
 CellID->54597739],
Cell[113594, 3386, 257, 4, 70, "ExampleText",ExpressionUUID->"ce1bb20e-d226-4061-b0c9-827052c6e4a2",
 CellID->1658935743],
Cell[CellGroupData[{
Cell[113876, 3394, 323, 8, 70, "Input",ExpressionUUID->"07b011eb-009c-4d3c-8d88-f0caf64477f4",
 CellID->450269680],
Cell[114202, 3404, 204, 4, 38, "Output",ExpressionUUID->"3226f35a-4d23-4833-adcf-e56569dff759",
 CellID->1656572259]
}, Open  ]],
Cell[CellGroupData[{
Cell[114443, 3413, 244, 6, 70, "Input",ExpressionUUID->"5fe293ac-8bc2-45a2-b34d-2d32a7052650",
 CellID->113446564],
Cell[114690, 3421, 829, 27, 40, "Output",ExpressionUUID->"78d0edb5-dd53-436a-af88-832e905481c6",
 CellID->1175398150]
}, Open  ]],
Cell[CellGroupData[{
Cell[115556, 3453, 355, 10, 70, "Input",ExpressionUUID->"20541f68-d4d5-403a-9b7c-b35230ba90d8",
 CellID->1884776724],
Cell[115914, 3465, 703, 24, 50, "Output",ExpressionUUID->"7ec9f8d8-8142-4cbc-b781-9c052b2d3700",
 CellID->504389125]
}, Open  ]],
Cell[CellGroupData[{
Cell[116654, 3494, 589, 16, 70, "Input",ExpressionUUID->"a9538de2-cc5f-4e43-a03c-e888e971dcf6",
 CellID->1389124015],
Cell[117246, 3512, 1306, 32, 95, "Output",ExpressionUUID->"1ddb224f-7179-43bf-9e95-0cf379e6ad31",
 CellID->864872096]
}, Open  ]],
Cell[CellGroupData[{
Cell[118589, 3549, 642, 17, 70, "Input",ExpressionUUID->"65b1bae5-0660-4eef-b5a3-603d47994957",
 CellID->125637926],
Cell[119234, 3568, 1239, 31, 95, "Output",ExpressionUUID->"4a09e293-12d5-4ea6-9bd7-751a91595da1",
 CellID->645946781]
}, Open  ]],
Cell[CellGroupData[{
Cell[120510, 3604, 250, 6, 70, "Input",ExpressionUUID->"9dd3297d-b0d9-4eb7-b005-025ea5b87a1c",
 CellID->1909614846],
Cell[120763, 3612, 125, 2, 37, "Output",ExpressionUUID->"4d55dae9-8fe0-4973-b57b-40b373e60120",
 CellID->61532876]
}, Open  ]],
Cell[120903, 3617, 175, 3, 70, "ExampleText",ExpressionUUID->"15d62ffe-8c12-4b2b-b186-afd2fe6eadb1",
 CellID->511713125],
Cell[CellGroupData[{
Cell[121103, 3624, 268, 7, 70, "Input",ExpressionUUID->"30d874de-864b-4b1c-9e38-02f2d12a42e8",
 CellID->375479679],
Cell[121374, 3633, 396, 8, 70, "Message",ExpressionUUID->"60f49dc8-cf2f-4f49-b001-116dc4851dfa",
 CellID->1090041081],
Cell[121773, 3643, 703, 24, 50, "Output",ExpressionUUID->"79ca6cdf-ba1b-434d-bde1-24cd1bd773e2",
 CellID->137455810]
}, Open  ]],
Cell[CellGroupData[{
Cell[122513, 3672, 242, 5, 70, "ExampleDelimiter",ExpressionUUID->"b102b10c-2e0c-4f52-af7d-4f35c16a731a",
 CellID->174573991],
Cell[122758, 3679, 374, 9, 70, "ExampleText",ExpressionUUID->"14c34e30-a4de-4b49-ac74-cd06839bb1cd",
 CellID->1484041902],
Cell[CellGroupData[{
Cell[123157, 3692, 408, 12, 70, "Input",ExpressionUUID->"dc19ad6b-fe7c-4749-b923-c11da779a41e",
 CellID->1674411155],
Cell[123568, 3706, 1062, 36, 50, "Output",ExpressionUUID->"5151cd22-b699-4ccf-8309-b95c5a239dfa",
 CellID->749406506]
}, Open  ]],
Cell[CellGroupData[{
Cell[124667, 3747, 184, 4, 70, "Input",ExpressionUUID->"dacf46e0-996f-4937-91d7-16d92e1787ca",
 CellID->1750426850],
Cell[124854, 3753, 2183, 71, 52, "Output",ExpressionUUID->"238b70d5-828a-495c-9e16-e50728d2282f",
 CellID->995163237]
}, Open  ]],
Cell[CellGroupData[{
Cell[127074, 3829, 253, 7, 70, "Input",ExpressionUUID->"97d44f6c-079f-45b1-a0a3-67e5bde7554e",
 CellID->295000539],
Cell[127330, 3838, 884, 26, 110, "Output",ExpressionUUID->"37f3fc82-5ea4-4787-93ac-25eb8aa26fe8",
 CellID->1182494314]
}, Open  ]],
Cell[128229, 3867, 175, 3, 70, "ExampleText",ExpressionUUID->"e8e32497-7873-4774-8f47-101658e21881",
 CellID->2142135012],
Cell[CellGroupData[{
Cell[128429, 3874, 495, 15, 70, "Input",ExpressionUUID->"73da201d-7fa1-4349-aff3-8e4546d704a8",
 CellID->1434563406],
Cell[128927, 3891, 1027, 34, 50, "Output",ExpressionUUID->"85475f6c-08a5-49ff-8c0a-f8896edb2da0",
 CellID->907162183]
}, Open  ]],
Cell[CellGroupData[{
Cell[129991, 3930, 283, 7, 70, "Input",ExpressionUUID->"e3064ca8-e8d2-4efc-b849-3137a78ebf7c",
 CellID->1544994010],
Cell[130277, 3939, 126, 2, 37, "Output",ExpressionUUID->"7675992b-6ce6-451e-850b-3a5a8213996f",
 CellID->261354560]
}, Open  ]],
Cell[130418, 3944, 309, 5, 70, "ExampleText",ExpressionUUID->"65be8571-3cf9-4553-85a7-395894e269f2",
 CellID->382850454],
Cell[CellGroupData[{
Cell[130752, 3953, 644, 18, 70, "Input",ExpressionUUID->"1793343c-9063-4915-a491-af9497437511",
 CellID->1698297027],
Cell[131399, 3973, 1489, 35, 167, "Output",ExpressionUUID->"38c8733e-8fff-488d-a170-7cb47d1fb15d",
 CellID->1549298048]
}, Open  ]],
Cell[132903, 4011, 244, 4, 70, "ExampleText",ExpressionUUID->"6e2d2745-0a7b-4b9e-bfbd-a37e9cfb24ba",
 CellID->42562061],
Cell[CellGroupData[{
Cell[133172, 4019, 1945, 54, 70, "Input",ExpressionUUID->"d7f533b5-da8d-4744-af3a-cc59bfb42591",
 CellID->385898355],
Cell[135120, 4075, 5435, 131, 261, "Output",ExpressionUUID->"0cfb74c8-8fb0-415d-b751-8b94cfe726db",
 CellID->126667180]
}, Open  ]],
Cell[CellGroupData[{
Cell[140592, 4211, 495, 14, 70, "Input",ExpressionUUID->"f0f0bd4c-571c-4294-80bb-fccbbc5be354",
 CellID->286463219],
Cell[141090, 4227, 127, 2, 37, "Output",ExpressionUUID->"530a51f6-d140-4c11-a81c-90d2472beca7",
 CellID->1201280819],
Cell[141220, 4231, 127, 2, 37, "Output",ExpressionUUID->"78150da7-2798-4766-8f81-99fbf96e0f0c",
 CellID->1432959486],
Cell[141350, 4235, 127, 2, 37, "Output",ExpressionUUID->"61f85230-6db6-4646-94e5-bb566b6c6f83",
 CellID->1868463744]
}, Open  ]]
}, Open  ]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "ExampleSection", "2"}, Closed]]]]
}, Dynamic[CurrentValue[EvaluationNotebook[], {TaggingRules, "Openers", "PrimaryExamplesSection"}, Closed]]]],
Cell[141731, 4247, 2311, 62, 70, "SeeAlsoSection",ExpressionUUID->"1bda28dc-003b-4960-8761-e46e999aeec2"],
Cell[144045, 4311, 2508, 63, 70, "TutorialsSection",ExpressionUUID->"6afc96f6-4b81-4797-84b4-40eef4afb310"],
Cell[146556, 4376, 1086, 28, 70, "MoreAboutSection",ExpressionUUID->"dc61ad94-5999-4094-aa82-bfe2cd88d6bd"],
Cell[147645, 4406, 2106, 59, 70, "RelatedLinksSection",ExpressionUUID->"bfc055f9-404b-4f9e-8c35-37ee49def6b3"],
Cell[149754, 4467, 78, 0, 70, "FooterCell",ExpressionUUID->"4c3c6adb-d725-42f1-a5ee-380c32ecf3ff"]
}
]
*)

(* End of internal cache information *)

